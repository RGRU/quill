{"version":3,"sources":["webpack://Quill/webpack/universalModuleDefinition","webpack://Quill/webpack/bootstrap","webpack://Quill/./node_modules/parchment/src/scope.ts","webpack://Quill/./node_modules/parchment/src/collection/linked-list.ts","webpack://Quill/./node_modules/parchment/src/error.ts","webpack://Quill/./node_modules/parchment/src/registry.ts","webpack://Quill/./node_modules/parchment/src/blot/abstract/shadow.ts","webpack://Quill/./node_modules/parchment/src/blot/abstract/parent.ts","webpack://Quill/./node_modules/parchment/src/blot/abstract/container.ts","webpack://Quill/./node_modules/parchment/src/blot/abstract/leaf.ts","webpack://Quill/./node_modules/parchment/src/attributor/attributor.ts","webpack://Quill/./node_modules/parchment/src/attributor/class.ts","webpack://Quill/./node_modules/parchment/src/attributor/style.ts","webpack://Quill/./node_modules/parchment/src/attributor/store.ts","webpack://Quill/./node_modules/parchment/src/blot/inline.ts","webpack://Quill/./node_modules/parchment/src/blot/block.ts","webpack://Quill/./node_modules/parchment/src/blot/embed.ts","webpack://Quill/./node_modules/parchment/src/blot/scroll.ts","webpack://Quill/./node_modules/parchment/src/blot/text.ts","webpack://Quill/./node_modules/quill-delta/lib/delta.js","webpack://Quill/./blots/block.js","webpack://Quill/./core/quill.js","webpack://Quill/./blots/inline.js","webpack://Quill/./node_modules/extend/index.js","webpack://Quill/./blots/text.js","webpack://Quill/./core/module.js","webpack://Quill/./core/emitter.js","webpack://Quill/./blots/break.js","webpack://Quill/./core/logger.js","webpack://Quill/./node_modules/deep-equal/index.js","webpack://Quill/./blots/container.js","webpack://Quill/./node_modules/quill-delta/lib/op.js","webpack://Quill/./core/selection.js","webpack://Quill/./blots/cursor.js","webpack://Quill/./formats/link.js","webpack://Quill/./ui/picker.js","webpack://Quill/./node_modules/clone/clone.js","webpack://Quill/./formats/color.js","webpack://Quill/./formats/code.js","webpack://Quill/./ui/icons.js","webpack://Quill/./node_modules/quill-delta/node_modules/extend/index.js","webpack://Quill/./core/instances.js","webpack://Quill/./core/theme.js","webpack://Quill/./blots/embed.js","webpack://Quill/./modules/clipboard.js","webpack://Quill/./formats/align.js","webpack://Quill/./formats/background.js","webpack://Quill/./formats/direction.js","webpack://Quill/./formats/font.js","webpack://Quill/./formats/size.js","webpack://Quill/./formats/bold.js","webpack://Quill/./ui/color-picker.js","webpack://Quill/./ui/icon-picker.js","webpack://Quill/./ui/tooltip.js","webpack://Quill/./themes/base.js","webpack://Quill/./quill.js","webpack://Quill/./core.js","webpack://Quill/./node_modules/fast-diff/diff.js","webpack://Quill/./node_modules/deep-equal/lib/keys.js","webpack://Quill/./node_modules/deep-equal/lib/is_arguments.js","webpack://Quill/./core/editor.js","webpack://Quill/./node_modules/buffer/index.js","webpack://Quill/(webpack)/buildin/global.js","webpack://Quill/./node_modules/base64-js/index.js","webpack://Quill/./node_modules/ieee754/index.js","webpack://Quill/./node_modules/isarray/index.js","webpack://Quill/./node_modules/eventemitter3/index.js","webpack://Quill/./blots/scroll.js","webpack://Quill/./modules/history.js","webpack://Quill/./modules/keyboard.js","webpack://Quill/./modules/uploader.js","webpack://Quill/./formats/indent.js","webpack://Quill/./formats/blockquote.js","webpack://Quill/./formats/header.js","webpack://Quill/./formats/list.js","webpack://Quill/./formats/italic.js","webpack://Quill/./formats/script.js","webpack://Quill/./formats/strike.js","webpack://Quill/./formats/underline.js","webpack://Quill/./formats/formula.js","webpack://Quill/./formats/image.js","webpack://Quill/./formats/video.js","webpack://Quill/./modules/syntax.js","webpack://Quill/./modules/table.js","webpack://Quill/./formats/table.js","webpack://Quill/./modules/toolbar.js","webpack://Quill/./assets/icons/align-left.svg","webpack://Quill/./assets/icons/align-center.svg","webpack://Quill/./assets/icons/align-right.svg","webpack://Quill/./assets/icons/align-justify.svg","webpack://Quill/./assets/icons/background.svg","webpack://Quill/./assets/icons/blockquote.svg","webpack://Quill/./assets/icons/bold.svg","webpack://Quill/./assets/icons/clean.svg","webpack://Quill/./assets/icons/code.svg","webpack://Quill/./assets/icons/color.svg","webpack://Quill/./assets/icons/direction-ltr.svg","webpack://Quill/./assets/icons/direction-rtl.svg","webpack://Quill/./assets/icons/formula.svg","webpack://Quill/./assets/icons/header.svg","webpack://Quill/./assets/icons/header-2.svg","webpack://Quill/./assets/icons/italic.svg","webpack://Quill/./assets/icons/image.svg","webpack://Quill/./assets/icons/indent.svg","webpack://Quill/./assets/icons/outdent.svg","webpack://Quill/./assets/icons/link.svg","webpack://Quill/./assets/icons/list-bullet.svg","webpack://Quill/./assets/icons/list-check.svg","webpack://Quill/./assets/icons/list-ordered.svg","webpack://Quill/./assets/icons/subscript.svg","webpack://Quill/./assets/icons/superscript.svg","webpack://Quill/./assets/icons/strike.svg","webpack://Quill/./assets/icons/table.svg","webpack://Quill/./assets/icons/underline.svg","webpack://Quill/./assets/icons/video.svg","webpack://Quill/./assets/icons/dropdown.svg","webpack://Quill/./themes/bubble.js","webpack://Quill/./themes/snow.js"],"names":["root","factory","exports","module","define","amd","window","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","Scope","src_scope","linked_list","[object Object]","this","head","tail","length","nodes","insertBefore","append","apply","slice","index","next","iterator","cur","node","refNode","remove","prev","target","contains","curNode","ret","inclusive","callback","startNode","offset","find","curIndex","curLength","Math","min","reduce","memo","push","ParchmentError","Error","message","super","constructor","registry_Registry","attributes","classes","tags","types","bubble","blots","has","parentNode","scroll","input","match","query","blotClass","blot","Node","nodeType","TEXT_NODE","set","domNode","scope","ANY","Text","text","LEVEL","BLOCK","block","INLINE","inline","HTMLElement","getAttribute","split","some","tagName","TYPE","definitions","map","register","definition","blotName","attrName","keyName","className","Array","isArray","toUpperCase","forEach","tag","WeakMap","shadow_ShadowBlot","parseInt","toString","document","createElement","indexOf","classList","add","statics","cloneNode","parent","removeChild","delete","isolate","BLOT","wrap","ATTRIBUTE","format","def","ref","undefined","children","_context","requiredContainer","detach","replacement","_force","_mutations","wrapper","appendChild","shadow","parent_ParentBlot","uiNode","build","other","attach","child","uiClass","setAttribute","firstChild","from","childNodes","filter","reverse","makeAttachedBlot","err","forEachAt","childLength","deleteAt","criteria","descendant","Number","MAX_VALUE","descendants","lengthLeft","childIndex","concat","done","allowedChildren","BLOCK_BLOT","splitAfter","unwrap","formatAt","insertAt","childBlot","refBlot","refDomNode","nextSibling","targetParent","context","optimize","enforceAllowedChildren","defaultChild","position","path","moveChildren","replaceWith","force","after","clone","_length","mutations","addedNodes","removedNodes","mutation","type","body","compareDocumentPosition","DOCUMENT_POSITION_CONTAINED_BY","sort","a","b","DOCUMENT_POSITION_FOLLOWING","e","replaceChild","abstract_parent","container_ContainerBlot","checkMerge","container","leaf_LeafBlot","_domNode","_inclusive","INLINE_BLOT","leaf","attributor_Attributor","item","options","attributeBit","whitelist","canAdd","_node","replace","removeAttribute","class_match","prefix","attributor_class","join","camelize","parts","rest","part","style","trim","store","attribute","keys","styles","attr","copy","inline_InlineBlot","toLowerCase","formats","values","obj1","obj2","prop","isEqual","update","move","block_BlockBlot","blot_embed","_scroll","OBSERVER_CONFIG","characterData","characterDataOldValue","childList","subtree","MAX_OPTIMIZE_ITERATIONS","scroll_ScrollBlot","registry","observer","MutationObserver","observe","disconnect","mutationsMap","records","takeRecords","pop","mark","markParent","remaining","previousSibling","grandChild","blot_scroll","text_TextBlot","createTextNode","data","normalize","splitText","blot_text","diff","equal","extend","op","NULL_CHARACTER","String","fromCharCode","Delta","ops","insert","newOp","retain","lastOp","unshift","splice","chop","predicate","partition","passed","failed","initial","changeLength","elem","start","end","Infinity","iter","hasNext","nextOp","compose","thisIter","otherIter","firstOther","peek","firstLeft","peekType","peekLength","delta","thisOp","otherOp","strings","diffResult","component","opLength","INSERT","DELETE","EQUAL","eachLine","newline","line","transform","priority","transformPosition","nextType","_parchment","NEWLINE_LENGTH","Block","BlockBlot","cache","blockDelta","lines","shift","lineIndex","Break","Inline","EmbedBlot","TextBlot","BlockEmbed","AttributorStore","_extend2","default","BLOCK_ATTRIBUTE","endsWith","LeafBlot","bubbleFormats","Parchment","_selection","debug","_logger2","globalRegistry","Registry","ParentBlot","Quill","limit","logger","level","instances","imports","error","overwrite","warn","startsWith","expandConfig","html","innerHTML","addContainer","addEventListener","preventDefault","scrollingContainer","emitter","Emitter","ScrollBlot","editor","Editor","selection","Selection","theme","keyboard","addModule","clipboard","history","uploader","init","on","events","EDITOR_CHANGE","TEXT_CHANGE","toggle","isBlank","SCROLL_UPDATE","source","oldRange","lastRange","_selection$getRange","getRange","newRange","_slicedToArray","selectionInfo","modify","contents","convert","setContents","clear","placeholder","readOnly","disable","allowReadOnlyEdits","blur","setRange","deleteText","_overload","overload","_overload2","enable","editReadOnly","modifier","enabled","focus","scrollTop","scrollIntoView","sources","API","range","getSelection","change","formatLine","formatText","setSelection","SILENT","_overload3","_overload4","_overload5","_overload6","getBounds","bounds","containerBounds","getBoundingClientRect","bottom","top","height","left","right","width","getContents","getLength","_overload7","_overload8","getFormat","getIndex","getLeaf","getLine","getLines","getModule","getSemanticHTML","_overload9","_overload10","getHTML","getText","_overload11","_overload12","hasFocus","insertEmbed","embed","insertText","_overload13","_overload14","isEnabled","off","args","once","removeFormat","_overload15","_overload16","deleted","applied","applyDelta","_overload17","_overload18","Range","max","setText","USER","updateContents","userConfig","DEFAULTS","import","Theme","themeConfig","config","moduleConfig","moduleClass","toolbar","querySelector","oldDelta","shiftRange","emit","_map","pos","_map2","_map3","_map4","version","parchment","core/module","Module","core/theme","InlineBlot","self","selfIndex","order","otherIndex","compare","hasOwn","toStr","gOPD","getOwnPropertyDescriptor","arr","isPlainObject","obj","hasOwnConstructor","hasIsPrototypeOf","setProperty","configurable","newValue","writable","getProperty","src","copyIsArray","arguments","deep","escapeText","&","<",">","\"","'","quill","eventName","querySelectorAll","handleDOM","EventEmitter","listeners","log","event","handler","listenDOM","SCROLL_BEFORE_UPDATE","SCROLL_BLOT_MOUNT","SCROLL_BLOT_UNMOUNT","SCROLL_OPTIMIZE","SELECTION_CHANGE","levels","method","console","namespace","newLevel","pSlice","objectKeys","isArguments","deepEqual","actual","expected","opts","Date","getTime","strict","isUndefinedOrNull","isBuffer","ka","kb","objEquiv","x","ContainerBlot","lib","keepNull","Iterator","retOp","substr","composing","mouseDown","cursor","savedRange","handleComposition","handleDragging","setTimeout","native","getNativeRange","textNode","setNativeRange","ignored","_context$range","startOffset","endNode","endOffset","restore","nativeRange","collapsed","scrollLength","_scroll$leaf","_scroll$leaf2","_leaf$position","_leaf$position2","createRange","setStart","_scroll$leaf3","_scroll$leaf4","_leaf$position3","_leaf$position4","setEnd","rect","side","rangeCount","getRangeAt","normalizeNative","info","normalized","normalizedToRange","activeElement","positions","indexes","_position","startContainer","endContainer","lastChild","rangeToNative","_scroll$leaf5","_scroll$leaf6","leafOffset","_leaf$position5","_leaf$position6","_scroll$line","first","last","_scroll$line3","scrollBounds","removeAllRanges","addRange","_getRange","_getRange2","_deepEqual2","_clone2","Cursor","CONTENTS","savedLength","restoreText","_ref","Link","sanitize","url","PROTOCOL_WHITELIST","SANITIZED_URL","protocols","anchor","href","protocol","optionsCounter","toggleAriaAttribute","element","select","buildPicker","display","label","togglePicker","escape","buildItem","option","tabIndex","hasAttribute","textContent","selectItem","buildLabel","DropdownIcon","buildOptions","id","selected","close","trigger","selectedIndex","dispatchEvent","Event","isActive","Buffer","_instanceof","nativeMap","nativeSet","nativePromise","Map","_","Set","Promise","circular","depth","includeNonEnumerable","allParents","allChildren","useBuffer","_clone","proto","resolve","reject","then","__isArray","__isRegExp","RegExp","__getRegExpFlags","lastIndex","__isDate","allocUnsafe","getPrototypeOf","keyChild","valueChild","entryChild","attrs","getOwnPropertySymbols","symbols","symbol","descriptor","allPropertyNames","getOwnPropertyNames","propertyName","__objToStr","re","flags","global","ignoreCase","multiline","clonePrototype","ColorAttributor","StyleAttributor","ColorClass","ClassAttributor","ColorStyle","_text","CodeBlockContainer","Container","innerText","CodeBlock","Code","TAB","align","","alignLeftIcon","center","alignCenterIcon","alignRightIcon","justify","alignJustifyIcon","background","backgroundIcon","blockquote","blockquoteIcon","bold","boldIcon","clean","cleanIcon","code","codeIcon","code-block","color","colorIcon","direction","directionLeftToRightIcon","rtl","directionRightToLeftIcon","formula","formulaIcon","header","1","headerIcon","2","header2Icon","italic","italicIcon","image","imageIcon","indent","+1","indentIcon","-1","outdentIcon","link","linkIcon","list","bullet","listBulletIcon","check","listCheckIcon","ordered","listOrderedIcon","script","sub","subscriptIcon","superscriptIcon","strike","strikeIcon","table","tableIcon","underline","underlineIcon","video","videoIcon","ModuleClass","themes","GUARD_TEXT","contentNode","childNode","leftGuard","rightGuard","prevLength","_align","_background","_color","_direction","_font","_size","CLIPBOARD_CONFIG","matchText","matchNewline","deltaEndsWith","ELEMENT_NODE","matchBlot","matchAttributor","fontStyle","fontWeight","applyFormat","parseFloat","textIndent","includes","language","row","matchAlias","ATTRIBUTE_ATTRIBUTORS","AlignAttribute","DirectionAttribute","STYLE_ATTRIBUTORS","AlignStyle","BackgroundStyle","DirectionStyle","FontStyle","SizeStyle","Clipboard","onCopy","onCapturePaste","matchers","selector","matcher","addMatcher","DOMParser","parseFromString","nodeMatches","_prepareMatching","prepareMatching","_prepareMatching2","elementMatchers","textMatchers","traverse","dangerouslyPasteHTML","paste","onCaptureCopy","defaultPrevented","onPaste","isCut","_quill$selection$getR","_onCaptureCopy","clipboardData","setData","getData","files","upload","pastedDelta","pair","_pair","newDelta","endText","isLine","preNodes","childrenDelta","reducedDelta","Attributor","isPre","replacer","collapse","replaced","AlignClass","BackgroundClass","DirectionClass","FontClass","SizeClass","Bold","Picker","backgroundColor","colorLabel","stroke","fill","icons","defaultItem","boundsContainer","TEMPLATE","marginTop","hide","reference","offsetWidth","rootBounds","verticalShift","show","ALIGNS","COLORS","FONTS","HEADERS","SIZES","BaseTheme","listener","tooltip","textbox","pickers","picker","removeEventListener","extendToolbar","buildButtons","buttons","button","buildPickers","selects","fillSelect","IconPicker","ColorPicker","handlers","edit","fileInput","mimetypes","click","defaultValue","BaseTooltip","Tooltip","listen","save","cancel","preview","restoreFocus","linkRange","extractVideoUrl","_code","attributors/attribute/direction","attributors/class/align","attributors/class/background","attributors/class/color","attributors/class/direction","attributors/class/font","attributors/class/size","attributors/style/align","attributors/style/background","attributors/style/color","attributors/style/direction","attributors/style/font","attributors/style/size","formats/align","formats/direction","formats/indent","Indent","formats/background","formats/color","formats/font","formats/size","formats/blockquote","Blockquote","formats/code-block","formats/header","Header","formats/list","List","formats/bold","formats/code","InlineCode","formats/italic","Italic","formats/link","formats/script","Script","formats/strike","Strike","formats/underline","Underline","formats/formula","Formula","formats/image","Image","formats/video","Video","modules/syntax","Syntax","modules/table","Table","modules/toolbar","Toolbar","themes/bubble","BubbleTheme","themes/snow","SnowTheme","ui/icons","Icons","ui/picker","ui/icon-picker","ui/color-picker","ui/tooltip","_block","blots/block","blots/block/embed","blots/break","blots/container","blots/cursor","blots/embed","Embed","blots/inline","blots/scroll","Scroll","blots/text","modules/clipboard","modules/history","History","modules/keyboard","Keyboard","modules/uploader","Uploader","DIFF_DELETE","DIFF_INSERT","DIFF_EQUAL","diff_main","text1","text2","cursor_pos","commonlength","diff_commonPrefix","commonprefix","substring","diff_commonSuffix","commonsuffix","diffs","longtext","shorttext","hm","diff_halfMatchI_","best_longtext_a","best_longtext_b","best_shorttext_a","best_shorttext_b","seed","floor","j","best_common","prefixLength","suffixLength","text1_a","text1_b","text2_a","text2_b","hm1","ceil","hm2","mid_common","diff_halfMatch_","diffs_a","diffs_b","text1_length","text2_length","max_d","v_offset","v_length","v1","v2","front","k1start","k1end","k2start","k2end","k1","k1_offset","y1","x1","charAt","k2_offset","x2","diff_bisectSplit_","k2","y2","diff_bisect_","diff_compute_","diff_cleanupMerge","pointer","count_delete","count_insert","text_delete","text_insert","changes","norm","current_pos","next_pos","split_pos","d_left","d_right","cursor_normalize_diff","ndiffs","cursor_pointer","d_next","merge_tuples","suffix","fix_cursor","compact","starts_with_pair_end","str","charCodeAt","ends_with_pair_start","fixed_diffs","fix_emoji","y","text1a","text2a","text1b","text2b","diffsb","pointermin","pointermax","pointermid","pointerstart","pointerend","left_d","right_d","shim","supportsArgumentsClass","supported","unsupported","propertyIsEnumerable","ASCII","convertListHTML","items","lastIndent","_getListType","getListType","endTag","_items","_toArray","_items$","_getListType3","_getListType4","convertHTML","_getListType5","isRoot","_blot$domNode","outerHTML","_outerHTML$split","_outerHTML$split2","combineFormats","combined","merged","splitDelta","diffDeltas","_selectionInfo","oldSelection","newSelection","oldDeltaLength","newDeltaLength","oldCursor","newCursor","_splitDelta","_splitDelta2","oldBefore","oldAfter","_splitDelta3","_splitDelta4","newBefore","newAfter","_splitDelta5","_splitDelta6","oldPrefix","oldMiddle","_splitDelta7","_splitDelta8","newPrefix","newMiddle","_splitDelta9","_splitDelta10","oldSuffix","_splitDelta11","_splitDelta12","newSuffix","getDelta","consumeNextNewline","batchStart","normalizedDelta","normalizeDelta","_scroll$line2","_line$descendant","DeltaOp","batchEnd","leaves","formatsArr","_scroll$line4","lineOffset","_scroll$line5","_scroll$line6","textBlot","oldValue","CursorBlot","oldText","newText","relativeSelectionInfo","base64","ieee754","kMaxLength","TYPED_ARRAY_SUPPORT","createBuffer","that","RangeError","Uint8Array","__proto__","arg","encodingOrOffset","TypeError","ArrayBuffer","array","byteOffset","byteLength","fromArrayLike","fromArrayBuffer","string","encoding","isEncoding","write","fromString","len","checked","buffer","val","isnan","fromObject","assertSize","size","isView","loweredCase","utf8ToBytes","base64ToBytes","swap","bidirectionalIndexOf","dir","isNaN","arrayIndexOf","lastIndexOf","indexSize","arrLength","valLength","read","buf","readUInt16BE","foundIndex","found","hexWrite","strLen","parsed","utf8Write","blitBuffer","asciiWrite","byteArray","asciiToBytes","latin1Write","base64Write","ucs2Write","units","hi","lo","utf16leToBytes","base64Slice","fromByteArray","utf8Slice","res","secondByte","thirdByte","fourthByte","tempCodePoint","firstByte","codePoint","bytesPerSequence","codePoints","MAX_ARGUMENTS_LENGTH","decodeCodePointsArray","SlowBuffer","alloc","INSPECT_MAX_BYTES","foo","subarray","typedArraySupport","poolSize","_augment","species","allocUnsafeSlow","_isBuffer","swap16","swap32","swap64","hexSlice","asciiSlice","latin1Slice","utf16leSlice","equals","inspect","thisStart","thisEnd","thisCopy","targetCopy","isFinite","toJSON","_arr","out","toHex","bytes","checkOffset","ext","checkInt","objectWriteUInt16","littleEndian","objectWriteUInt32","checkIEEE754","writeFloat","noAssert","writeDouble","newBuf","sliceLen","readUIntLE","mul","readUIntBE","readUInt8","readUInt16LE","readUInt32LE","readUInt32BE","readIntLE","pow","readIntBE","readInt8","readInt16LE","readInt16BE","readInt32LE","readInt32BE","readFloatLE","readFloatBE","readDoubleLE","readDoubleBE","writeUIntLE","writeUIntBE","writeUInt8","writeUInt16LE","writeUInt16BE","writeUInt32LE","writeUInt32BE","writeIntLE","writeIntBE","writeInt8","writeInt16LE","writeInt16BE","writeInt32LE","writeInt32BE","writeFloatLE","writeFloatBE","writeDoubleLE","writeDoubleBE","targetStart","INVALID_BASE64_RE","leadSurrogate","toByteArray","stringtrim","base64clean","dst","g","Function","eval","b64","lens","getLens","validLen","placeHoldersLen","tmp","Arr","_byteLength","curByte","revLookup","uint8","extraBytes","len2","encodeChunk","lookup","tripletToBase64","num","output","isLE","mLen","nBytes","eLen","eMax","eBias","nBits","NaN","rt","abs","LN2","Events","addListener","fn","evt","_events","_eventsCount","clearEvent","eventNames","names","ee","listenerCount","a1","a2","a3","a4","a5","removeListener","removeAllListeners","prefixed","batch","emitMount","emitUnmount","_line","_line2","_line3","blotIndex","blotLength","lastRecorded","ignoreChange","userOnly","record","addBinding","shortKey","undo","shiftKey","redo","test","navigator","platform","dest","stack","getLastChangeIndex","cutoff","changeDelta","undoDelta","guessUndoDelta","timestamp","now","delay","maxStack","deleteLength","changeIndex","endsWithNewlineChange","SHORTKEY","binding","which","bindings","handleEnter","metaKey","ctrlKey","altKey","userAgent","handleBackspace","handleDelete","handleDeleteRange","keyBinding","singleBinding","matches","_quill$getLine","_quill$getLine2","_quill$getLeaf","_quill$getLeaf2","leafStart","offsetStart","_ref2","leafEnd","offsetEnd","prefixText","suffixText","curContext","empty","every","_quill$getLine11","_quill$getLine13","curFormats","prevFormats","nextLength","_quill$getLine15","_quill$getLine17","nextFormats","firstFormats","lastFormats","lineFormats","makeCodeBlockHandler","makeEmbedArrowHandler","_quill$getLeaf3","makeFormatHandler","makeTableArrowHandler","up","cell","targetRow","targetCell","targetLine","outdent","outdent backspace","indent code-block","outdent code-block","remove tab","tab","blockquote empty enter","list empty enter","checklist enter","_quill$getLine3","_quill$getLine4","header enter","_quill$getLine5","_quill$getLine6","table backspace","table delete","table enter","_module$getTable","getTable","_module$getTable2","tableSide","table tab","list autofill","_quill$getLine7","_quill$getLine8","code exit","_quill$getLine9","_quill$getLine10","numLines","embed left","embed left shift","embed right","embed right shift","table down","table up","caretRangeFromPoint","clientX","clientY","caretPositionFromPoint","offsetNode","dataTransfer","uploads","file","promises","reader","FileReader","onload","result","readAsDataURL","all","images","IndentClass","ListContainer","ListItem","ui","ownerDocument","listEventHandler","attachUI","katex","render","throwOnError","errorColor","_link","ATTRIBUTES","execCommand","_clipboard","TokenAttributor","CodeToken","SyntaxCodeBlock","SyntaxCodeBlockContainer","forceNext","highlight","forced","cachedText","BreakBlot","hljs","highlightBlot","initListener","initTimer","languages","timer","clearTimeout","interval","nodeText","_table","TableCell","TableRow","TableBody","TableContainer","listenBalanceCells","balanceTables","balanceCells","deleteColumn","_getTable","_getTable2","cellOffset","deleteRow","_getTable3","deleteTable","_getTable5","insertColumn","_getTable7","_getTable8","column","rowOffset","insertColumnLeft","insertColumnRight","insertRow","_getTable9","_getTable10","insertRowAbove","insertRowBelow","insertTable","rows","columns","tableId","old","thisHead","thisTail","nextHead","nextTail","childFormats","maxColumns","cells","at","_descendant","_descendant3","_descendant5","random","addControls","controls","addHandler","_quill$selection$getR3","prompt","addButton","groups","group","control","addSelect","_base","TOOLBAR_CONFIG","BubbleTooltip","lastLine","indexBounds","arrow","marginLeft","SnowTooltip","_quill$scroll$descend","LinkBlot","_quill$scroll$descend2"],"mappings":"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","file":"quill.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Quill\"] = factory();\n\telse\n\t\troot[\"Quill\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 37);\n","enum Scope {\r\n  TYPE = (1 << 2) - 1, // 0011 Lower two bits\r\n  LEVEL = ((1 << 2) - 1) << 2, // 1100 Higher two bits\r\n\r\n  ATTRIBUTE = (1 << 0) | LEVEL, // 1101\r\n  BLOT = (1 << 1) | LEVEL, // 1110\r\n  INLINE = (1 << 2) | TYPE, // 0111\r\n  BLOCK = (1 << 3) | TYPE, // 1011\r\n\r\n  BLOCK_BLOT = BLOCK & BLOT, // 1010\r\n  INLINE_BLOT = INLINE & BLOT, // 0110\r\n  BLOCK_ATTRIBUTE = BLOCK & ATTRIBUTE, // 1001\r\n  INLINE_ATTRIBUTE = INLINE & ATTRIBUTE, // 0101\r\n\r\n  ANY = TYPE | LEVEL,\r\n}\r\n\r\nexport default Scope;\r\n","import LinkedNode from './linked-node';\r\n\r\nclass LinkedList<T extends LinkedNode> {\r\n  public head: T | null;\r\n  public tail: T | null;\r\n  public length: number;\r\n\r\n  constructor() {\r\n    this.head = null;\r\n    this.tail = null;\r\n    this.length = 0;\r\n  }\r\n\r\n  public append(...nodes: T[]): void {\r\n    this.insertBefore(nodes[0], null);\r\n    if (nodes.length > 1) {\r\n      this.append.apply(this, nodes.slice(1));\r\n    }\r\n  }\r\n\r\n  public at(index: number): T | null {\r\n    const next = this.iterator();\r\n    let cur = next();\r\n    while (cur && index > 0) {\r\n      index -= 1;\r\n      cur = next();\r\n    }\r\n    return cur;\r\n  }\r\n\r\n  public contains(node: T): boolean {\r\n    const next = this.iterator();\r\n    let cur = next();\r\n    while (cur) {\r\n      if (cur === node) {\r\n        return true;\r\n      }\r\n      cur = next();\r\n    }\r\n    return false;\r\n  }\r\n\r\n  public indexOf(node: T): number {\r\n    const next = this.iterator();\r\n    let cur = next();\r\n    let index = 0;\r\n    while (cur) {\r\n      if (cur === node) {\r\n        return index;\r\n      }\r\n      index += 1;\r\n      cur = next();\r\n    }\r\n    return -1;\r\n  }\r\n\r\n  public insertBefore(node: T | null, refNode: T | null): void {\r\n    if (node == null) {\r\n      return;\r\n    }\r\n    this.remove(node);\r\n    node.next = refNode;\r\n    if (refNode != null) {\r\n      node.prev = refNode.prev;\r\n      if (refNode.prev != null) {\r\n        refNode.prev.next = node;\r\n      }\r\n      refNode.prev = node;\r\n      if (refNode === this.head) {\r\n        this.head = node;\r\n      }\r\n    } else if (this.tail != null) {\r\n      this.tail.next = node;\r\n      node.prev = this.tail;\r\n      this.tail = node;\r\n    } else {\r\n      node.prev = null;\r\n      this.head = this.tail = node;\r\n    }\r\n    this.length += 1;\r\n  }\r\n\r\n  public offset(target: T): number {\r\n    let index = 0;\r\n    let cur = this.head;\r\n    while (cur != null) {\r\n      if (cur === target) {\r\n        return index;\r\n      }\r\n      index += cur.length();\r\n      cur = cur.next as T;\r\n    }\r\n    return -1;\r\n  }\r\n\r\n  public remove(node: T): void {\r\n    if (!this.contains(node)) {\r\n      return;\r\n    }\r\n    if (node.prev != null) {\r\n      node.prev.next = node.next;\r\n    }\r\n    if (node.next != null) {\r\n      node.next.prev = node.prev;\r\n    }\r\n    if (node === this.head) {\r\n      this.head = node.next as T;\r\n    }\r\n    if (node === this.tail) {\r\n      this.tail = node.prev as T;\r\n    }\r\n    this.length -= 1;\r\n  }\r\n\r\n  public iterator(curNode: T | null = this.head): () => T | null {\r\n    // TODO use yield when we can\r\n    return (): T | null => {\r\n      const ret = curNode;\r\n      if (curNode != null) {\r\n        curNode = curNode.next as T;\r\n      }\r\n      return ret;\r\n    };\r\n  }\r\n\r\n  public find(index: number, inclusive: boolean = false): [T | null, number] {\r\n    const next = this.iterator();\r\n    let cur = next();\r\n    while (cur) {\r\n      const length = cur.length();\r\n      if (\r\n        index < length ||\r\n        (inclusive &&\r\n          index === length &&\r\n          (cur.next == null || cur.next.length() !== 0))\r\n      ) {\r\n        return [cur, index];\r\n      }\r\n      index -= length;\r\n      cur = next();\r\n    }\r\n    return [null, 0];\r\n  }\r\n\r\n  public forEach(callback: (cur: T) => void): void {\r\n    const next = this.iterator();\r\n    let cur = next();\r\n    while (cur) {\r\n      callback(cur);\r\n      cur = next();\r\n    }\r\n  }\r\n\r\n  public forEachAt(\r\n    index: number,\r\n    length: number,\r\n    callback: (cur: T, offset: number, length: number) => void,\r\n  ): void {\r\n    if (length <= 0) {\r\n      return;\r\n    }\r\n    const [startNode, offset] = this.find(index);\r\n    let curIndex = index - offset;\r\n    const next = this.iterator(startNode);\r\n    let cur = next();\r\n    while (cur && curIndex < index + length) {\r\n      const curLength = cur.length();\r\n      if (index > curIndex) {\r\n        callback(\r\n          cur,\r\n          index - curIndex,\r\n          Math.min(length, curIndex + curLength - index),\r\n        );\r\n      } else {\r\n        callback(cur, 0, Math.min(curLength, index + length - curIndex));\r\n      }\r\n      curIndex += curLength;\r\n      cur = next();\r\n    }\r\n  }\r\n\r\n  public map(callback: (cur: T) => any): any[] {\r\n    return this.reduce((memo: T[], cur: T) => {\r\n      memo.push(callback(cur));\r\n      return memo;\r\n    }, []);\r\n  }\r\n\r\n  public reduce<M>(callback: (memo: M, cur: T) => M, memo: M): M {\r\n    const next = this.iterator();\r\n    let cur = next();\r\n    while (cur) {\r\n      memo = callback(memo, cur);\r\n      cur = next();\r\n    }\r\n    return memo;\r\n  }\r\n}\r\n\r\nexport default LinkedList;\r\n","export default class ParchmentError extends Error {\r\n  public message: string;\r\n  public name: string;\r\n  public stack!: string;\r\n\r\n  constructor(message: string) {\r\n    message = '[Parchment] ' + message;\r\n    super(message);\r\n    this.message = message;\r\n    this.name = this.constructor.name;\r\n  }\r\n}\r\n","import Attributor from './attributor/attributor';\r\nimport { Blot, BlotConstructor, Root } from './blot/abstract/blot';\r\nimport ParchmentError from './error';\r\nimport Scope from './scope';\r\n\r\nexport interface RegistryInterface {\r\n  create(sroll: Root, input: Node | string | Scope, value?: any): Blot;\r\n  query(\r\n    query: string | Node | Scope,\r\n    scope: Scope,\r\n  ): Attributor | BlotConstructor | null;\r\n  register(...definitions: any[]): any;\r\n}\r\n\r\nexport default class Registry implements RegistryInterface {\r\n  public static blots = new WeakMap<Node, Blot>();\r\n\r\n  public static find(node: Node | null, bubble: boolean = false): Blot | null {\r\n    if (node == null) {\r\n      return null;\r\n    }\r\n    if (this.blots.has(node)) {\r\n      return this.blots.get(node) || null;\r\n    }\r\n    if (bubble) {\r\n      return this.find(node.parentNode, bubble);\r\n    }\r\n    return null;\r\n  }\r\n\r\n  private attributes: { [key: string]: Attributor } = {};\r\n  private classes: { [key: string]: BlotConstructor } = {};\r\n  private tags: { [key: string]: BlotConstructor } = {};\r\n  private types: { [key: string]: Attributor | BlotConstructor } = {};\r\n\r\n  public create(scroll: Root, input: Node | string | Scope, value?: any): Blot {\r\n    const match = this.query(input);\r\n    if (match == null) {\r\n      throw new ParchmentError(`Unable to create ${input} blot`);\r\n    }\r\n    const blotClass = match as BlotConstructor;\r\n    const node =\r\n      // @ts-ignore\r\n      input instanceof Node || input.nodeType === Node.TEXT_NODE\r\n        ? input\r\n        : blotClass.create(value);\r\n\r\n    const blot = new blotClass(scroll, node as Node, value);\r\n    Registry.blots.set(blot.domNode, blot);\r\n    return blot;\r\n  }\r\n\r\n  public find(node: Node | null, bubble: boolean = false): Blot | null {\r\n    return Registry.find(node, bubble);\r\n  }\r\n\r\n  public query(\r\n    query: string | Node | Scope,\r\n    scope: Scope = Scope.ANY,\r\n  ): Attributor | BlotConstructor | null {\r\n    let match;\r\n    if (typeof query === 'string') {\r\n      match = this.types[query] || this.attributes[query];\r\n      // @ts-ignore\r\n    } else if (query instanceof Text || query.nodeType === Node.TEXT_NODE) {\r\n      match = this.types.text;\r\n    } else if (typeof query === 'number') {\r\n      if (query & Scope.LEVEL & Scope.BLOCK) {\r\n        match = this.types.block;\r\n      } else if (query & Scope.LEVEL & Scope.INLINE) {\r\n        match = this.types.inline;\r\n      }\r\n    } else if (query instanceof HTMLElement) {\r\n      const names = (query.getAttribute('class') || '').split(/\\s+/);\r\n      names.some(name => {\r\n        match = this.classes[name];\r\n        if (match) {\r\n          return true;\r\n        }\r\n        return false;\r\n      });\r\n      match = match || this.tags[query.tagName];\r\n    }\r\n    if (match == null) {\r\n      return null;\r\n    }\r\n    // @ts-ignore\r\n    if (scope & Scope.LEVEL & match.scope && scope & Scope.TYPE & match.scope) {\r\n      return match;\r\n    }\r\n    return null;\r\n  }\r\n\r\n  public register(...definitions: any[]): any {\r\n    if (definitions.length > 1) {\r\n      return definitions.map(d => {\r\n        return this.register(d);\r\n      });\r\n    }\r\n    const definition = definitions[0];\r\n    if (\r\n      typeof definition.blotName !== 'string' &&\r\n      typeof definition.attrName !== 'string'\r\n    ) {\r\n      throw new ParchmentError('Invalid definition');\r\n    } else if (definition.blotName === 'abstract') {\r\n      throw new ParchmentError('Cannot register abstract class');\r\n    }\r\n    this.types[definition.blotName || definition.attrName] = definition;\r\n    if (typeof definition.keyName === 'string') {\r\n      this.attributes[definition.keyName] = definition;\r\n    } else {\r\n      if (definition.className != null) {\r\n        this.classes[definition.className] = definition;\r\n      }\r\n      if (definition.tagName != null) {\r\n        if (Array.isArray(definition.tagName)) {\r\n          definition.tagName = definition.tagName.map((tagName: string) => {\r\n            return tagName.toUpperCase();\r\n          });\r\n        } else {\r\n          definition.tagName = definition.tagName.toUpperCase();\r\n        }\r\n        const tagNames = Array.isArray(definition.tagName)\r\n          ? definition.tagName\r\n          : [definition.tagName];\r\n        tagNames.forEach((tag: string) => {\r\n          if (this.tags[tag] == null || definition.className == null) {\r\n            this.tags[tag] = definition;\r\n          }\r\n        });\r\n      }\r\n    }\r\n    return definition;\r\n  }\r\n}\r\n","import ParchmentError from '../../error';\r\nimport Registry from '../../registry';\r\nimport Scope from '../../scope';\r\nimport { Blot, BlotConstructor, Formattable, Parent, Root } from './blot';\r\n\r\nclass ShadowBlot implements Blot {\r\n  public static blotName = 'abstract';\r\n  public static className: string;\r\n  public static requiredContainer: BlotConstructor;\r\n  public static scope: Scope;\r\n  public static tagName: string;\r\n\r\n  public static create(value: any): Node {\r\n    if (this.tagName == null) {\r\n      throw new ParchmentError('Blot definition missing tagName');\r\n    }\r\n    let node;\r\n    if (Array.isArray(this.tagName)) {\r\n      if (typeof value === 'string') {\r\n        value = value.toUpperCase();\r\n        if (parseInt(value, 10).toString() === value) {\r\n          value = parseInt(value, 10);\r\n        }\r\n      }\r\n      if (typeof value === 'number') {\r\n        node = document.createElement(this.tagName[value - 1]);\r\n      } else if (this.tagName.indexOf(value) > -1) {\r\n        node = document.createElement(value);\r\n      } else {\r\n        node = document.createElement(this.tagName[0]);\r\n      }\r\n    } else {\r\n      node = document.createElement(this.tagName);\r\n    }\r\n    if (this.className) {\r\n      node.classList.add(this.className);\r\n    }\r\n    return node;\r\n  }\r\n\r\n  public prev: Blot | null;\r\n  public next: Blot | null;\r\n  // @ts-ignore\r\n  public parent: Parent;\r\n\r\n  // Hack for accessing inherited static methods\r\n  get statics(): any {\r\n    return this.constructor;\r\n  }\r\n  constructor(public scroll: Root, public domNode: Node) {\r\n    Registry.blots.set(domNode, this);\r\n    this.prev = null;\r\n    this.next = null;\r\n  }\r\n\r\n  public attach(): void {\r\n    // Nothing to do\r\n  }\r\n\r\n  public clone(): Blot {\r\n    const domNode = this.domNode.cloneNode(false);\r\n    return this.scroll.create(domNode);\r\n  }\r\n\r\n  public detach() {\r\n    if (this.parent != null) {\r\n      this.parent.removeChild(this);\r\n    }\r\n    Registry.blots.delete(this.domNode);\r\n  }\r\n\r\n  public deleteAt(index: number, length: number): void {\r\n    const blot = this.isolate(index, length);\r\n    blot.remove();\r\n  }\r\n\r\n  public formatAt(\r\n    index: number,\r\n    length: number,\r\n    name: string,\r\n    value: any,\r\n  ): void {\r\n    const blot = this.isolate(index, length);\r\n    if (this.scroll.query(name, Scope.BLOT) != null && value) {\r\n      blot.wrap(name, value);\r\n    } else if (this.scroll.query(name, Scope.ATTRIBUTE) != null) {\r\n      const parent = this.scroll.create(this.statics.scope) as Parent &\r\n        Formattable;\r\n      blot.wrap(parent);\r\n      parent.format(name, value);\r\n    }\r\n  }\r\n\r\n  public insertAt(index: number, value: string, def?: any): void {\r\n    const blot =\r\n      def == null\r\n        ? this.scroll.create('text', value)\r\n        : this.scroll.create(value, def);\r\n    const ref = this.split(index);\r\n    this.parent.insertBefore(blot, ref || undefined);\r\n  }\r\n\r\n  public isolate(index: number, length: number): Blot {\r\n    const target = this.split(index);\r\n    if (target == null) {\r\n      throw new Error('Attempt to isolate at end');\r\n    }\r\n    target.split(length);\r\n    return target;\r\n  }\r\n\r\n  public length(): number {\r\n    return 1;\r\n  }\r\n\r\n  public offset(root: Blot = this.parent): number {\r\n    if (this.parent == null || this === root) {\r\n      return 0;\r\n    }\r\n    return this.parent.children.offset(this) + this.parent.offset(root);\r\n  }\r\n\r\n  public optimize(_context: { [key: string]: any }): void {\r\n    if (\r\n      this.statics.requiredContainer &&\r\n      !(this.parent instanceof this.statics.requiredContainer)\r\n    ) {\r\n      this.wrap(this.statics.requiredContainer.blotName);\r\n    }\r\n  }\r\n\r\n  public remove(): void {\r\n    if (this.domNode.parentNode != null) {\r\n      this.domNode.parentNode.removeChild(this.domNode);\r\n    }\r\n    this.detach();\r\n  }\r\n\r\n  public replaceWith(name: string | Blot, value?: any): Blot {\r\n    const replacement =\r\n      typeof name === 'string' ? this.scroll.create(name, value) : name;\r\n    if (this.parent != null) {\r\n      this.parent.insertBefore(replacement, this.next || undefined);\r\n      this.remove();\r\n    }\r\n    return replacement;\r\n  }\r\n\r\n  public split(index: number, _force?: boolean): Blot | null {\r\n    return index === 0 ? this : this.next;\r\n  }\r\n\r\n  public update(\r\n    _mutations: MutationRecord[],\r\n    _context: { [key: string]: any },\r\n  ): void {\r\n    // Nothing to do by default\r\n  }\r\n\r\n  public wrap(name: string | Parent, value?: any): Parent {\r\n    const wrapper =\r\n      typeof name === 'string'\r\n        ? (this.scroll.create(name, value) as Parent)\r\n        : name;\r\n    if (this.parent != null) {\r\n      this.parent.insertBefore(wrapper, this.next || undefined);\r\n    }\r\n    if (typeof wrapper.appendChild !== 'function') {\r\n      throw new ParchmentError(`Cannot wrap ${name}`);\r\n    }\r\n    wrapper.appendChild(this);\r\n    return wrapper;\r\n  }\r\n}\r\n\r\nexport default ShadowBlot;\r\n","import LinkedList from '../../collection/linked-list';\r\nimport ParchmentError from '../../error';\r\nimport Scope from '../../scope';\r\nimport { Blot, BlotConstructor, Parent, Root } from './blot';\r\nimport ShadowBlot from './shadow';\r\n\r\nclass ParentBlot extends ShadowBlot implements Parent {\r\n  public static allowedChildren: BlotConstructor[] | null;\r\n  public static defaultChild: BlotConstructor | null;\r\n  public static uiClass: string = '';\r\n\r\n  public children!: LinkedList<Blot>;\r\n  public domNode!: HTMLElement;\r\n  public uiNode: HTMLElement | null = null;\r\n\r\n  constructor(scroll: Root, domNode: Node) {\r\n    super(scroll, domNode);\r\n    this.build();\r\n  }\r\n\r\n  public appendChild(other: Blot): void {\r\n    this.insertBefore(other);\r\n  }\r\n\r\n  public attach(): void {\r\n    super.attach();\r\n    this.children.forEach(child => {\r\n      child.attach();\r\n    });\r\n  }\r\n\r\n  public attachUI(node: HTMLElement) {\r\n    if (this.uiNode != null) {\r\n      this.uiNode.remove();\r\n    }\r\n    this.uiNode = node;\r\n    if (ParentBlot.uiClass) {\r\n      this.uiNode.classList.add(ParentBlot.uiClass);\r\n    }\r\n    this.uiNode.setAttribute('contenteditable', 'false');\r\n    this.domNode.insertBefore(this.uiNode, this.domNode.firstChild);\r\n  }\r\n\r\n  public build(): void {\r\n    this.children = new LinkedList<Blot>();\r\n    // Need to be reversed for if DOM nodes already in order\r\n    Array.from(this.domNode.childNodes)\r\n      .filter((node: Node) => node !== this.uiNode)\r\n      .reverse()\r\n      .forEach((node: Node) => {\r\n        try {\r\n          const child = makeAttachedBlot(node, this.scroll);\r\n          this.insertBefore(child, this.children.head || undefined);\r\n        } catch (err) {\r\n          if (err instanceof ParchmentError) {\r\n            return;\r\n          } else {\r\n            throw err;\r\n          }\r\n        }\r\n      });\r\n  }\r\n\r\n  public deleteAt(index: number, length: number): void {\r\n    if (index === 0 && length === this.length()) {\r\n      return this.remove();\r\n    }\r\n    this.children.forEachAt(index, length, (child, offset, childLength) => {\r\n      child.deleteAt(offset, childLength);\r\n    });\r\n  }\r\n\r\n  public descendant(\r\n    criteria: { new (): Blot },\r\n    index: number,\r\n  ): [Blot | null, number];\r\n  public descendant(\r\n    criteria: (blot: Blot) => boolean,\r\n    index: number,\r\n  ): [Blot | null, number];\r\n  public descendant(criteria: any, index: number = 0): [Blot | null, number] {\r\n    const [child, offset] = this.children.find(index);\r\n    if (\r\n      (criteria.blotName == null && criteria(child)) ||\r\n      (criteria.blotName != null && child instanceof criteria)\r\n    ) {\r\n      return [child as any, offset];\r\n    } else if (child instanceof ParentBlot) {\r\n      return child.descendant(criteria, offset);\r\n    } else {\r\n      return [null, -1];\r\n    }\r\n  }\r\n\r\n  public descendants(\r\n    criteria: { new (): Blot },\r\n    index: number,\r\n    length: number,\r\n  ): Blot[];\r\n  public descendants(\r\n    criteria: (blot: Blot) => boolean,\r\n    index: number,\r\n    length: number,\r\n  ): Blot[];\r\n  public descendants(\r\n    criteria: any,\r\n    index: number = 0,\r\n    length: number = Number.MAX_VALUE,\r\n  ): Blot[] {\r\n    let descendants: Blot[] = [];\r\n    let lengthLeft = length;\r\n    this.children.forEachAt(\r\n      index,\r\n      length,\r\n      (child: Blot, childIndex: number, childLength: number) => {\r\n        if (\r\n          (criteria.blotName == null && criteria(child)) ||\r\n          (criteria.blotName != null && child instanceof criteria)\r\n        ) {\r\n          descendants.push(child);\r\n        }\r\n        if (child instanceof ParentBlot) {\r\n          descendants = descendants.concat(\r\n            child.descendants(criteria, childIndex, lengthLeft),\r\n          );\r\n        }\r\n        lengthLeft -= childLength;\r\n      },\r\n    );\r\n    return descendants;\r\n  }\r\n\r\n  public detach(): void {\r\n    this.children.forEach(child => {\r\n      child.detach();\r\n    });\r\n    super.detach();\r\n  }\r\n\r\n  public enforceAllowedChildren() {\r\n    let done = false;\r\n    this.children.forEach((child: Blot) => {\r\n      if (done) {\r\n        return;\r\n      }\r\n      const allowed = this.statics.allowedChildren.some(\r\n        (def: BlotConstructor) => child instanceof def,\r\n      );\r\n      if (allowed) {\r\n        return;\r\n      }\r\n      if (child.statics.scope === Scope.BLOCK_BLOT) {\r\n        if (child.next != null) {\r\n          this.splitAfter(child);\r\n        }\r\n        if (child.prev != null) {\r\n          this.splitAfter(child.prev);\r\n        }\r\n        child.parent.unwrap();\r\n        done = true;\r\n      } else if (child instanceof ParentBlot) {\r\n        child.unwrap();\r\n      } else {\r\n        child.remove();\r\n      }\r\n    });\r\n  }\r\n\r\n  public formatAt(\r\n    index: number,\r\n    length: number,\r\n    name: string,\r\n    value: any,\r\n  ): void {\r\n    this.children.forEachAt(index, length, (child, offset, childLength) => {\r\n      child.formatAt(offset, childLength, name, value);\r\n    });\r\n  }\r\n\r\n  public insertAt(index: number, value: string, def?: any): void {\r\n    const [child, offset] = this.children.find(index);\r\n    if (child) {\r\n      child.insertAt(offset, value, def);\r\n    } else {\r\n      const blot =\r\n        def == null\r\n          ? this.scroll.create('text', value)\r\n          : this.scroll.create(value, def);\r\n      this.appendChild(blot);\r\n    }\r\n  }\r\n\r\n  public insertBefore(childBlot: Blot, refBlot?: Blot | null): void {\r\n    if (childBlot.parent != null) {\r\n      childBlot.parent.children.remove(childBlot);\r\n    }\r\n    let refDomNode: Node | null = null;\r\n    this.children.insertBefore(childBlot, refBlot || null);\r\n    if (refBlot != null) {\r\n      refDomNode = refBlot.domNode;\r\n    }\r\n    if (\r\n      this.domNode.parentNode !== childBlot.domNode ||\r\n      this.domNode.nextSibling !== refDomNode\r\n    ) {\r\n      this.domNode.insertBefore(childBlot.domNode, refDomNode);\r\n    }\r\n    childBlot.parent = this;\r\n    childBlot.attach();\r\n  }\r\n\r\n  public length(): number {\r\n    return this.children.reduce((memo, child) => {\r\n      return memo + child.length();\r\n    }, 0);\r\n  }\r\n\r\n  public moveChildren(targetParent: Parent, refNode?: Blot): void {\r\n    this.children.forEach(child => {\r\n      targetParent.insertBefore(child, refNode);\r\n    });\r\n  }\r\n\r\n  public optimize(context: { [key: string]: any }) {\r\n    super.optimize(context);\r\n    this.enforceAllowedChildren();\r\n    if (this.uiNode != null && this.uiNode !== this.domNode.firstChild) {\r\n      this.domNode.insertBefore(this.uiNode, this.domNode.firstChild);\r\n    }\r\n    if (this.children.length === 0) {\r\n      if (this.statics.defaultChild != null) {\r\n        const child = this.scroll.create(this.statics.defaultChild.blotName);\r\n        this.appendChild(child);\r\n        // TODO double check if necessary\r\n        // child.optimize(context);\r\n      } else {\r\n        this.remove();\r\n      }\r\n    }\r\n  }\r\n\r\n  public path(\r\n    index: number,\r\n    inclusive: boolean = false,\r\n  ): Array<[Blot, number]> {\r\n    const [child, offset] = this.children.find(index, inclusive);\r\n    const position: Array<[Blot, number]> = [[this, index]];\r\n    if (child instanceof ParentBlot) {\r\n      return position.concat(child.path(offset, inclusive));\r\n    } else if (child != null) {\r\n      position.push([child, offset]);\r\n    }\r\n    return position;\r\n  }\r\n\r\n  public removeChild(child: Blot): void {\r\n    this.children.remove(child);\r\n  }\r\n\r\n  public replaceWith(name: string | Blot, value?: any): Blot {\r\n    const replacement =\r\n      typeof name === 'string' ? this.scroll.create(name, value) : name;\r\n    if (replacement instanceof ParentBlot) {\r\n      this.moveChildren(replacement);\r\n    }\r\n    return super.replaceWith(replacement);\r\n  }\r\n\r\n  public split(index: number, force: boolean = false): Blot | null {\r\n    if (!force) {\r\n      if (index === 0) {\r\n        return this;\r\n      }\r\n      if (index === this.length()) {\r\n        return this.next;\r\n      }\r\n    }\r\n    const after = this.clone() as ParentBlot;\r\n    if (this.parent) {\r\n      this.parent.insertBefore(after, this.next || undefined);\r\n    }\r\n    this.children.forEachAt(index, this.length(), (child, offset, _length) => {\r\n      const split = child.split(offset, force);\r\n      if (split != null) {\r\n        after.appendChild(split);\r\n      }\r\n    });\r\n    return after;\r\n  }\r\n\r\n  public splitAfter(child: Blot): Parent {\r\n    const after = this.clone() as ParentBlot;\r\n    while (child.next != null) {\r\n      after.appendChild(child.next);\r\n    }\r\n    if (this.parent) {\r\n      this.parent.insertBefore(after, this.next || undefined);\r\n    }\r\n    return after;\r\n  }\r\n\r\n  public unwrap(): void {\r\n    if (this.parent) {\r\n      this.moveChildren(this.parent, this.next || undefined);\r\n    }\r\n    this.remove();\r\n  }\r\n\r\n  public update(\r\n    mutations: MutationRecord[],\r\n    _context: { [key: string]: any },\r\n  ): void {\r\n    const addedNodes: Node[] = [];\r\n    const removedNodes: Node[] = [];\r\n    mutations.forEach(mutation => {\r\n      if (mutation.target === this.domNode && mutation.type === 'childList') {\r\n        addedNodes.push.apply(addedNodes, mutation.addedNodes);\r\n        removedNodes.push.apply(removedNodes, mutation.removedNodes);\r\n      }\r\n    });\r\n    removedNodes.forEach((node: Node) => {\r\n      // Check node has actually been removed\r\n      // One exception is Chrome does not immediately remove IFRAMEs\r\n      // from DOM but MutationRecord is correct in its reported removal\r\n      if (\r\n        node.parentNode != null &&\r\n        // @ts-ignore\r\n        node.tagName !== 'IFRAME' &&\r\n        document.body.compareDocumentPosition(node) &\r\n          Node.DOCUMENT_POSITION_CONTAINED_BY\r\n      ) {\r\n        return;\r\n      }\r\n      const blot = this.scroll.find(node);\r\n      if (blot == null) {\r\n        return;\r\n      }\r\n      if (\r\n        blot.domNode.parentNode == null ||\r\n        blot.domNode.parentNode === this.domNode\r\n      ) {\r\n        blot.detach();\r\n      }\r\n    });\r\n    addedNodes\r\n      .filter(node => {\r\n        return node.parentNode === this.domNode || node === this.uiNode;\r\n      })\r\n      .sort((a, b) => {\r\n        if (a === b) {\r\n          return 0;\r\n        }\r\n        if (a.compareDocumentPosition(b) & Node.DOCUMENT_POSITION_FOLLOWING) {\r\n          return 1;\r\n        }\r\n        return -1;\r\n      })\r\n      .forEach(node => {\r\n        let refBlot: Blot | null = null;\r\n        if (node.nextSibling != null) {\r\n          refBlot = this.scroll.find(node.nextSibling);\r\n        }\r\n        const blot = makeAttachedBlot(node, this.scroll);\r\n        if (blot.next !== refBlot || blot.next == null) {\r\n          if (blot.parent != null) {\r\n            blot.parent.removeChild(this);\r\n          }\r\n          this.insertBefore(blot, refBlot || undefined);\r\n        }\r\n      });\r\n    this.enforceAllowedChildren();\r\n  }\r\n}\r\n\r\nfunction makeAttachedBlot(node: Node, scroll: Root): Blot {\r\n  let blot = scroll.find(node);\r\n  if (blot == null) {\r\n    try {\r\n      blot = scroll.create(node);\r\n    } catch (e) {\r\n      blot = scroll.create(Scope.INLINE) as Blot;\r\n      Array.from(node.childNodes).forEach((child: Node) => {\r\n        // @ts-ignore\r\n        blot.domNode.appendChild(child);\r\n      });\r\n      if (node.parentNode) {\r\n        node.parentNode.replaceChild(blot.domNode, node);\r\n      }\r\n      blot.attach();\r\n    }\r\n  }\r\n  return blot as Blot;\r\n}\r\n\r\nexport default ParentBlot;\r\n","import Scope from '../../scope';\r\nimport BlockBlot from '../block';\r\nimport ParentBlot from './parent';\r\n\r\nclass ContainerBlot extends ParentBlot {\r\n  public static blotName = 'container';\r\n  public static scope = Scope.BLOCK_BLOT;\r\n  public static tagName: string;\r\n\r\n  public prev!: BlockBlot | ContainerBlot | null;\r\n  public next!: BlockBlot | ContainerBlot | null;\r\n\r\n  public checkMerge(): boolean {\r\n    return (\r\n      this.next !== null && this.next.statics.blotName === this.statics.blotName\r\n    );\r\n  }\r\n\r\n  public deleteAt(index: number, length: number): void {\r\n    super.deleteAt(index, length);\r\n    this.enforceAllowedChildren();\r\n  }\r\n\r\n  public formatAt(\r\n    index: number,\r\n    length: number,\r\n    name: string,\r\n    value: any,\r\n  ): void {\r\n    super.formatAt(index, length, name, value);\r\n    this.enforceAllowedChildren();\r\n  }\r\n\r\n  public insertAt(index: number, value: string, def?: any): void {\r\n    super.insertAt(index, value, def);\r\n    this.enforceAllowedChildren();\r\n  }\r\n\r\n  public optimize(context: { [key: string]: any }): void {\r\n    super.optimize(context);\r\n    if (this.children.length > 0 && this.next != null && this.checkMerge()) {\r\n      this.next.moveChildren(this);\r\n      this.next.remove();\r\n    }\r\n  }\r\n}\r\n\r\nexport default ContainerBlot;\r\n","import Scope from '../../scope';\r\nimport { Leaf } from './blot';\r\nimport ShadowBlot from './shadow';\r\n\r\nclass LeafBlot extends ShadowBlot implements Leaf {\r\n  public static scope = Scope.INLINE_BLOT;\r\n\r\n  public static value(_domNode: Node): any {\r\n    return true;\r\n  }\r\n\r\n  public index(node: Node, offset: number): number {\r\n    if (\r\n      this.domNode === node ||\r\n      this.domNode.compareDocumentPosition(node) &\r\n        Node.DOCUMENT_POSITION_CONTAINED_BY\r\n    ) {\r\n      return Math.min(offset, 1);\r\n    }\r\n    return -1;\r\n  }\r\n\r\n  public position(index: number, _inclusive?: boolean): [Node, number] {\r\n    const childNodes: Node[] = Array.from(this.parent.domNode.childNodes);\r\n    let offset = childNodes.indexOf(this.domNode);\r\n    if (index > 0) {\r\n      offset += 1;\r\n    }\r\n    return [this.parent.domNode, offset];\r\n  }\r\n\r\n  public value(): any {\r\n    return {\r\n      [this.statics.blotName]: this.statics.value(this.domNode) || true,\r\n    };\r\n  }\r\n}\r\n\r\nexport default LeafBlot;\r\n","import Scope from '../scope';\r\n\r\nexport interface IAttributorOptions {\r\n  scope?: Scope;\r\n  whitelist?: string[];\r\n}\r\n\r\nexport default class Attributor {\r\n  public static keys(node: HTMLElement): string[] {\r\n    return Array.from(node.attributes).map((item: Attr) => item.name);\r\n  }\r\n\r\n  public attrName: string;\r\n  public keyName: string;\r\n  public scope: Scope;\r\n  public whitelist: string[] | undefined;\r\n\r\n  constructor(\r\n    attrName: string,\r\n    keyName: string,\r\n    options: IAttributorOptions = {},\r\n  ) {\r\n    this.attrName = attrName;\r\n    this.keyName = keyName;\r\n    const attributeBit = Scope.TYPE & Scope.ATTRIBUTE;\r\n    this.scope =\r\n      options.scope != null\r\n        ? // Ignore type bits, force attribute bit\r\n          (options.scope & Scope.LEVEL) | attributeBit\r\n        : Scope.ATTRIBUTE;\r\n    if (options.whitelist != null) {\r\n      this.whitelist = options.whitelist;\r\n    }\r\n  }\r\n\r\n  public add(node: HTMLElement, value: string): boolean {\r\n    if (!this.canAdd(node, value)) {\r\n      return false;\r\n    }\r\n    node.setAttribute(this.keyName, value);\r\n    return true;\r\n  }\r\n\r\n  public canAdd(_node: HTMLElement, value: any): boolean {\r\n    if (this.whitelist == null) {\r\n      return true;\r\n    }\r\n    if (typeof value === 'string') {\r\n      return this.whitelist.indexOf(value.replace(/[\"']/g, '')) > -1;\r\n    } else {\r\n      return this.whitelist.indexOf(value) > -1;\r\n    }\r\n  }\r\n\r\n  public remove(node: HTMLElement): void {\r\n    node.removeAttribute(this.keyName);\r\n  }\r\n\r\n  public value(node: HTMLElement): string {\r\n    const value = node.getAttribute(this.keyName);\r\n    if (this.canAdd(node, value) && value) {\r\n      return value;\r\n    }\r\n    return '';\r\n  }\r\n}\r\n","import Attributor from './attributor';\r\n\r\nfunction match(node: HTMLElement, prefix: string): string[] {\r\n  const className = node.getAttribute('class') || '';\r\n  return className\r\n    .split(/\\s+/)\r\n    .filter(name => name.indexOf(`${prefix}-`) === 0);\r\n}\r\n\r\nclass ClassAttributor extends Attributor {\r\n  public static keys(node: HTMLElement): string[] {\r\n    return (node.getAttribute('class') || '').split(/\\s+/).map(name =>\r\n      name\r\n        .split('-')\r\n        .slice(0, -1)\r\n        .join('-'),\r\n    );\r\n  }\r\n\r\n  public add(node: HTMLElement, value: string): boolean {\r\n    if (!this.canAdd(node, value)) {\r\n      return false;\r\n    }\r\n    this.remove(node);\r\n    node.classList.add(`${this.keyName}-${value}`);\r\n    return true;\r\n  }\r\n\r\n  public remove(node: HTMLElement): void {\r\n    const matches = match(node, this.keyName);\r\n    matches.forEach(name => {\r\n      node.classList.remove(name);\r\n    });\r\n    if (node.classList.length === 0) {\r\n      node.removeAttribute('class');\r\n    }\r\n  }\r\n\r\n  public value(node: HTMLElement): string {\r\n    const result = match(node, this.keyName)[0] || '';\r\n    const value = result.slice(this.keyName.length + 1); // +1 for hyphen\r\n    return this.canAdd(node, value) ? value : '';\r\n  }\r\n}\r\n\r\nexport default ClassAttributor;\r\n","import Attributor from './attributor';\r\n\r\nfunction camelize(name: string): string {\r\n  const parts = name.split('-');\r\n  const rest = parts\r\n    .slice(1)\r\n    .map((part: string) => part[0].toUpperCase() + part.slice(1))\r\n    .join('');\r\n  return parts[0] + rest;\r\n}\r\n\r\nclass StyleAttributor extends Attributor {\r\n  public static keys(node: Element): string[] {\r\n    return (node.getAttribute('style') || '').split(';').map(value => {\r\n      const arr = value.split(':');\r\n      return arr[0].trim();\r\n    });\r\n  }\r\n\r\n  public add(node: HTMLElement, value: string): boolean {\r\n    if (!this.canAdd(node, value)) {\r\n      return false;\r\n    }\r\n    // @ts-ignore\r\n    node.style[camelize(this.keyName)] = value;\r\n    return true;\r\n  }\r\n\r\n  public remove(node: HTMLElement): void {\r\n    // @ts-ignore\r\n    node.style[camelize(this.keyName)] = '';\r\n    if (!node.getAttribute('style')) {\r\n      node.removeAttribute('style');\r\n    }\r\n  }\r\n\r\n  public value(node: HTMLElement): string {\r\n    // @ts-ignore\r\n    const value = node.style[camelize(this.keyName)];\r\n    return this.canAdd(node, value) ? value : '';\r\n  }\r\n}\r\n\r\nexport default StyleAttributor;\r\n","import { Formattable } from '../blot/abstract/blot';\r\nimport Registry from '../registry';\r\nimport Scope from '../scope';\r\nimport Attributor from './attributor';\r\nimport ClassAttributor from './class';\r\nimport StyleAttributor from './style';\r\n\r\nclass AttributorStore {\r\n  private attributes: { [key: string]: Attributor } = {};\r\n  private domNode: HTMLElement;\r\n\r\n  constructor(domNode: HTMLElement) {\r\n    this.domNode = domNode;\r\n    this.build();\r\n  }\r\n\r\n  public attribute(attribute: Attributor, value: any): void {\r\n    // verb\r\n    if (value) {\r\n      if (attribute.add(this.domNode, value)) {\r\n        if (attribute.value(this.domNode) != null) {\r\n          this.attributes[attribute.attrName] = attribute;\r\n        } else {\r\n          delete this.attributes[attribute.attrName];\r\n        }\r\n      }\r\n    } else {\r\n      attribute.remove(this.domNode);\r\n      delete this.attributes[attribute.attrName];\r\n    }\r\n  }\r\n\r\n  public build(): void {\r\n    this.attributes = {};\r\n    const blot = Registry.find(this.domNode);\r\n    if (blot == null) {\r\n      return;\r\n    }\r\n    const attributes = Attributor.keys(this.domNode);\r\n    const classes = ClassAttributor.keys(this.domNode);\r\n    const styles = StyleAttributor.keys(this.domNode);\r\n    attributes\r\n      .concat(classes)\r\n      .concat(styles)\r\n      .forEach(name => {\r\n        const attr = blot.scroll.query(name, Scope.ATTRIBUTE);\r\n        if (attr instanceof Attributor) {\r\n          this.attributes[attr.attrName] = attr;\r\n        }\r\n      });\r\n  }\r\n\r\n  public copy(target: Formattable): void {\r\n    Object.keys(this.attributes).forEach(key => {\r\n      const value = this.attributes[key].value(this.domNode);\r\n      target.format(key, value);\r\n    });\r\n  }\r\n\r\n  public move(target: Formattable): void {\r\n    this.copy(target);\r\n    Object.keys(this.attributes).forEach(key => {\r\n      this.attributes[key].remove(this.domNode);\r\n    });\r\n    this.attributes = {};\r\n  }\r\n\r\n  public values(): { [key: string]: any } {\r\n    return Object.keys(this.attributes).reduce(\r\n      (attributes: { [key: string]: any }, name: string) => {\r\n        attributes[name] = this.attributes[name].value(this.domNode);\r\n        return attributes;\r\n      },\r\n      {},\r\n    );\r\n  }\r\n}\r\n\r\nexport default AttributorStore;\r\n","import Attributor from '../attributor/attributor';\r\nimport AttributorStore from '../attributor/store';\r\nimport Scope from '../scope';\r\nimport {\r\n  Blot,\r\n  BlotConstructor,\r\n  Formattable,\r\n  Parent,\r\n  Root,\r\n} from './abstract/blot';\r\nimport LeafBlot from './abstract/leaf';\r\nimport ParentBlot from './abstract/parent';\r\n\r\n// Shallow object comparison\r\nfunction isEqual(obj1: object, obj2: object): boolean {\r\n  if (Object.keys(obj1).length !== Object.keys(obj2).length) {\r\n    return false;\r\n  }\r\n  // @ts-ignore\r\n  for (const prop in obj1) {\r\n    // @ts-ignore\r\n    if (obj1[prop] !== obj2[prop]) {\r\n      return false;\r\n    }\r\n  }\r\n  return true;\r\n}\r\n\r\nclass InlineBlot extends ParentBlot implements Formattable {\r\n  public static allowedChildren: BlotConstructor[] = [InlineBlot, LeafBlot];\r\n  public static blotName = 'inline';\r\n  public static scope = Scope.INLINE_BLOT;\r\n  public static tagName = 'SPAN';\r\n\r\n  public static formats(domNode: HTMLElement, scroll: Root): any {\r\n    const match = scroll.query(InlineBlot.blotName);\r\n    if (\r\n      match != null &&\r\n      domNode.tagName === (match as BlotConstructor).tagName\r\n    ) {\r\n      return undefined;\r\n    } else if (typeof this.tagName === 'string') {\r\n      return true;\r\n    } else if (Array.isArray(this.tagName)) {\r\n      return domNode.tagName.toLowerCase();\r\n    }\r\n    return undefined;\r\n  }\r\n\r\n  protected attributes: AttributorStore;\r\n\r\n  constructor(scroll: Root, domNode: Node) {\r\n    super(scroll, domNode);\r\n    this.attributes = new AttributorStore(this.domNode);\r\n  }\r\n\r\n  public format(name: string, value: any) {\r\n    if (name === this.statics.blotName && !value) {\r\n      this.children.forEach(child => {\r\n        if (!(child instanceof InlineBlot)) {\r\n          child = child.wrap(InlineBlot.blotName, true);\r\n        }\r\n        this.attributes.copy(child as InlineBlot);\r\n      });\r\n      this.unwrap();\r\n    } else {\r\n      const format = this.scroll.query(name, Scope.INLINE);\r\n      if (format == null) {\r\n        return;\r\n      }\r\n      if (format instanceof Attributor) {\r\n        this.attributes.attribute(format, value);\r\n      } else if (\r\n        value &&\r\n        (name !== this.statics.blotName || this.formats()[name] !== value)\r\n      ) {\r\n        this.replaceWith(name, value);\r\n      }\r\n    }\r\n  }\r\n\r\n  public formats(): { [index: string]: any } {\r\n    const formats = this.attributes.values();\r\n    const format = this.statics.formats(this.domNode, this.scroll);\r\n    if (format != null) {\r\n      formats[this.statics.blotName] = format;\r\n    }\r\n    return formats;\r\n  }\r\n\r\n  public formatAt(\r\n    index: number,\r\n    length: number,\r\n    name: string,\r\n    value: any,\r\n  ): void {\r\n    if (\r\n      this.formats()[name] != null ||\r\n      this.scroll.query(name, Scope.ATTRIBUTE)\r\n    ) {\r\n      const blot = this.isolate(index, length) as InlineBlot;\r\n      blot.format(name, value);\r\n    } else {\r\n      super.formatAt(index, length, name, value);\r\n    }\r\n  }\r\n\r\n  public optimize(context: { [key: string]: any }): void {\r\n    super.optimize(context);\r\n    const formats = this.formats();\r\n    if (Object.keys(formats).length === 0) {\r\n      return this.unwrap(); // unformatted span\r\n    }\r\n    const next = this.next;\r\n    if (\r\n      next instanceof InlineBlot &&\r\n      next.prev === this &&\r\n      isEqual(formats, next.formats())\r\n    ) {\r\n      next.moveChildren(this);\r\n      next.remove();\r\n    }\r\n  }\r\n\r\n  public replaceWith(name: string | Blot, value?: any): Blot {\r\n    const replacement = super.replaceWith(name, value) as InlineBlot;\r\n    this.attributes.copy(replacement);\r\n    return replacement;\r\n  }\r\n\r\n  public update(\r\n    mutations: MutationRecord[],\r\n    context: { [key: string]: any },\r\n  ): void {\r\n    super.update(mutations, context);\r\n    const attributeChanged = mutations.some(\r\n      mutation =>\r\n        mutation.target === this.domNode && mutation.type === 'attributes',\r\n    );\r\n    if (attributeChanged) {\r\n      this.attributes.build();\r\n    }\r\n  }\r\n\r\n  public wrap(name: string | Parent, value?: any): Parent {\r\n    const wrapper = super.wrap(name, value);\r\n    if (wrapper instanceof InlineBlot) {\r\n      this.attributes.move(wrapper);\r\n    }\r\n    return wrapper;\r\n  }\r\n}\r\n\r\nexport default InlineBlot;\r\n","import Attributor from '../attributor/attributor';\r\nimport AttributorStore from '../attributor/store';\r\nimport Scope from '../scope';\r\nimport { Blot, BlotConstructor, Formattable, Root } from './abstract/blot';\r\nimport LeafBlot from './abstract/leaf';\r\nimport ParentBlot from './abstract/parent';\r\nimport InlineBlot from './inline';\r\n\r\nclass BlockBlot extends ParentBlot implements Formattable {\r\n  public static blotName = 'block';\r\n  public static scope = Scope.BLOCK_BLOT;\r\n  public static tagName = 'P';\r\n  public static allowedChildren: BlotConstructor[] = [\r\n    InlineBlot,\r\n    BlockBlot,\r\n    LeafBlot,\r\n  ];\r\n\r\n  public static formats(domNode: HTMLElement, scroll: Root): any {\r\n    const match = scroll.query(BlockBlot.blotName);\r\n    if (\r\n      match != null &&\r\n      domNode.tagName === (match as BlotConstructor).tagName\r\n    ) {\r\n      return undefined;\r\n    } else if (typeof this.tagName === 'string') {\r\n      return true;\r\n    } else if (Array.isArray(this.tagName)) {\r\n      return domNode.tagName.toLowerCase();\r\n    }\r\n  }\r\n\r\n  protected attributes: AttributorStore;\r\n\r\n  constructor(scroll: Root, domNode: Node) {\r\n    super(scroll, domNode);\r\n    this.attributes = new AttributorStore(this.domNode);\r\n  }\r\n\r\n  public format(name: string, value: any) {\r\n    const format = this.scroll.query(name, Scope.BLOCK);\r\n    if (format == null) {\r\n      return;\r\n    } else if (format instanceof Attributor) {\r\n      this.attributes.attribute(format, value);\r\n    } else if (name === this.statics.blotName && !value) {\r\n      this.replaceWith(BlockBlot.blotName);\r\n    } else if (\r\n      value &&\r\n      (name !== this.statics.blotName || this.formats()[name] !== value)\r\n    ) {\r\n      this.replaceWith(name, value);\r\n    }\r\n  }\r\n\r\n  public formats(): { [index: string]: any } {\r\n    const formats = this.attributes.values();\r\n    const format = this.statics.formats(this.domNode, this.scroll);\r\n    if (format != null) {\r\n      formats[this.statics.blotName] = format;\r\n    }\r\n    return formats;\r\n  }\r\n\r\n  public formatAt(\r\n    index: number,\r\n    length: number,\r\n    name: string,\r\n    value: any,\r\n  ): void {\r\n    if (this.scroll.query(name, Scope.BLOCK) != null) {\r\n      this.format(name, value);\r\n    } else {\r\n      super.formatAt(index, length, name, value);\r\n    }\r\n  }\r\n\r\n  public insertAt(index: number, value: string, def?: any): void {\r\n    if (def == null || this.scroll.query(value, Scope.INLINE) != null) {\r\n      // Insert text or inline\r\n      super.insertAt(index, value, def);\r\n    } else {\r\n      const after = this.split(index);\r\n      if (after != null) {\r\n        const blot = this.scroll.create(value, def);\r\n        after.parent.insertBefore(blot, after);\r\n      } else {\r\n        throw new Error('Attempt to insertAt after block boundaries');\r\n      }\r\n    }\r\n  }\r\n\r\n  public replaceWith(name: string | Blot, value?: any): Blot {\r\n    const replacement = super.replaceWith(name, value) as BlockBlot;\r\n    this.attributes.copy(replacement);\r\n    return replacement;\r\n  }\r\n\r\n  public update(\r\n    mutations: MutationRecord[],\r\n    context: { [key: string]: any },\r\n  ): void {\r\n    super.update(mutations, context);\r\n    const attributeChanged = mutations.some(\r\n      mutation =>\r\n        mutation.target === this.domNode && mutation.type === 'attributes',\r\n    );\r\n    if (attributeChanged) {\r\n      this.attributes.build();\r\n    }\r\n  }\r\n}\r\n\r\nexport default BlockBlot;\r\n","import { Formattable, Root } from './abstract/blot';\r\nimport LeafBlot from './abstract/leaf';\r\n\r\nclass EmbedBlot extends LeafBlot implements Formattable {\r\n  public static formats(_domNode: HTMLElement, _scroll: Root): any {\r\n    return undefined;\r\n  }\r\n\r\n  public format(name: string, value: any): void {\r\n    // super.formatAt wraps, which is what we want in general,\r\n    // but this allows subclasses to overwrite for formats\r\n    // that just apply to particular embeds\r\n    super.formatAt(0, this.length(), name, value);\r\n  }\r\n\r\n  public formatAt(\r\n    index: number,\r\n    length: number,\r\n    name: string,\r\n    value: any,\r\n  ): void {\r\n    if (index === 0 && length === this.length()) {\r\n      this.format(name, value);\r\n    } else {\r\n      super.formatAt(index, length, name, value);\r\n    }\r\n  }\r\n\r\n  public formats(): { [index: string]: any } {\r\n    return this.statics.formats(this.domNode, this.scroll);\r\n  }\r\n}\r\n\r\nexport default EmbedBlot;\r\n","import Attributor from '../attributor/attributor';\r\nimport Registry from '../registry';\r\nimport Scope from '../scope';\r\nimport { Blot, BlotConstructor, Root } from './abstract/blot';\r\nimport ContainerBlot from './abstract/container';\r\nimport ParentBlot from './abstract/parent';\r\nimport BlockBlot from './block';\r\n\r\nconst OBSERVER_CONFIG = {\r\n  attributes: true,\r\n  characterData: true,\r\n  characterDataOldValue: true,\r\n  childList: true,\r\n  subtree: true,\r\n};\r\n\r\nconst MAX_OPTIMIZE_ITERATIONS = 100;\r\n\r\nclass ScrollBlot extends ParentBlot implements Root {\r\n  public static blotName = 'scroll';\r\n  public static defaultChild = BlockBlot;\r\n  public static allowedChildren: BlotConstructor[] = [BlockBlot, ContainerBlot];\r\n  public static scope = Scope.BLOCK_BLOT;\r\n  public static tagName = 'DIV';\r\n\r\n  public registry: Registry;\r\n  public observer: MutationObserver;\r\n\r\n  constructor(registry: Registry, node: HTMLDivElement) {\r\n    // @ts-ignore\r\n    super(null, node);\r\n    this.registry = registry;\r\n    this.scroll = this;\r\n    this.build();\r\n    this.observer = new MutationObserver((mutations: MutationRecord[]) => {\r\n      this.update(mutations);\r\n    });\r\n    this.observer.observe(this.domNode, OBSERVER_CONFIG);\r\n    this.attach();\r\n  }\r\n\r\n  public create(input: Node | string | Scope, value?: any): Blot {\r\n    return this.registry.create(this, input, value);\r\n  }\r\n\r\n  public find(node: Node | null, bubble: boolean = false): Blot | null {\r\n    return this.registry.find(node, bubble);\r\n  }\r\n\r\n  public query(\r\n    query: string | Node | Scope,\r\n    scope: Scope = Scope.ANY,\r\n  ): Attributor | BlotConstructor | null {\r\n    return this.registry.query(query, scope);\r\n  }\r\n\r\n  public register(...definitions: any[]): any {\r\n    return this.registry.register(...definitions);\r\n  }\r\n\r\n  public build() {\r\n    if (this.scroll == null) {\r\n      return;\r\n    }\r\n    super.build();\r\n  }\r\n\r\n  public detach() {\r\n    super.detach();\r\n    this.observer.disconnect();\r\n  }\r\n\r\n  public deleteAt(index: number, length: number): void {\r\n    this.update();\r\n    if (index === 0 && length === this.length()) {\r\n      this.children.forEach(child => {\r\n        child.remove();\r\n      });\r\n    } else {\r\n      super.deleteAt(index, length);\r\n    }\r\n  }\r\n\r\n  public formatAt(\r\n    index: number,\r\n    length: number,\r\n    name: string,\r\n    value: any,\r\n  ): void {\r\n    this.update();\r\n    super.formatAt(index, length, name, value);\r\n  }\r\n\r\n  public insertAt(index: number, value: string, def?: any): void {\r\n    this.update();\r\n    super.insertAt(index, value, def);\r\n  }\r\n\r\n  public optimize(context: { [key: string]: any }): void;\r\n  public optimize(\r\n    mutations: MutationRecord[],\r\n    context: { [key: string]: any },\r\n  ): void;\r\n  public optimize(mutations: any = [], context: any = {}): void {\r\n    super.optimize(context);\r\n    const mutationsMap = context.mutationsMap || new WeakMap();\r\n    // We must modify mutations directly, cannot make copy and then modify\r\n    let records = Array.from(this.observer.takeRecords());\r\n    // Array.push currently seems to be implemented by a non-tail recursive function\r\n    // so we cannot just mutations.push.apply(mutations, this.observer.takeRecords());\r\n    while (records.length > 0) {\r\n      mutations.push(records.pop());\r\n    }\r\n    const mark = (blot: Blot | null, markParent: boolean = true) => {\r\n      if (blot == null || blot === this) {\r\n        return;\r\n      }\r\n      if (blot.domNode.parentNode == null) {\r\n        return;\r\n      }\r\n      if (!mutationsMap.has(blot.domNode)) {\r\n        mutationsMap.set(blot.domNode, []);\r\n      }\r\n      if (markParent) {\r\n        mark(blot.parent);\r\n      }\r\n    };\r\n    const optimize = (blot: Blot) => {\r\n      // Post-order traversal\r\n      if (!mutationsMap.has(blot.domNode)) {\r\n        return;\r\n      }\r\n      if (blot instanceof ParentBlot) {\r\n        blot.children.forEach(optimize);\r\n      }\r\n      mutationsMap.delete(blot.domNode);\r\n      blot.optimize(context);\r\n    };\r\n    let remaining = mutations;\r\n    for (let i = 0; remaining.length > 0; i += 1) {\r\n      if (i >= MAX_OPTIMIZE_ITERATIONS) {\r\n        throw new Error('[Parchment] Maximum optimize iterations reached');\r\n      }\r\n      remaining.forEach((mutation: MutationRecord) => {\r\n        const blot = this.find(mutation.target, true);\r\n        if (blot == null) {\r\n          return;\r\n        }\r\n        if (blot.domNode === mutation.target) {\r\n          if (mutation.type === 'childList') {\r\n            mark(this.find(mutation.previousSibling, false));\r\n            Array.from(mutation.addedNodes).forEach((node: Node) => {\r\n              const child = this.find(node, false);\r\n              mark(child, false);\r\n              if (child instanceof ParentBlot) {\r\n                child.children.forEach((grandChild: Blot) => {\r\n                  mark(grandChild, false);\r\n                });\r\n              }\r\n            });\r\n          } else if (mutation.type === 'attributes') {\r\n            mark(blot.prev);\r\n          }\r\n        }\r\n        mark(blot);\r\n      });\r\n      this.children.forEach(optimize);\r\n      remaining = Array.from(this.observer.takeRecords());\r\n      records = remaining.slice();\r\n      while (records.length > 0) {\r\n        mutations.push(records.pop());\r\n      }\r\n    }\r\n  }\r\n\r\n  public update(\r\n    mutations?: MutationRecord[],\r\n    context: { [key: string]: any } = {},\r\n  ): void {\r\n    mutations = mutations || this.observer.takeRecords();\r\n    const mutationsMap = new WeakMap();\r\n    mutations\r\n      .map((mutation: MutationRecord) => {\r\n        const blot = Registry.find(mutation.target, true);\r\n        if (blot == null) {\r\n          return null;\r\n        }\r\n        if (mutationsMap.has(blot.domNode)) {\r\n          mutationsMap.get(blot.domNode).push(mutation);\r\n          return null;\r\n        } else {\r\n          mutationsMap.set(blot.domNode, [mutation]);\r\n          return blot;\r\n        }\r\n      })\r\n      .forEach((blot: Blot | null) => {\r\n        if (blot != null && blot !== this && mutationsMap.has(blot.domNode)) {\r\n          blot.update(mutationsMap.get(blot.domNode) || [], context);\r\n        }\r\n      });\r\n    context.mutationsMap = mutationsMap;\r\n    if (mutationsMap.has(this.domNode)) {\r\n      super.update(mutationsMap.get(this.domNode), context);\r\n    }\r\n    this.optimize(mutations, context);\r\n  }\r\n}\r\n\r\nexport default ScrollBlot;\r\n","import Scope from '../scope';\r\nimport { Blot, Leaf, Root } from './abstract/blot';\r\nimport LeafBlot from './abstract/leaf';\r\n\r\nclass TextBlot extends LeafBlot implements Leaf {\r\n  public static blotName = 'text';\r\n  public static scope = Scope.INLINE_BLOT;\r\n\r\n  public static create(value: string): Text {\r\n    return document.createTextNode(value);\r\n  }\r\n\r\n  public static value(domNode: Text): string {\r\n    let text = domNode.data;\r\n    // @ts-ignore\r\n    if (text.normalize) {\r\n      text = text.normalize();\r\n    }\r\n    return text;\r\n  }\r\n\r\n  public domNode!: Text;\r\n  protected text: string;\r\n\r\n  constructor(scroll: Root, node: Node) {\r\n    super(scroll, node);\r\n    this.text = this.statics.value(this.domNode);\r\n  }\r\n\r\n  public deleteAt(index: number, length: number): void {\r\n    this.domNode.data = this.text =\r\n      this.text.slice(0, index) + this.text.slice(index + length);\r\n  }\r\n\r\n  public index(node: Node, offset: number): number {\r\n    if (this.domNode === node) {\r\n      return offset;\r\n    }\r\n    return -1;\r\n  }\r\n\r\n  public insertAt(index: number, value: string, def?: any): void {\r\n    if (def == null) {\r\n      this.text = this.text.slice(0, index) + value + this.text.slice(index);\r\n      this.domNode.data = this.text;\r\n    } else {\r\n      super.insertAt(index, value, def);\r\n    }\r\n  }\r\n\r\n  public length(): number {\r\n    return this.text.length;\r\n  }\r\n\r\n  public optimize(context: { [key: string]: any }): void {\r\n    super.optimize(context);\r\n    this.text = this.statics.value(this.domNode);\r\n    if (this.text.length === 0) {\r\n      this.remove();\r\n    } else if (this.next instanceof TextBlot && this.next.prev === this) {\r\n      this.insertAt(this.length(), (this.next as TextBlot).value());\r\n      this.next.remove();\r\n    }\r\n  }\r\n\r\n  public position(index: number, _inclusive: boolean = false): [Node, number] {\r\n    return [this.domNode, index];\r\n  }\r\n\r\n  public split(index: number, force: boolean = false): Blot | null {\r\n    if (!force) {\r\n      if (index === 0) {\r\n        return this;\r\n      }\r\n      if (index === this.length()) {\r\n        return this.next;\r\n      }\r\n    }\r\n    const after = this.scroll.create(this.domNode.splitText(index));\r\n    this.parent.insertBefore(after, this.next || undefined);\r\n    this.text = this.statics.value(this.domNode);\r\n    return after;\r\n  }\r\n\r\n  public update(\r\n    mutations: MutationRecord[],\r\n    _context: { [key: string]: any },\r\n  ): void {\r\n    if (\r\n      mutations.some(mutation => {\r\n        return (\r\n          mutation.type === 'characterData' && mutation.target === this.domNode\r\n        );\r\n      })\r\n    ) {\r\n      this.text = this.statics.value(this.domNode);\r\n    }\r\n  }\r\n\r\n  public value(): string {\r\n    return this.text;\r\n  }\r\n}\r\n\r\nexport default TextBlot;\r\n","var diff = require('fast-diff');\nvar equal = require('deep-equal');\nvar extend = require('extend');\nvar op = require('./op');\n\n\nvar NULL_CHARACTER = String.fromCharCode(0);  // Placeholder char for embed in diff()\n\n\nvar Delta = function (ops) {\n  // Assume we are given a well formed ops\n  if (Array.isArray(ops)) {\n    this.ops = ops;\n  } else if (ops != null && Array.isArray(ops.ops)) {\n    this.ops = ops.ops;\n  } else {\n    this.ops = [];\n  }\n};\n\n\nDelta.prototype.insert = function (text, attributes) {\n  var newOp = {};\n  if (text.length === 0) return this;\n  newOp.insert = text;\n  if (attributes != null && typeof attributes === 'object' && Object.keys(attributes).length > 0) {\n    newOp.attributes = attributes;\n  }\n  return this.push(newOp);\n};\n\nDelta.prototype['delete'] = function (length) {\n  if (length <= 0) return this;\n  return this.push({ 'delete': length });\n};\n\nDelta.prototype.retain = function (length, attributes) {\n  if (length <= 0) return this;\n  var newOp = { retain: length };\n  if (attributes != null && typeof attributes === 'object' && Object.keys(attributes).length > 0) {\n    newOp.attributes = attributes;\n  }\n  return this.push(newOp);\n};\n\nDelta.prototype.push = function (newOp) {\n  var index = this.ops.length;\n  var lastOp = this.ops[index - 1];\n  newOp = extend(true, {}, newOp);\n  if (typeof lastOp === 'object') {\n    if (typeof newOp['delete'] === 'number' && typeof lastOp['delete'] === 'number') {\n      this.ops[index - 1] = { 'delete': lastOp['delete'] + newOp['delete'] };\n      return this;\n    }\n    // Since it does not matter if we insert before or after deleting at the same index,\n    // always prefer to insert first\n    if (typeof lastOp['delete'] === 'number' && newOp.insert != null) {\n      index -= 1;\n      lastOp = this.ops[index - 1];\n      if (typeof lastOp !== 'object') {\n        this.ops.unshift(newOp);\n        return this;\n      }\n    }\n    if (equal(newOp.attributes, lastOp.attributes)) {\n      if (typeof newOp.insert === 'string' && typeof lastOp.insert === 'string') {\n        this.ops[index - 1] = { insert: lastOp.insert + newOp.insert };\n        if (typeof newOp.attributes === 'object') this.ops[index - 1].attributes = newOp.attributes\n        return this;\n      } else if (typeof newOp.retain === 'number' && typeof lastOp.retain === 'number') {\n        this.ops[index - 1] = { retain: lastOp.retain + newOp.retain };\n        if (typeof newOp.attributes === 'object') this.ops[index - 1].attributes = newOp.attributes\n        return this;\n      }\n    }\n  }\n  if (index === this.ops.length) {\n    this.ops.push(newOp);\n  } else {\n    this.ops.splice(index, 0, newOp);\n  }\n  return this;\n};\n\nDelta.prototype.chop = function () {\n  var lastOp = this.ops[this.ops.length - 1];\n  if (lastOp && lastOp.retain && !lastOp.attributes) {\n    this.ops.pop();\n  }\n  return this;\n};\n\nDelta.prototype.filter = function (predicate) {\n  return this.ops.filter(predicate);\n};\n\nDelta.prototype.forEach = function (predicate) {\n  this.ops.forEach(predicate);\n};\n\nDelta.prototype.map = function (predicate) {\n  return this.ops.map(predicate);\n};\n\nDelta.prototype.partition = function (predicate) {\n  var passed = [], failed = [];\n  this.forEach(function(op) {\n    var target = predicate(op) ? passed : failed;\n    target.push(op);\n  });\n  return [passed, failed];\n};\n\nDelta.prototype.reduce = function (predicate, initial) {\n  return this.ops.reduce(predicate, initial);\n};\n\nDelta.prototype.changeLength = function () {\n  return this.reduce(function (length, elem) {\n    if (elem.insert) {\n      return length + op.length(elem);\n    } else if (elem.delete) {\n      return length - elem.delete;\n    }\n    return length;\n  }, 0);\n};\n\nDelta.prototype.length = function () {\n  return this.reduce(function (length, elem) {\n    return length + op.length(elem);\n  }, 0);\n};\n\nDelta.prototype.slice = function (start, end) {\n  start = start || 0;\n  if (typeof end !== 'number') end = Infinity;\n  var ops = [];\n  var iter = op.iterator(this.ops);\n  var index = 0;\n  while (index < end && iter.hasNext()) {\n    var nextOp;\n    if (index < start) {\n      nextOp = iter.next(start - index);\n    } else {\n      nextOp = iter.next(end - index);\n      ops.push(nextOp);\n    }\n    index += op.length(nextOp);\n  }\n  return new Delta(ops);\n};\n\n\nDelta.prototype.compose = function (other) {\n  var thisIter = op.iterator(this.ops);\n  var otherIter = op.iterator(other.ops);\n  var ops = [];\n  var firstOther = otherIter.peek();\n  if (firstOther != null && typeof firstOther.retain === 'number' && firstOther.attributes == null) {\n    var firstLeft = firstOther.retain;\n    while (thisIter.peekType() === 'insert' && thisIter.peekLength() <= firstLeft) {\n      firstLeft -= thisIter.peekLength();\n      ops.push(thisIter.next());\n    }\n    if (firstOther.retain - firstLeft > 0) {\n      otherIter.next(firstOther.retain - firstLeft);\n    }\n  }\n  var delta = new Delta(ops);\n  while (thisIter.hasNext() || otherIter.hasNext()) {\n    if (otherIter.peekType() === 'insert') {\n      delta.push(otherIter.next());\n    } else if (thisIter.peekType() === 'delete') {\n      delta.push(thisIter.next());\n    } else {\n      var length = Math.min(thisIter.peekLength(), otherIter.peekLength());\n      var thisOp = thisIter.next(length);\n      var otherOp = otherIter.next(length);\n      if (typeof otherOp.retain === 'number') {\n        var newOp = {};\n        if (typeof thisOp.retain === 'number') {\n          newOp.retain = length;\n        } else {\n          newOp.insert = thisOp.insert;\n        }\n        // Preserve null when composing with a retain, otherwise remove it for inserts\n        var attributes = op.attributes.compose(thisOp.attributes, otherOp.attributes, typeof thisOp.retain === 'number');\n        if (attributes) newOp.attributes = attributes;\n        delta.push(newOp);\n\n        // Optimization if rest of other is just retain\n        if (!otherIter.hasNext() && equal(delta.ops[delta.ops.length - 1], newOp)) {\n          var rest = new Delta(thisIter.rest());\n          return delta.concat(rest).chop();\n        }\n\n      // Other op should be delete, we could be an insert or retain\n      // Insert + delete cancels out\n      } else if (typeof otherOp['delete'] === 'number' && typeof thisOp.retain === 'number') {\n        delta.push(otherOp);\n      }\n    }\n  }\n  return delta.chop();\n};\n\nDelta.prototype.concat = function (other) {\n  var delta = new Delta(this.ops.slice());\n  if (other.ops.length > 0) {\n    delta.push(other.ops[0]);\n    delta.ops = delta.ops.concat(other.ops.slice(1));\n  }\n  return delta;\n};\n\nDelta.prototype.diff = function (other, index) {\n  if (this.ops === other.ops) {\n    return new Delta();\n  }\n  var strings = [this, other].map(function (delta) {\n    return delta.map(function (op) {\n      if (op.insert != null) {\n        return typeof op.insert === 'string' ? op.insert : NULL_CHARACTER;\n      }\n      var prep = (delta === other) ? 'on' : 'with';\n      throw new Error('diff() called ' + prep + ' non-document');\n    }).join('');\n  });\n  var delta = new Delta();\n  var diffResult = diff(strings[0], strings[1], index);\n  var thisIter = op.iterator(this.ops);\n  var otherIter = op.iterator(other.ops);\n  diffResult.forEach(function (component) {\n    var length = component[1].length;\n    while (length > 0) {\n      var opLength = 0;\n      switch (component[0]) {\n        case diff.INSERT:\n          opLength = Math.min(otherIter.peekLength(), length);\n          delta.push(otherIter.next(opLength));\n          break;\n        case diff.DELETE:\n          opLength = Math.min(length, thisIter.peekLength());\n          thisIter.next(opLength);\n          delta['delete'](opLength);\n          break;\n        case diff.EQUAL:\n          opLength = Math.min(thisIter.peekLength(), otherIter.peekLength(), length);\n          var thisOp = thisIter.next(opLength);\n          var otherOp = otherIter.next(opLength);\n          if (equal(thisOp.insert, otherOp.insert)) {\n            delta.retain(opLength, op.attributes.diff(thisOp.attributes, otherOp.attributes));\n          } else {\n            delta.push(otherOp)['delete'](opLength);\n          }\n          break;\n      }\n      length -= opLength;\n    }\n  });\n  return delta.chop();\n};\n\nDelta.prototype.eachLine = function (predicate, newline) {\n  newline = newline || '\\n';\n  var iter = op.iterator(this.ops);\n  var line = new Delta();\n  var i = 0;\n  while (iter.hasNext()) {\n    if (iter.peekType() !== 'insert') return;\n    var thisOp = iter.peek();\n    var start = op.length(thisOp) - iter.peekLength();\n    var index = typeof thisOp.insert === 'string' ?\n      thisOp.insert.indexOf(newline, start) - start : -1;\n    if (index < 0) {\n      line.push(iter.next());\n    } else if (index > 0) {\n      line.push(iter.next(index));\n    } else {\n      if (predicate(line, iter.next(1).attributes || {}, i) === false) {\n        return;\n      }\n      i += 1;\n      line = new Delta();\n    }\n  }\n  if (line.length() > 0) {\n    predicate(line, {}, i);\n  }\n};\n\nDelta.prototype.transform = function (other, priority) {\n  priority = !!priority;\n  if (typeof other === 'number') {\n    return this.transformPosition(other, priority);\n  }\n  var thisIter = op.iterator(this.ops);\n  var otherIter = op.iterator(other.ops);\n  var delta = new Delta();\n  while (thisIter.hasNext() || otherIter.hasNext()) {\n    if (thisIter.peekType() === 'insert' && (priority || otherIter.peekType() !== 'insert')) {\n      delta.retain(op.length(thisIter.next()));\n    } else if (otherIter.peekType() === 'insert') {\n      delta.push(otherIter.next());\n    } else {\n      var length = Math.min(thisIter.peekLength(), otherIter.peekLength());\n      var thisOp = thisIter.next(length);\n      var otherOp = otherIter.next(length);\n      if (thisOp['delete']) {\n        // Our delete either makes their delete redundant or removes their retain\n        continue;\n      } else if (otherOp['delete']) {\n        delta.push(otherOp);\n      } else {\n        // We retain either their retain or insert\n        delta.retain(length, op.attributes.transform(thisOp.attributes, otherOp.attributes, priority));\n      }\n    }\n  }\n  return delta.chop();\n};\n\nDelta.prototype.transformPosition = function (index, priority) {\n  priority = !!priority;\n  var thisIter = op.iterator(this.ops);\n  var offset = 0;\n  while (thisIter.hasNext() && offset <= index) {\n    var length = thisIter.peekLength();\n    var nextType = thisIter.peekType();\n    thisIter.next();\n    if (nextType === 'delete') {\n      index -= Math.min(length, index - offset);\n      continue;\n    } else if (nextType === 'insert' && (offset < index || !priority)) {\n      index += length;\n    }\n    offset += length;\n  }\n  return index;\n};\n\n\nmodule.exports = Delta;\n","import extend from 'extend';\r\nimport Delta from 'quill-delta';\r\nimport {\r\n  AttributorStore,\r\n  BlockBlot,\r\n  EmbedBlot,\r\n  LeafBlot,\r\n  Scope,\r\n} from 'parchment';\r\nimport Break from './break';\r\nimport Inline from './inline';\r\nimport TextBlot from './text';\r\n\r\nconst NEWLINE_LENGTH = 1;\r\n\r\nclass Block extends BlockBlot {\r\n  constructor(scroll, domNode) {\r\n    super(scroll, domNode);\r\n    this.cache = {};\r\n  }\r\n\r\n  delta() {\r\n    if (this.cache.delta == null) {\r\n      this.cache.delta = blockDelta(this);\r\n    }\r\n    return this.cache.delta;\r\n  }\r\n\r\n  deleteAt(index, length) {\r\n    super.deleteAt(index, length);\r\n    this.cache = {};\r\n  }\r\n\r\n  formatAt(index, length, name, value) {\r\n    if (length <= 0) return;\r\n    if (this.scroll.query(name, Scope.BLOCK)) {\r\n      if (index + length === this.length()) {\r\n        this.format(name, value);\r\n      }\r\n    } else {\r\n      super.formatAt(\r\n        index,\r\n        Math.min(length, this.length() - index - 1),\r\n        name,\r\n        value,\r\n      );\r\n    }\r\n    this.cache = {};\r\n  }\r\n\r\n  insertAt(index, value, def) {\r\n    if (def != null) {\r\n      super.insertAt(index, value, def);\r\n      this.cache = {};\r\n      return;\r\n    }\r\n    if (value.length === 0) return;\r\n    const lines = value.split('\\n');\r\n    const text = lines.shift();\r\n    if (text.length > 0) {\r\n      if (index < this.length() - 1 || this.children.tail == null) {\r\n        super.insertAt(Math.min(index, this.length() - 1), text);\r\n      } else {\r\n        this.children.tail.insertAt(this.children.tail.length(), text);\r\n      }\r\n      this.cache = {};\r\n    }\r\n    let block = this;\r\n    lines.reduce((lineIndex, line) => {\r\n      block = block.split(lineIndex, true);\r\n      block.insertAt(0, line);\r\n      return line.length;\r\n    }, index + text.length);\r\n  }\r\n\r\n  insertBefore(blot, ref) {\r\n    const { head } = this.children;\r\n    super.insertBefore(blot, ref);\r\n    if (head instanceof Break) {\r\n      head.remove();\r\n    }\r\n    this.cache = {};\r\n  }\r\n\r\n  length() {\r\n    if (this.cache.length == null) {\r\n      this.cache.length = super.length() + NEWLINE_LENGTH;\r\n    }\r\n    return this.cache.length;\r\n  }\r\n\r\n  moveChildren(target, ref) {\r\n    super.moveChildren(target, ref);\r\n    this.cache = {};\r\n  }\r\n\r\n  optimize(context) {\r\n    super.optimize(context);\r\n    this.cache = {};\r\n  }\r\n\r\n  path(index) {\r\n    return super.path(index, true);\r\n  }\r\n\r\n  removeChild(child) {\r\n    super.removeChild(child);\r\n    this.cache = {};\r\n  }\r\n\r\n  split(index, force = false) {\r\n    if (force && (index === 0 || index >= this.length() - NEWLINE_LENGTH)) {\r\n      const clone = this.clone();\r\n      if (index === 0) {\r\n        this.parent.insertBefore(clone, this);\r\n        return this;\r\n      }\r\n      this.parent.insertBefore(clone, this.next);\r\n      return clone;\r\n    }\r\n    const next = super.split(index, force);\r\n    this.cache = {};\r\n    return next;\r\n  }\r\n}\r\nBlock.blotName = 'block';\r\nBlock.tagName = 'P';\r\nBlock.defaultChild = Break;\r\nBlock.allowedChildren = [Break, Inline, EmbedBlot, TextBlot];\r\n\r\nclass BlockEmbed extends EmbedBlot {\r\n  attach() {\r\n    super.attach();\r\n    this.attributes = new AttributorStore(this.domNode);\r\n  }\r\n\r\n  delta() {\r\n    return new Delta().insert(\r\n      this.value(),\r\n      extend(this.formats(), this.attributes.values()),\r\n    );\r\n  }\r\n\r\n  format(name, value) {\r\n    const attribute = this.scroll.query(name, Scope.BLOCK_ATTRIBUTE);\r\n    if (attribute != null) {\r\n      this.attributes.attribute(attribute, value);\r\n    }\r\n  }\r\n\r\n  formatAt(index, length, name, value) {\r\n    this.format(name, value);\r\n  }\r\n\r\n  insertAt(index, value, def) {\r\n    if (typeof value === 'string' && value.endsWith('\\n')) {\r\n      const block = this.scroll.create(Block.blotName);\r\n      this.parent.insertBefore(block, index === 0 ? this : this.next);\r\n      block.insertAt(0, value.slice(0, -1));\r\n    } else {\r\n      super.insertAt(index, value, def);\r\n    }\r\n  }\r\n}\r\nBlockEmbed.scope = Scope.BLOCK_BLOT;\r\n// It is important for cursor behavior BlockEmbeds use tags that are block level elements\r\n\r\nfunction blockDelta(blot) {\r\n  return blot\r\n    .descendants(LeafBlot)\r\n    .reduce((delta, leaf) => {\r\n      if (leaf.length() === 0) {\r\n        return delta;\r\n      }\r\n      return delta.insert(leaf.value(), bubbleFormats(leaf));\r\n    }, new Delta())\r\n    .insert('\\n', bubbleFormats(blot));\r\n}\r\n\r\nfunction bubbleFormats(blot, formats = {}) {\r\n  if (blot == null) return formats;\r\n  if (typeof blot.formats === 'function') {\r\n    formats = extend(formats, blot.formats());\r\n    // exclude syntax highlighting from deltas and getFormat()\r\n    delete formats['code-token'];\r\n  }\r\n  if (\r\n    blot.parent == null ||\r\n    blot.parent.statics.blotName === 'scroll' ||\r\n    blot.parent.statics.scope !== blot.statics.scope\r\n  ) {\r\n    return formats;\r\n  }\r\n  return bubbleFormats(blot.parent, formats);\r\n}\r\n\r\nexport { blockDelta, bubbleFormats, BlockEmbed, Block as default };\r\n","import Delta from 'quill-delta';\r\nimport * as Parchment from 'parchment';\r\nimport extend from 'extend';\r\nimport Editor from './editor';\r\nimport Emitter from './emitter';\r\nimport Module from './module';\r\nimport Selection, { Range } from './selection';\r\nimport instances from './instances';\r\nimport logger from './logger';\r\nimport Theme from './theme';\r\n\r\nconst debug = logger('quill');\r\n\r\nconst globalRegistry = new Parchment.Registry();\r\nParchment.ParentBlot.uiClass = 'ql-ui';\r\n\r\nclass Quill {\r\n  static debug(limit) {\r\n    if (limit === true) {\r\n      limit = 'log';\r\n    }\r\n    logger.level(limit);\r\n  }\r\n\r\n  static find(node) {\r\n    return instances.get(node) || globalRegistry.find(node);\r\n  }\r\n\r\n  static import(name) {\r\n    if (this.imports[name] == null) {\r\n      debug.error(`Cannot import ${name}. Are you sure it was registered?`);\r\n    }\r\n    return this.imports[name];\r\n  }\r\n\r\n  static register(path, target, overwrite = false) {\r\n    if (typeof path !== 'string') {\r\n      const name = path.attrName || path.blotName;\r\n      if (typeof name === 'string') {\r\n        // register(Blot | Attributor, overwrite)\r\n        this.register(`formats/${name}`, path, target);\r\n      } else {\r\n        Object.keys(path).forEach(key => {\r\n          this.register(key, path[key], target);\r\n        });\r\n      }\r\n    } else {\r\n      if (this.imports[path] != null && !overwrite) {\r\n        debug.warn(`Overwriting ${path} with`, target);\r\n      }\r\n      this.imports[path] = target;\r\n      if (\r\n        (path.startsWith('blots/') || path.startsWith('formats/')) &&\r\n        target.blotName !== 'abstract'\r\n      ) {\r\n        globalRegistry.register(target);\r\n      }\r\n      if (typeof target.register === 'function') {\r\n        target.register(globalRegistry);\r\n      }\r\n    }\r\n  }\r\n\r\n  constructor(container, options = {}) {\r\n    this.options = expandConfig(container, options);\r\n    this.container = this.options.container;\r\n    if (this.container == null) {\r\n      return debug.error('Invalid Quill container', container);\r\n    }\r\n    if (this.options.debug) {\r\n      Quill.debug(this.options.debug);\r\n    }\r\n    const html = this.container.innerHTML.trim();\r\n    this.container.classList.add('ql-container');\r\n    this.container.innerHTML = '';\r\n    instances.set(this.container, this);\r\n    this.root = this.addContainer('ql-editor');\r\n    this.root.addEventListener('dragstart', e => {\r\n      e.preventDefault();\r\n    });\r\n    this.root.classList.add('ql-blank');\r\n    this.root.setAttribute('data-gramm', false);\r\n    this.scrollingContainer = this.options.scrollingContainer || this.root;\r\n    this.emitter = new Emitter();\r\n    const ScrollBlot = this.options.registry.query(\r\n      Parchment.ScrollBlot.blotName,\r\n    );\r\n    this.scroll = new ScrollBlot(this.options.registry, this.root, {\r\n      emitter: this.emitter,\r\n    });\r\n    this.editor = new Editor(this.scroll);\r\n    this.selection = new Selection(this.scroll, this.emitter);\r\n    this.theme = new this.options.theme(this, this.options); // eslint-disable-line new-cap\r\n    this.keyboard = this.theme.addModule('keyboard');\r\n    this.clipboard = this.theme.addModule('clipboard');\r\n    this.history = this.theme.addModule('history');\r\n    this.uploader = this.theme.addModule('uploader');\r\n    this.theme.init();\r\n    this.emitter.on(Emitter.events.EDITOR_CHANGE, type => {\r\n      if (type === Emitter.events.TEXT_CHANGE) {\r\n        this.root.classList.toggle('ql-blank', this.editor.isBlank());\r\n      }\r\n    });\r\n    this.emitter.on(Emitter.events.SCROLL_UPDATE, (source, mutations) => {\r\n      const oldRange = this.selection.lastRange;\r\n      const [newRange] = this.selection.getRange();\r\n      const selectionInfo =\r\n        oldRange && newRange ? [oldRange, newRange] : undefined;\r\n      modify.call(\r\n        this,\r\n        () => this.editor.update(null, mutations, selectionInfo),\r\n        source,\r\n      );\r\n    });\r\n    const contents = this.clipboard.convert({\r\n      html: `${html}<p><br></p>`,\r\n      text: '\\n',\r\n    });\r\n    this.setContents(contents);\r\n    this.history.clear();\r\n    if (this.options.placeholder) {\r\n      this.root.setAttribute('data-placeholder', this.options.placeholder);\r\n    }\r\n    if (this.options.readOnly) {\r\n      this.disable();\r\n    }\r\n    this.allowReadOnlyEdits = false;\r\n  }\r\n\r\n  addContainer(container, refNode = null) {\r\n    if (typeof container === 'string') {\r\n      const className = container;\r\n      container = document.createElement('div');\r\n      container.classList.add(className);\r\n    }\r\n    this.container.insertBefore(container, refNode);\r\n    return container;\r\n  }\r\n\r\n  blur() {\r\n    this.selection.setRange(null);\r\n  }\r\n\r\n  deleteText(index, length, source) {\r\n    [index, length, , source] = overload(index, length, source);\r\n    return modify.call(\r\n      this,\r\n      () => {\r\n        return this.editor.deleteText(index, length);\r\n      },\r\n      source,\r\n      index,\r\n      -1 * length,\r\n    );\r\n  }\r\n\r\n  disable() {\r\n    this.enable(false);\r\n  }\r\n\r\n  editReadOnly(modifier) {\r\n    this.allowReadOnlyEdits = true;\r\n    const value = modifier();\r\n    this.allowReadOnlyEdits = false;\r\n    return value;\r\n  }\r\n\r\n  enable(enabled = true) {\r\n    this.scroll.enable(enabled);\r\n    this.container.classList.toggle('ql-disabled', !enabled);\r\n  }\r\n\r\n  focus() {\r\n    const { scrollTop } = this.scrollingContainer;\r\n    this.selection.focus();\r\n    this.scrollingContainer.scrollTop = scrollTop;\r\n    this.scrollIntoView();\r\n  }\r\n\r\n  format(name, value, source = Emitter.sources.API) {\r\n    return modify.call(\r\n      this,\r\n      () => {\r\n        const range = this.getSelection(true);\r\n        let change = new Delta();\r\n        if (range == null) return change;\r\n        if (this.scroll.query(name, Parchment.Scope.BLOCK)) {\r\n          change = this.editor.formatLine(range.index, range.length, {\r\n            [name]: value,\r\n          });\r\n        } else if (range.length === 0) {\r\n          this.selection.format(name, value);\r\n          return change;\r\n        } else {\r\n          change = this.editor.formatText(range.index, range.length, {\r\n            [name]: value,\r\n          });\r\n        }\r\n        this.setSelection(range, Emitter.sources.SILENT);\r\n        return change;\r\n      },\r\n      source,\r\n    );\r\n  }\r\n\r\n  formatLine(index, length, name, value, source) {\r\n    let formats;\r\n    // eslint-disable-next-line prefer-const\r\n    [index, length, formats, source] = overload(\r\n      index,\r\n      length,\r\n      name,\r\n      value,\r\n      source,\r\n    );\r\n    return modify.call(\r\n      this,\r\n      () => {\r\n        return this.editor.formatLine(index, length, formats);\r\n      },\r\n      source,\r\n      index,\r\n      0,\r\n    );\r\n  }\r\n\r\n  formatText(index, length, name, value, source) {\r\n    let formats;\r\n    // eslint-disable-next-line prefer-const\r\n    [index, length, formats, source] = overload(\r\n      index,\r\n      length,\r\n      name,\r\n      value,\r\n      source,\r\n    );\r\n    return modify.call(\r\n      this,\r\n      () => {\r\n        return this.editor.formatText(index, length, formats);\r\n      },\r\n      source,\r\n      index,\r\n      0,\r\n    );\r\n  }\r\n\r\n  getBounds(index, length = 0) {\r\n    let bounds;\r\n    if (typeof index === 'number') {\r\n      bounds = this.selection.getBounds(index, length);\r\n    } else {\r\n      bounds = this.selection.getBounds(index.index, index.length);\r\n    }\r\n    const containerBounds = this.container.getBoundingClientRect();\r\n    return {\r\n      bottom: bounds.bottom - containerBounds.top,\r\n      height: bounds.height,\r\n      left: bounds.left - containerBounds.left,\r\n      right: bounds.right - containerBounds.left,\r\n      top: bounds.top - containerBounds.top,\r\n      width: bounds.width,\r\n    };\r\n  }\r\n\r\n  getContents(index = 0, length = this.getLength() - index) {\r\n    [index, length] = overload(index, length);\r\n    return this.editor.getContents(index, length);\r\n  }\r\n\r\n  getFormat(index = this.getSelection(true), length = 0) {\r\n    if (typeof index === 'number') {\r\n      return this.editor.getFormat(index, length);\r\n    }\r\n    return this.editor.getFormat(index.index, index.length);\r\n  }\r\n\r\n  getIndex(blot) {\r\n    return blot.offset(this.scroll);\r\n  }\r\n\r\n  getLength() {\r\n    return this.scroll.length();\r\n  }\r\n\r\n  getLeaf(index) {\r\n    return this.scroll.leaf(index);\r\n  }\r\n\r\n  getLine(index) {\r\n    return this.scroll.line(index);\r\n  }\r\n\r\n  getLines(index = 0, length = Number.MAX_VALUE) {\r\n    if (typeof index !== 'number') {\r\n      return this.scroll.lines(index.index, index.length);\r\n    }\r\n    return this.scroll.lines(index, length);\r\n  }\r\n\r\n  getModule(name) {\r\n    return this.theme.modules[name];\r\n  }\r\n\r\n  getSelection(focus = false) {\r\n    if (focus) this.focus();\r\n    this.update(); // Make sure we access getRange with editor in consistent state\r\n    return this.selection.getRange()[0];\r\n  }\r\n\r\n  getSemanticHTML(index = 0, length = this.getLength() - index) {\r\n    [index, length] = overload(index, length);\r\n    return this.editor.getHTML(index, length);\r\n  }\r\n\r\n  getText(index = 0, length = this.getLength() - index) {\r\n    [index, length] = overload(index, length);\r\n    return this.editor.getText(index, length);\r\n  }\r\n\r\n  hasFocus() {\r\n    return this.selection.hasFocus();\r\n  }\r\n\r\n  insertEmbed(index, embed, value, source = Quill.sources.API) {\r\n    return modify.call(\r\n      this,\r\n      () => {\r\n        return this.editor.insertEmbed(index, embed, value);\r\n      },\r\n      source,\r\n      index,\r\n    );\r\n  }\r\n\r\n  insertText(index, text, name, value, source) {\r\n    let formats;\r\n    // eslint-disable-next-line prefer-const\r\n    [index, , formats, source] = overload(index, 0, name, value, source);\r\n    return modify.call(\r\n      this,\r\n      () => {\r\n        return this.editor.insertText(index, text, formats);\r\n      },\r\n      source,\r\n      index,\r\n      text.length,\r\n    );\r\n  }\r\n\r\n  isEnabled() {\r\n    return this.scroll.isEnabled();\r\n  }\r\n\r\n  off(...args) {\r\n    return this.emitter.off(...args);\r\n  }\r\n\r\n  on(...args) {\r\n    return this.emitter.on(...args);\r\n  }\r\n\r\n  once(...args) {\r\n    return this.emitter.once(...args);\r\n  }\r\n\r\n  removeFormat(index, length, source) {\r\n    [index, length, , source] = overload(index, length, source);\r\n    return modify.call(\r\n      this,\r\n      () => {\r\n        return this.editor.removeFormat(index, length);\r\n      },\r\n      source,\r\n      index,\r\n    );\r\n  }\r\n\r\n  scrollIntoView() {\r\n    this.selection.scrollIntoView(this.scrollingContainer);\r\n  }\r\n\r\n  setContents(delta, source = Emitter.sources.API) {\r\n    return modify.call(\r\n      this,\r\n      () => {\r\n        delta = new Delta(delta);\r\n        const length = this.getLength();\r\n        const deleted = this.editor.deleteText(0, length);\r\n        const applied = this.editor.applyDelta(delta);\r\n        const lastOp = applied.ops[applied.ops.length - 1];\r\n        if (\r\n          lastOp != null &&\r\n          typeof lastOp.insert === 'string' &&\r\n          lastOp.insert[lastOp.insert.length - 1] === '\\n'\r\n        ) {\r\n          this.editor.deleteText(this.getLength() - 1, 1);\r\n          applied.delete(1);\r\n        }\r\n        return deleted.compose(applied);\r\n      },\r\n      source,\r\n    );\r\n  }\r\n\r\n  setSelection(index, length, source) {\r\n    if (index == null) {\r\n      this.selection.setRange(null, length || Quill.sources.API);\r\n    } else {\r\n      [index, length, , source] = overload(index, length, source);\r\n      this.selection.setRange(new Range(Math.max(0, index), length), source);\r\n      if (source !== Emitter.sources.SILENT) {\r\n        this.selection.scrollIntoView(this.scrollingContainer);\r\n      }\r\n    }\r\n  }\r\n\r\n  setText(text, source = Emitter.sources.API) {\r\n    const delta = new Delta().insert(text);\r\n    return this.setContents(delta, source);\r\n  }\r\n\r\n  update(source = Emitter.sources.USER) {\r\n    const change = this.scroll.update(source); // Will update selection before selection.update() does if text changes\r\n    this.selection.update(source);\r\n    // TODO this is usually undefined\r\n    return change;\r\n  }\r\n\r\n  updateContents(delta, source = Emitter.sources.API) {\r\n    return modify.call(\r\n      this,\r\n      () => {\r\n        delta = new Delta(delta);\r\n        return this.editor.applyDelta(delta, source);\r\n      },\r\n      source,\r\n      true,\r\n    );\r\n  }\r\n}\r\nQuill.DEFAULTS = {\r\n  bounds: null,\r\n  modules: {},\r\n  placeholder: '',\r\n  readOnly: false,\r\n  registry: globalRegistry,\r\n  scrollingContainer: null,\r\n  theme: 'default',\r\n};\r\nQuill.events = Emitter.events;\r\nQuill.sources = Emitter.sources;\r\n// eslint-disable-next-line no-undef\r\nQuill.version = typeof QUILL_VERSION === 'undefined' ? 'dev' : QUILL_VERSION;\r\n\r\nQuill.imports = {\r\n  delta: Delta,\r\n  parchment: Parchment,\r\n  'core/module': Module,\r\n  'core/theme': Theme,\r\n};\r\n\r\nfunction expandConfig(container, userConfig) {\r\n  userConfig = extend(\r\n    true,\r\n    {\r\n      container,\r\n      modules: {\r\n        clipboard: true,\r\n        keyboard: true,\r\n        history: true,\r\n        uploader: true,\r\n      },\r\n    },\r\n    userConfig,\r\n  );\r\n  if (!userConfig.theme || userConfig.theme === Quill.DEFAULTS.theme) {\r\n    userConfig.theme = Theme;\r\n  } else {\r\n    userConfig.theme = Quill.import(`themes/${userConfig.theme}`);\r\n    if (userConfig.theme == null) {\r\n      throw new Error(\r\n        `Invalid theme ${userConfig.theme}. Did you register it?`,\r\n      );\r\n    }\r\n  }\r\n  const themeConfig = extend(true, {}, userConfig.theme.DEFAULTS);\r\n  [themeConfig, userConfig].forEach(config => {\r\n    config.modules = config.modules || {};\r\n    Object.keys(config.modules).forEach(module => {\r\n      if (config.modules[module] === true) {\r\n        config.modules[module] = {};\r\n      }\r\n    });\r\n  });\r\n  const moduleNames = Object.keys(themeConfig.modules).concat(\r\n    Object.keys(userConfig.modules),\r\n  );\r\n  const moduleConfig = moduleNames.reduce((config, name) => {\r\n    const moduleClass = Quill.import(`modules/${name}`);\r\n    if (moduleClass == null) {\r\n      debug.error(\r\n        `Cannot load ${name} module. Are you sure you registered it?`,\r\n      );\r\n    } else {\r\n      config[name] = moduleClass.DEFAULTS || {};\r\n    }\r\n    return config;\r\n  }, {});\r\n  // Special case toolbar shorthand\r\n  if (\r\n    userConfig.modules != null &&\r\n    userConfig.modules.toolbar &&\r\n    userConfig.modules.toolbar.constructor !== Object\r\n  ) {\r\n    userConfig.modules.toolbar = {\r\n      container: userConfig.modules.toolbar,\r\n    };\r\n  }\r\n  userConfig = extend(\r\n    true,\r\n    {},\r\n    Quill.DEFAULTS,\r\n    { modules: moduleConfig },\r\n    themeConfig,\r\n    userConfig,\r\n  );\r\n  ['bounds', 'container', 'scrollingContainer'].forEach(key => {\r\n    if (typeof userConfig[key] === 'string') {\r\n      userConfig[key] = document.querySelector(userConfig[key]);\r\n    }\r\n  });\r\n  userConfig.modules = Object.keys(userConfig.modules).reduce(\r\n    (config, name) => {\r\n      if (userConfig.modules[name]) {\r\n        config[name] = userConfig.modules[name];\r\n      }\r\n      return config;\r\n    },\r\n    {},\r\n  );\r\n  return userConfig;\r\n}\r\n\r\n// Handle selection preservation and TEXT_CHANGE emission\r\n// common to modification APIs\r\nfunction modify(modifier, source, index, shift) {\r\n  if (\r\n    !this.isEnabled() &&\r\n    source === Emitter.sources.USER &&\r\n    !this.allowReadOnlyEdits\r\n  ) {\r\n    return new Delta();\r\n  }\r\n  let range = index == null ? null : this.getSelection();\r\n  const oldDelta = this.editor.delta;\r\n  const change = modifier();\r\n  if (range != null) {\r\n    if (index === true) {\r\n      index = range.index; // eslint-disable-line prefer-destructuring\r\n    }\r\n    if (shift == null) {\r\n      range = shiftRange(range, change, source);\r\n    } else if (shift !== 0) {\r\n      range = shiftRange(range, index, shift, source);\r\n    }\r\n    this.setSelection(range, Emitter.sources.SILENT);\r\n  }\r\n  if (change.length() > 0) {\r\n    const args = [Emitter.events.TEXT_CHANGE, change, oldDelta, source];\r\n    this.emitter.emit(Emitter.events.EDITOR_CHANGE, ...args);\r\n    if (source !== Emitter.sources.SILENT) {\r\n      this.emitter.emit(...args);\r\n    }\r\n  }\r\n  return change;\r\n}\r\n\r\nfunction overload(index, length, name, value, source) {\r\n  let formats = {};\r\n  if (typeof index.index === 'number' && typeof index.length === 'number') {\r\n    // Allow for throwaway end (used by insertText/insertEmbed)\r\n    if (typeof length !== 'number') {\r\n      source = value;\r\n      value = name;\r\n      name = length;\r\n      length = index.length; // eslint-disable-line prefer-destructuring\r\n      index = index.index; // eslint-disable-line prefer-destructuring\r\n    } else {\r\n      length = index.length; // eslint-disable-line prefer-destructuring\r\n      index = index.index; // eslint-disable-line prefer-destructuring\r\n    }\r\n  } else if (typeof length !== 'number') {\r\n    source = value;\r\n    value = name;\r\n    name = length;\r\n    length = 0;\r\n  }\r\n  // Handle format being object, two format name/value strings or excluded\r\n  if (typeof name === 'object') {\r\n    formats = name;\r\n    source = value;\r\n  } else if (typeof name === 'string') {\r\n    if (value != null) {\r\n      formats[name] = value;\r\n    } else {\r\n      source = name;\r\n    }\r\n  }\r\n  // Handle optional source\r\n  source = source || Emitter.sources.API;\r\n  return [index, length, formats, source];\r\n}\r\n\r\nfunction shiftRange(range, index, length, source) {\r\n  if (range == null) return null;\r\n  let start;\r\n  let end;\r\n  if (index instanceof Delta) {\r\n    [start, end] = [range.index, range.index + range.length].map(pos =>\r\n      index.transformPosition(pos, source !== Emitter.sources.USER),\r\n    );\r\n  } else {\r\n    [start, end] = [range.index, range.index + range.length].map(pos => {\r\n      if (pos < index || (pos === index && source === Emitter.sources.USER))\r\n        return pos;\r\n      if (length >= 0) {\r\n        return pos + length;\r\n      }\r\n      return Math.max(index, pos + length);\r\n    });\r\n  }\r\n  return new Range(start, end - start);\r\n}\r\n\r\nexport { globalRegistry, expandConfig, overload, Quill as default };\r\n","import { EmbedBlot, InlineBlot, Scope } from 'parchment';\r\nimport Break from './break';\r\nimport Text from './text';\r\n\r\nclass Inline extends InlineBlot {\r\n  static compare(self, other) {\r\n    const selfIndex = Inline.order.indexOf(self);\r\n    const otherIndex = Inline.order.indexOf(other);\r\n    if (selfIndex >= 0 || otherIndex >= 0) {\r\n      return selfIndex - otherIndex;\r\n    }\r\n    if (self === other) {\r\n      return 0;\r\n    }\r\n    if (self < other) {\r\n      return -1;\r\n    }\r\n    return 1;\r\n  }\r\n\r\n  formatAt(index, length, name, value) {\r\n    if (\r\n      Inline.compare(this.statics.blotName, name) < 0 &&\r\n      this.scroll.query(name, Scope.BLOT)\r\n    ) {\r\n      const blot = this.isolate(index, length);\r\n      if (value) {\r\n        blot.wrap(name, value);\r\n      }\r\n    } else {\r\n      super.formatAt(index, length, name, value);\r\n    }\r\n  }\r\n\r\n  optimize(context) {\r\n    super.optimize(context);\r\n    if (\r\n      this.parent instanceof Inline &&\r\n      Inline.compare(this.statics.blotName, this.parent.statics.blotName) > 0\r\n    ) {\r\n      const parent = this.parent.isolate(this.offset(), this.length());\r\n      this.moveChildren(parent);\r\n      parent.wrap(this);\r\n    }\r\n  }\r\n}\r\nInline.allowedChildren = [Inline, Break, EmbedBlot, Text];\r\n// Lower index means deeper in the DOM tree, since not found (-1) is for embeds\r\nInline.order = [\r\n  'cursor',\r\n  'inline', // Must be lower\r\n  'underline',\r\n  'strike',\r\n  'italic',\r\n  'bold',\r\n  'script',\r\n  'link',\r\n  'code', // Must be higher\r\n];\r\n\r\nexport default Inline;\r\n","'use strict';\n\nvar hasOwn = Object.prototype.hasOwnProperty;\nvar toStr = Object.prototype.toString;\nvar defineProperty = Object.defineProperty;\nvar gOPD = Object.getOwnPropertyDescriptor;\n\nvar isArray = function isArray(arr) {\n\tif (typeof Array.isArray === 'function') {\n\t\treturn Array.isArray(arr);\n\t}\n\n\treturn toStr.call(arr) === '[object Array]';\n};\n\nvar isPlainObject = function isPlainObject(obj) {\n\tif (!obj || toStr.call(obj) !== '[object Object]') {\n\t\treturn false;\n\t}\n\n\tvar hasOwnConstructor = hasOwn.call(obj, 'constructor');\n\tvar hasIsPrototypeOf = obj.constructor && obj.constructor.prototype && hasOwn.call(obj.constructor.prototype, 'isPrototypeOf');\n\t// Not own constructor property must be Object\n\tif (obj.constructor && !hasOwnConstructor && !hasIsPrototypeOf) {\n\t\treturn false;\n\t}\n\n\t// Own properties are enumerated firstly, so to speed up,\n\t// if last one is own, then all properties are own.\n\tvar key;\n\tfor (key in obj) { /**/ }\n\n\treturn typeof key === 'undefined' || hasOwn.call(obj, key);\n};\n\n// If name is '__proto__', and Object.defineProperty is available, define __proto__ as an own property on target\nvar setProperty = function setProperty(target, options) {\n\tif (defineProperty && options.name === '__proto__') {\n\t\tdefineProperty(target, options.name, {\n\t\t\tenumerable: true,\n\t\t\tconfigurable: true,\n\t\t\tvalue: options.newValue,\n\t\t\twritable: true\n\t\t});\n\t} else {\n\t\ttarget[options.name] = options.newValue;\n\t}\n};\n\n// Return undefined instead of __proto__ if '__proto__' is not an own property\nvar getProperty = function getProperty(obj, name) {\n\tif (name === '__proto__') {\n\t\tif (!hasOwn.call(obj, name)) {\n\t\t\treturn void 0;\n\t\t} else if (gOPD) {\n\t\t\t// In early versions of node, obj['__proto__'] is buggy when obj has\n\t\t\t// __proto__ as an own property. Object.getOwnPropertyDescriptor() works.\n\t\t\treturn gOPD(obj, name).value;\n\t\t}\n\t}\n\n\treturn obj[name];\n};\n\nmodule.exports = function extend() {\n\tvar options, name, src, copy, copyIsArray, clone;\n\tvar target = arguments[0];\n\tvar i = 1;\n\tvar length = arguments.length;\n\tvar deep = false;\n\n\t// Handle a deep copy situation\n\tif (typeof target === 'boolean') {\n\t\tdeep = target;\n\t\ttarget = arguments[1] || {};\n\t\t// skip the boolean and the target\n\t\ti = 2;\n\t}\n\tif (target == null || (typeof target !== 'object' && typeof target !== 'function')) {\n\t\ttarget = {};\n\t}\n\n\tfor (; i < length; ++i) {\n\t\toptions = arguments[i];\n\t\t// Only deal with non-null/undefined values\n\t\tif (options != null) {\n\t\t\t// Extend the base object\n\t\t\tfor (name in options) {\n\t\t\t\tsrc = getProperty(target, name);\n\t\t\t\tcopy = getProperty(options, name);\n\n\t\t\t\t// Prevent never-ending loop\n\t\t\t\tif (target !== copy) {\n\t\t\t\t\t// Recurse if we're merging plain objects or arrays\n\t\t\t\t\tif (deep && copy && (isPlainObject(copy) || (copyIsArray = isArray(copy)))) {\n\t\t\t\t\t\tif (copyIsArray) {\n\t\t\t\t\t\t\tcopyIsArray = false;\n\t\t\t\t\t\t\tclone = src && isArray(src) ? src : [];\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tclone = src && isPlainObject(src) ? src : {};\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Never move original objects, clone them\n\t\t\t\t\t\tsetProperty(target, { name: name, newValue: extend(deep, clone, copy) });\n\n\t\t\t\t\t// Don't bring in undefined values\n\t\t\t\t\t} else if (typeof copy !== 'undefined') {\n\t\t\t\t\t\tsetProperty(target, { name: name, newValue: copy });\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t// Return the modified object\n\treturn target;\n};\n","import { TextBlot } from 'parchment';\r\n\r\nclass Text extends TextBlot {}\r\n\r\nfunction escapeText(text) {\r\n  return text.replace(/[&<>\"']/g, s => {\r\n    // https://lodash.com/docs#escape\r\n    const entityMap = {\r\n      '&': '&amp;',\r\n      '<': '&lt;',\r\n      '>': '&gt;',\r\n      '\"': '&quot;',\r\n      \"'\": '&#39;',\r\n    };\r\n    return entityMap[s];\r\n  });\r\n}\r\n\r\nexport { Text as default, escapeText };\r\n","class Module {\r\n  constructor(quill, options = {}) {\r\n    this.quill = quill;\r\n    this.options = options;\r\n  }\r\n}\r\nModule.DEFAULTS = {};\r\n\r\nexport default Module;\r\n","import EventEmitter from 'eventemitter3';\r\nimport instances from './instances';\r\nimport logger from './logger';\r\n\r\nconst debug = logger('quill:events');\r\nconst EVENTS = ['selectionchange', 'mousedown', 'mouseup', 'click'];\r\n\r\nEVENTS.forEach(eventName => {\r\n  document.addEventListener(eventName, (...args) => {\r\n    Array.from(document.querySelectorAll('.ql-container')).forEach(node => {\r\n      const quill = instances.get(node);\r\n      if (quill && quill.emitter) {\r\n        quill.emitter.handleDOM(...args);\r\n      }\r\n    });\r\n  });\r\n});\r\n\r\nclass Emitter extends EventEmitter {\r\n  constructor() {\r\n    super();\r\n    this.listeners = {};\r\n    this.on('error', debug.error);\r\n  }\r\n\r\n  emit(...args) {\r\n    debug.log.call(debug, ...args);\r\n    super.emit(...args);\r\n  }\r\n\r\n  handleDOM(event, ...args) {\r\n    (this.listeners[event.type] || []).forEach(({ node, handler }) => {\r\n      if (event.target === node || node.contains(event.target)) {\r\n        handler(event, ...args);\r\n      }\r\n    });\r\n  }\r\n\r\n  listenDOM(eventName, node, handler) {\r\n    if (!this.listeners[eventName]) {\r\n      this.listeners[eventName] = [];\r\n    }\r\n    this.listeners[eventName].push({ node, handler });\r\n  }\r\n}\r\n\r\nEmitter.events = {\r\n  EDITOR_CHANGE: 'editor-change',\r\n  SCROLL_BEFORE_UPDATE: 'scroll-before-update',\r\n  SCROLL_BLOT_MOUNT: 'scroll-blot-mount',\r\n  SCROLL_BLOT_UNMOUNT: 'scroll-blot-unmount',\r\n  SCROLL_OPTIMIZE: 'scroll-optimize',\r\n  SCROLL_UPDATE: 'scroll-update',\r\n  SELECTION_CHANGE: 'selection-change',\r\n  TEXT_CHANGE: 'text-change',\r\n};\r\nEmitter.sources = {\r\n  API: 'api',\r\n  SILENT: 'silent',\r\n  USER: 'user',\r\n};\r\n\r\nexport default Emitter;\r\n","import { EmbedBlot } from 'parchment';\r\n\r\nclass Break extends EmbedBlot {\r\n  static value() {\r\n    return undefined;\r\n  }\r\n\r\n  optimize() {\r\n    if (this.prev || this.next) {\r\n      this.remove();\r\n    }\r\n  }\r\n\r\n  length() {\r\n    return 0;\r\n  }\r\n\r\n  value() {\r\n    return '';\r\n  }\r\n}\r\nBreak.blotName = 'break';\r\nBreak.tagName = 'BR';\r\n\r\nexport default Break;\r\n","const levels = ['error', 'warn', 'log', 'info'];\r\nlet level = 'warn';\r\n\r\nfunction debug(method, ...args) {\r\n  if (levels.indexOf(method) <= levels.indexOf(level)) {\r\n    console[method](...args); // eslint-disable-line no-console\r\n  }\r\n}\r\n\r\nfunction namespace(ns) {\r\n  return levels.reduce((logger, method) => {\r\n    logger[method] = debug.bind(console, method, ns);\r\n    return logger;\r\n  }, {});\r\n}\r\n\r\nnamespace.level = newLevel => {\r\n  level = newLevel;\r\n};\r\ndebug.level = namespace.level;\r\n\r\nexport default namespace;\r\n","var pSlice = Array.prototype.slice;\nvar objectKeys = require('./lib/keys.js');\nvar isArguments = require('./lib/is_arguments.js');\n\nvar deepEqual = module.exports = function (actual, expected, opts) {\n  if (!opts) opts = {};\n  // 7.1. All identical values are equivalent, as determined by ===.\n  if (actual === expected) {\n    return true;\n\n  } else if (actual instanceof Date && expected instanceof Date) {\n    return actual.getTime() === expected.getTime();\n\n  // 7.3. Other pairs that do not both pass typeof value == 'object',\n  // equivalence is determined by ==.\n  } else if (!actual || !expected || typeof actual != 'object' && typeof expected != 'object') {\n    return opts.strict ? actual === expected : actual == expected;\n\n  // 7.4. For all other Object pairs, including Array objects, equivalence is\n  // determined by having the same number of owned properties (as verified\n  // with Object.prototype.hasOwnProperty.call), the same set of keys\n  // (although not necessarily the same order), equivalent values for every\n  // corresponding key, and an identical 'prototype' property. Note: this\n  // accounts for both named and indexed properties on Arrays.\n  } else {\n    return objEquiv(actual, expected, opts);\n  }\n}\n\nfunction isUndefinedOrNull(value) {\n  return value === null || value === undefined;\n}\n\nfunction isBuffer (x) {\n  if (!x || typeof x !== 'object' || typeof x.length !== 'number') return false;\n  if (typeof x.copy !== 'function' || typeof x.slice !== 'function') {\n    return false;\n  }\n  if (x.length > 0 && typeof x[0] !== 'number') return false;\n  return true;\n}\n\nfunction objEquiv(a, b, opts) {\n  var i, key;\n  if (isUndefinedOrNull(a) || isUndefinedOrNull(b))\n    return false;\n  // an identical 'prototype' property.\n  if (a.prototype !== b.prototype) return false;\n  //~~~I've managed to break Object.keys through screwy arguments passing.\n  //   Converting to array solves the problem.\n  if (isArguments(a)) {\n    if (!isArguments(b)) {\n      return false;\n    }\n    a = pSlice.call(a);\n    b = pSlice.call(b);\n    return deepEqual(a, b, opts);\n  }\n  if (isBuffer(a)) {\n    if (!isBuffer(b)) {\n      return false;\n    }\n    if (a.length !== b.length) return false;\n    for (i = 0; i < a.length; i++) {\n      if (a[i] !== b[i]) return false;\n    }\n    return true;\n  }\n  try {\n    var ka = objectKeys(a),\n        kb = objectKeys(b);\n  } catch (e) {//happens when one is a string literal and the other isn't\n    return false;\n  }\n  // having the same number of owned properties (keys incorporates\n  // hasOwnProperty)\n  if (ka.length != kb.length)\n    return false;\n  //the same set of keys (although not necessarily the same order),\n  ka.sort();\n  kb.sort();\n  //~~~cheap key test\n  for (i = ka.length - 1; i >= 0; i--) {\n    if (ka[i] != kb[i])\n      return false;\n  }\n  //equivalent values for every corresponding key, and\n  //~~~possibly expensive deep test\n  for (i = ka.length - 1; i >= 0; i--) {\n    key = ka[i];\n    if (!deepEqual(a[key], b[key], opts)) return false;\n  }\n  return typeof a === typeof b;\n}\n","import { ContainerBlot } from 'parchment';\r\n\r\nclass Container extends ContainerBlot {}\r\n\r\nexport default Container;\r\n","var equal = require('deep-equal');\nvar extend = require('extend');\n\n\nvar lib = {\n  attributes: {\n    compose: function (a, b, keepNull) {\n      if (typeof a !== 'object') a = {};\n      if (typeof b !== 'object') b = {};\n      var attributes = extend(true, {}, b);\n      if (!keepNull) {\n        attributes = Object.keys(attributes).reduce(function (copy, key) {\n          if (attributes[key] != null) {\n            copy[key] = attributes[key];\n          }\n          return copy;\n        }, {});\n      }\n      for (var key in a) {\n        if (a[key] !== undefined && b[key] === undefined) {\n          attributes[key] = a[key];\n        }\n      }\n      return Object.keys(attributes).length > 0 ? attributes : undefined;\n    },\n\n    diff: function(a, b) {\n      if (typeof a !== 'object') a = {};\n      if (typeof b !== 'object') b = {};\n      var attributes = Object.keys(a).concat(Object.keys(b)).reduce(function (attributes, key) {\n        if (!equal(a[key], b[key])) {\n          attributes[key] = b[key] === undefined ? null : b[key];\n        }\n        return attributes;\n      }, {});\n      return Object.keys(attributes).length > 0 ? attributes : undefined;\n    },\n\n    transform: function (a, b, priority) {\n      if (typeof a !== 'object') return b;\n      if (typeof b !== 'object') return undefined;\n      if (!priority) return b;  // b simply overwrites us without priority\n      var attributes = Object.keys(b).reduce(function (attributes, key) {\n        if (a[key] === undefined) attributes[key] = b[key];  // null is a valid value\n        return attributes;\n      }, {});\n      return Object.keys(attributes).length > 0 ? attributes : undefined;\n    }\n  },\n\n  iterator: function (ops) {\n    return new Iterator(ops);\n  },\n\n  length: function (op) {\n    if (typeof op['delete'] === 'number') {\n      return op['delete'];\n    } else if (typeof op.retain === 'number') {\n      return op.retain;\n    } else {\n      return typeof op.insert === 'string' ? op.insert.length : 1;\n    }\n  }\n};\n\n\nfunction Iterator(ops) {\n  this.ops = ops;\n  this.index = 0;\n  this.offset = 0;\n};\n\nIterator.prototype.hasNext = function () {\n  return this.peekLength() < Infinity;\n};\n\nIterator.prototype.next = function (length) {\n  if (!length) length = Infinity;\n  var nextOp = this.ops[this.index];\n  if (nextOp) {\n    var offset = this.offset;\n    var opLength = lib.length(nextOp)\n    if (length >= opLength - offset) {\n      length = opLength - offset;\n      this.index += 1;\n      this.offset = 0;\n    } else {\n      this.offset += length;\n    }\n    if (typeof nextOp['delete'] === 'number') {\n      return { 'delete': length };\n    } else {\n      var retOp = {};\n      if (nextOp.attributes) {\n        retOp.attributes = nextOp.attributes;\n      }\n      if (typeof nextOp.retain === 'number') {\n        retOp.retain = length;\n      } else if (typeof nextOp.insert === 'string') {\n        retOp.insert = nextOp.insert.substr(offset, length);\n      } else {\n        // offset should === 0, length should === 1\n        retOp.insert = nextOp.insert;\n      }\n      return retOp;\n    }\n  } else {\n    return { retain: Infinity };\n  }\n};\n\nIterator.prototype.peek = function () {\n  return this.ops[this.index];\n};\n\nIterator.prototype.peekLength = function () {\n  if (this.ops[this.index]) {\n    // Should never return 0 if our index is being managed correctly\n    return lib.length(this.ops[this.index]) - this.offset;\n  } else {\n    return Infinity;\n  }\n};\n\nIterator.prototype.peekType = function () {\n  if (this.ops[this.index]) {\n    if (typeof this.ops[this.index]['delete'] === 'number') {\n      return 'delete';\n    } else if (typeof this.ops[this.index].retain === 'number') {\n      return 'retain';\n    } else {\n      return 'insert';\n    }\n  }\n  return 'retain';\n};\n\nIterator.prototype.rest = function () {\n  if (!this.hasNext()) {\n    return [];\n  } else if (this.offset === 0) {\n    return this.ops.slice(this.index);\n  } else {\n    var offset = this.offset;\n    var index = this.index;\n    var next = this.next();\n    var rest = this.ops.slice(this.index);\n    this.offset = offset;\n    this.index = index;\n    return [next].concat(rest);\n  }\n};\n\n\nmodule.exports = lib;\n","import { ContainerBlot, LeafBlot, Scope } from 'parchment';\r\nimport clone from 'clone';\r\nimport equal from 'deep-equal';\r\nimport Emitter from './emitter';\r\nimport logger from './logger';\r\n\r\nconst debug = logger('quill:selection');\r\n\r\nclass Range {\r\n  constructor(index, length = 0) {\r\n    this.index = index;\r\n    this.length = length;\r\n  }\r\n}\r\n\r\nclass Selection {\r\n  constructor(scroll, emitter) {\r\n    this.emitter = emitter;\r\n    this.scroll = scroll;\r\n    this.composing = false;\r\n    this.mouseDown = false;\r\n    this.root = this.scroll.domNode;\r\n    this.cursor = this.scroll.create('cursor', this);\r\n    // savedRange is last non-null range\r\n    this.savedRange = new Range(0, 0);\r\n    this.lastRange = this.savedRange;\r\n    this.handleComposition();\r\n    this.handleDragging();\r\n    this.emitter.listenDOM('selectionchange', document, () => {\r\n      if (!this.mouseDown) {\r\n        setTimeout(this.update.bind(this, Emitter.sources.USER), 1);\r\n      }\r\n    });\r\n    this.emitter.on(Emitter.events.SCROLL_BEFORE_UPDATE, () => {\r\n      if (!this.hasFocus()) return;\r\n      const native = this.getNativeRange();\r\n      if (native == null) return;\r\n      if (native.start.node === this.cursor.textNode) return; // cursor.restore() will handle\r\n      this.emitter.once(Emitter.events.SCROLL_UPDATE, () => {\r\n        try {\r\n          if (\r\n            this.root.contains(native.start.node) &&\r\n            this.root.contains(native.end.node)\r\n          ) {\r\n            this.setNativeRange(\r\n              native.start.node,\r\n              native.start.offset,\r\n              native.end.node,\r\n              native.end.offset,\r\n            );\r\n          }\r\n          this.update(Emitter.sources.SILENT);\r\n        } catch (ignored) {\r\n          // ignore\r\n        }\r\n      });\r\n    });\r\n    this.emitter.on(Emitter.events.SCROLL_OPTIMIZE, (mutations, context) => {\r\n      if (context.range) {\r\n        const { startNode, startOffset, endNode, endOffset } = context.range;\r\n        this.setNativeRange(startNode, startOffset, endNode, endOffset);\r\n        this.update(Emitter.sources.SILENT);\r\n      }\r\n    });\r\n    this.update(Emitter.sources.SILENT);\r\n  }\r\n\r\n  handleComposition() {\r\n    this.root.addEventListener('compositionstart', () => {\r\n      this.composing = true;\r\n    });\r\n    this.root.addEventListener('compositionend', () => {\r\n      this.composing = false;\r\n      if (this.cursor.parent) {\r\n        const range = this.cursor.restore();\r\n        if (!range) return;\r\n        setTimeout(() => {\r\n          this.setNativeRange(\r\n            range.startNode,\r\n            range.startOffset,\r\n            range.endNode,\r\n            range.endOffset,\r\n          );\r\n        }, 1);\r\n      }\r\n    });\r\n  }\r\n\r\n  handleDragging() {\r\n    this.emitter.listenDOM('mousedown', document.body, () => {\r\n      this.mouseDown = true;\r\n    });\r\n    this.emitter.listenDOM('mouseup', document.body, () => {\r\n      this.mouseDown = false;\r\n      this.update(Emitter.sources.USER);\r\n    });\r\n  }\r\n\r\n  focus() {\r\n    if (this.hasFocus()) return;\r\n    this.root.focus();\r\n    this.setRange(this.savedRange);\r\n  }\r\n\r\n  format(format, value) {\r\n    this.scroll.update();\r\n    const nativeRange = this.getNativeRange();\r\n    if (\r\n      nativeRange == null ||\r\n      !nativeRange.native.collapsed ||\r\n      this.scroll.query(format, Scope.BLOCK)\r\n    )\r\n      return;\r\n    if (nativeRange.start.node !== this.cursor.textNode) {\r\n      const blot = this.scroll.find(nativeRange.start.node, false);\r\n      if (blot == null) return;\r\n      // TODO Give blot ability to not split\r\n      if (blot instanceof LeafBlot) {\r\n        const after = blot.split(nativeRange.start.offset);\r\n        blot.parent.insertBefore(this.cursor, after);\r\n      } else {\r\n        blot.insertBefore(this.cursor, nativeRange.start.node); // Should never happen\r\n      }\r\n      this.cursor.attach();\r\n    }\r\n    this.cursor.format(format, value);\r\n    this.scroll.optimize();\r\n    this.setNativeRange(this.cursor.textNode, this.cursor.textNode.data.length);\r\n    this.update();\r\n  }\r\n\r\n  getBounds(index, length = 0) {\r\n    const scrollLength = this.scroll.length();\r\n    index = Math.min(index, scrollLength - 1);\r\n    length = Math.min(index + length, scrollLength - 1) - index;\r\n    let node;\r\n    let [leaf, offset] = this.scroll.leaf(index);\r\n    if (leaf == null) return null;\r\n    [node, offset] = leaf.position(offset, true);\r\n    const range = document.createRange();\r\n    if (length > 0) {\r\n      range.setStart(node, offset);\r\n      [leaf, offset] = this.scroll.leaf(index + length);\r\n      if (leaf == null) return null;\r\n      [node, offset] = leaf.position(offset, true);\r\n      range.setEnd(node, offset);\r\n      return range.getBoundingClientRect();\r\n    }\r\n    let side = 'left';\r\n    let rect;\r\n    if (node instanceof Text) {\r\n      if (offset < node.data.length) {\r\n        range.setStart(node, offset);\r\n        range.setEnd(node, offset + 1);\r\n      } else {\r\n        range.setStart(node, offset - 1);\r\n        range.setEnd(node, offset);\r\n        side = 'right';\r\n      }\r\n      rect = range.getBoundingClientRect();\r\n    } else {\r\n      rect = leaf.domNode.getBoundingClientRect();\r\n      if (offset > 0) side = 'right';\r\n    }\r\n    return {\r\n      bottom: rect.top + rect.height,\r\n      height: rect.height,\r\n      left: rect[side],\r\n      right: rect[side],\r\n      top: rect.top,\r\n      width: 0,\r\n    };\r\n  }\r\n\r\n  getNativeRange() {\r\n    const selection = document.getSelection();\r\n    if (selection == null || selection.rangeCount <= 0) return null;\r\n    const nativeRange = selection.getRangeAt(0);\r\n    if (nativeRange == null) return null;\r\n    const range = this.normalizeNative(nativeRange);\r\n    debug.info('getNativeRange', range);\r\n    return range;\r\n  }\r\n\r\n  getRange() {\r\n    const normalized = this.getNativeRange();\r\n    if (normalized == null) return [null, null];\r\n    const range = this.normalizedToRange(normalized);\r\n    return [range, normalized];\r\n  }\r\n\r\n  hasFocus() {\r\n    return (\r\n      document.activeElement === this.root ||\r\n      contains(this.root, document.activeElement)\r\n    );\r\n  }\r\n\r\n  normalizedToRange(range) {\r\n    const positions = [[range.start.node, range.start.offset]];\r\n    if (!range.native.collapsed) {\r\n      positions.push([range.end.node, range.end.offset]);\r\n    }\r\n    const indexes = positions.map(position => {\r\n      const [node, offset] = position;\r\n      const blot = this.scroll.find(node, true);\r\n      const index = blot.offset(this.scroll);\r\n      if (offset === 0) {\r\n        return index;\r\n      }\r\n      if (blot instanceof ContainerBlot) {\r\n        return index + blot.length();\r\n      }\r\n      return index + blot.index(node, offset);\r\n    });\r\n    const end = Math.min(Math.max(...indexes), this.scroll.length() - 1);\r\n    const start = Math.min(end, ...indexes);\r\n    return new Range(start, end - start);\r\n  }\r\n\r\n  normalizeNative(nativeRange) {\r\n    if (\r\n      !contains(this.root, nativeRange.startContainer) ||\r\n      (!nativeRange.collapsed && !contains(this.root, nativeRange.endContainer))\r\n    ) {\r\n      return null;\r\n    }\r\n    const range = {\r\n      start: {\r\n        node: nativeRange.startContainer,\r\n        offset: nativeRange.startOffset,\r\n      },\r\n      end: { node: nativeRange.endContainer, offset: nativeRange.endOffset },\r\n      native: nativeRange,\r\n    };\r\n    [range.start, range.end].forEach(position => {\r\n      let { node, offset } = position;\r\n      while (!(node instanceof Text) && node.childNodes.length > 0) {\r\n        if (node.childNodes.length > offset) {\r\n          node = node.childNodes[offset];\r\n          offset = 0;\r\n        } else if (node.childNodes.length === offset) {\r\n          node = node.lastChild;\r\n          if (node instanceof Text) {\r\n            offset = node.data.length;\r\n          } else if (node.childNodes.length > 0) {\r\n            // Container case\r\n            offset = node.childNodes.length;\r\n          } else {\r\n            // Embed case\r\n            offset = node.childNodes.length + 1;\r\n          }\r\n        } else {\r\n          break;\r\n        }\r\n      }\r\n      position.node = node;\r\n      position.offset = offset;\r\n    });\r\n    return range;\r\n  }\r\n\r\n  rangeToNative(range) {\r\n    const indexes = range.collapsed\r\n      ? [range.index]\r\n      : [range.index, range.index + range.length];\r\n    const args = [];\r\n    const scrollLength = this.scroll.length();\r\n    indexes.forEach((index, i) => {\r\n      index = Math.min(scrollLength - 1, index);\r\n      const [leaf, leafOffset] = this.scroll.leaf(index);\r\n      const [node, offset] = leaf.position(leafOffset, i !== 0);\r\n      args.push(node, offset);\r\n    });\r\n    if (args.length < 2) {\r\n      return args.concat(args);\r\n    }\r\n    return args;\r\n  }\r\n\r\n  scrollIntoView(scrollingContainer) {\r\n    const range = this.lastRange;\r\n    if (range == null) return;\r\n    const bounds = this.getBounds(range.index, range.length);\r\n    if (bounds == null) return;\r\n    const limit = this.scroll.length() - 1;\r\n    const [first] = this.scroll.line(Math.min(range.index, limit));\r\n    let last = first;\r\n    if (range.length > 0) {\r\n      [last] = this.scroll.line(Math.min(range.index + range.length, limit));\r\n    }\r\n    if (first == null || last == null) return;\r\n    const scrollBounds = scrollingContainer.getBoundingClientRect();\r\n    if (bounds.top < scrollBounds.top) {\r\n      scrollingContainer.scrollTop -= scrollBounds.top - bounds.top;\r\n    } else if (bounds.bottom > scrollBounds.bottom) {\r\n      scrollingContainer.scrollTop += bounds.bottom - scrollBounds.bottom;\r\n    }\r\n  }\r\n\r\n  setNativeRange(\r\n    startNode,\r\n    startOffset,\r\n    endNode = startNode,\r\n    endOffset = startOffset,\r\n    force = false,\r\n  ) {\r\n    debug.info('setNativeRange', startNode, startOffset, endNode, endOffset);\r\n    if (\r\n      startNode != null &&\r\n      (this.root.parentNode == null ||\r\n        startNode.parentNode == null ||\r\n        endNode.parentNode == null)\r\n    ) {\r\n      return;\r\n    }\r\n    const selection = document.getSelection();\r\n    if (selection == null) return;\r\n    if (startNode != null) {\r\n      if (!this.hasFocus()) this.root.focus();\r\n      const { native } = this.getNativeRange() || {};\r\n      if (\r\n        native == null ||\r\n        force ||\r\n        startNode !== native.startContainer ||\r\n        startOffset !== native.startOffset ||\r\n        endNode !== native.endContainer ||\r\n        endOffset !== native.endOffset\r\n      ) {\r\n        if (startNode.tagName === 'BR') {\r\n          startOffset = Array.from(startNode.parentNode.childNodes).indexOf(\r\n            startNode,\r\n          );\r\n          startNode = startNode.parentNode;\r\n        }\r\n        if (endNode.tagName === 'BR') {\r\n          endOffset = Array.from(endNode.parentNode.childNodes).indexOf(\r\n            endNode,\r\n          );\r\n          endNode = endNode.parentNode;\r\n        }\r\n        const range = document.createRange();\r\n        range.setStart(startNode, startOffset);\r\n        range.setEnd(endNode, endOffset);\r\n        selection.removeAllRanges();\r\n        selection.addRange(range);\r\n      }\r\n    } else {\r\n      selection.removeAllRanges();\r\n      this.root.blur();\r\n    }\r\n  }\r\n\r\n  setRange(range, force = false, source = Emitter.sources.API) {\r\n    if (typeof force === 'string') {\r\n      source = force;\r\n      force = false;\r\n    }\r\n    debug.info('setRange', range);\r\n    if (range != null) {\r\n      const args = this.rangeToNative(range);\r\n      this.setNativeRange(...args, force);\r\n    } else {\r\n      this.setNativeRange(null);\r\n    }\r\n    this.update(source);\r\n  }\r\n\r\n  update(source = Emitter.sources.USER) {\r\n    const oldRange = this.lastRange;\r\n    const [lastRange, nativeRange] = this.getRange();\r\n    this.lastRange = lastRange;\r\n    if (this.lastRange != null) {\r\n      this.savedRange = this.lastRange;\r\n    }\r\n    if (!equal(oldRange, this.lastRange)) {\r\n      if (\r\n        !this.composing &&\r\n        nativeRange != null &&\r\n        nativeRange.native.collapsed &&\r\n        nativeRange.start.node !== this.cursor.textNode\r\n      ) {\r\n        this.cursor.restore();\r\n      }\r\n      const args = [\r\n        Emitter.events.SELECTION_CHANGE,\r\n        clone(this.lastRange),\r\n        clone(oldRange),\r\n        source,\r\n      ];\r\n      this.emitter.emit(Emitter.events.EDITOR_CHANGE, ...args);\r\n      if (source !== Emitter.sources.SILENT) {\r\n        this.emitter.emit(...args);\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nfunction contains(parent, descendant) {\r\n  try {\r\n    // Firefox inserts inaccessible nodes around video elements\r\n    descendant.parentNode; // eslint-disable-line no-unused-expressions\r\n  } catch (e) {\r\n    return false;\r\n  }\r\n  return parent.contains(descendant);\r\n}\r\n\r\nexport { Range, Selection as default };\r\n","import { EmbedBlot, Scope } from 'parchment';\r\nimport TextBlot from './text';\r\n\r\nclass Cursor extends EmbedBlot {\r\n  static value() {\r\n    return undefined;\r\n  }\r\n\r\n  constructor(scroll, domNode, selection) {\r\n    super(scroll, domNode);\r\n    this.selection = selection;\r\n    this.textNode = document.createTextNode(Cursor.CONTENTS);\r\n    this.domNode.appendChild(this.textNode);\r\n    this.savedLength = 0;\r\n  }\r\n\r\n  detach() {\r\n    // super.detach() will also clear domNode.__blot\r\n    if (this.parent != null) this.parent.removeChild(this);\r\n  }\r\n\r\n  format(name, value) {\r\n    if (this.savedLength !== 0) {\r\n      super.format(name, value);\r\n      return;\r\n    }\r\n    let target = this;\r\n    let index = 0;\r\n    while (target != null && target.statics.scope !== Scope.BLOCK_BLOT) {\r\n      index += target.offset(target.parent);\r\n      target = target.parent;\r\n    }\r\n    if (target != null) {\r\n      this.savedLength = Cursor.CONTENTS.length;\r\n      target.optimize();\r\n      target.formatAt(index, Cursor.CONTENTS.length, name, value);\r\n      this.savedLength = 0;\r\n    }\r\n  }\r\n\r\n  index(node, offset) {\r\n    if (node === this.textNode) return 0;\r\n    return super.index(node, offset);\r\n  }\r\n\r\n  length() {\r\n    return this.savedLength;\r\n  }\r\n\r\n  position() {\r\n    return [this.textNode, this.textNode.data.length];\r\n  }\r\n\r\n  remove() {\r\n    super.remove();\r\n    this.parent = null;\r\n  }\r\n\r\n  restore() {\r\n    if (this.selection.composing || this.parent == null) return null;\r\n    const range = this.selection.getNativeRange();\r\n    let restoreText;\r\n    let start;\r\n    let end;\r\n    if (\r\n      range != null &&\r\n      range.start.node === this.textNode &&\r\n      range.end.node === this.textNode\r\n    ) {\r\n      [restoreText, start, end] = [\r\n        this.textNode,\r\n        range.start.offset,\r\n        range.end.offset,\r\n      ];\r\n    }\r\n    // Link format will insert text outside of anchor tag\r\n    while (\r\n      this.domNode.lastChild != null &&\r\n      this.domNode.lastChild !== this.textNode\r\n    ) {\r\n      this.domNode.parentNode.insertBefore(\r\n        this.domNode.lastChild,\r\n        this.domNode,\r\n      );\r\n    }\r\n    if (this.textNode.data !== Cursor.CONTENTS) {\r\n      const text = this.textNode.data.split(Cursor.CONTENTS).join('');\r\n      if (this.next instanceof TextBlot) {\r\n        restoreText = this.next.domNode;\r\n        this.next.insertAt(0, text);\r\n        this.textNode.data = Cursor.CONTENTS;\r\n      } else {\r\n        this.textNode.data = text;\r\n        this.parent.insertBefore(this.scroll.create(this.textNode), this);\r\n        this.textNode = document.createTextNode(Cursor.CONTENTS);\r\n        this.domNode.appendChild(this.textNode);\r\n      }\r\n    }\r\n    this.remove();\r\n    if (start != null) {\r\n      [start, end] = [start, end].map(offset => {\r\n        return Math.max(0, Math.min(restoreText.data.length, offset - 1));\r\n      });\r\n      return {\r\n        startNode: restoreText,\r\n        startOffset: start,\r\n        endNode: restoreText,\r\n        endOffset: end,\r\n      };\r\n    }\r\n    return null;\r\n  }\r\n\r\n  update(mutations, context) {\r\n    if (\r\n      mutations.some(mutation => {\r\n        return (\r\n          mutation.type === 'characterData' && mutation.target === this.textNode\r\n        );\r\n      })\r\n    ) {\r\n      const range = this.restore();\r\n      if (range) context.range = range;\r\n    }\r\n  }\r\n\r\n  value() {\r\n    return '';\r\n  }\r\n}\r\nCursor.blotName = 'cursor';\r\nCursor.className = 'ql-cursor';\r\nCursor.tagName = 'span';\r\nCursor.CONTENTS = '\\uFEFF'; // Zero width no break space\r\n\r\nexport default Cursor;\r\n","import Inline from '../blots/inline';\r\n\r\nclass Link extends Inline {\r\n  static create(value) {\r\n    const node = super.create(value);\r\n    node.setAttribute('href', this.sanitize(value));\r\n    node.setAttribute('target', '_blank');\r\n    return node;\r\n  }\r\n\r\n  static formats(domNode) {\r\n    return domNode.getAttribute('href');\r\n  }\r\n\r\n  static sanitize(url) {\r\n    return sanitize(url, this.PROTOCOL_WHITELIST) ? url : this.SANITIZED_URL;\r\n  }\r\n\r\n  format(name, value) {\r\n    if (name !== this.statics.blotName || !value) {\r\n      super.format(name, value);\r\n    } else {\r\n      this.domNode.setAttribute('href', this.constructor.sanitize(value));\r\n    }\r\n  }\r\n}\r\nLink.blotName = 'link';\r\nLink.tagName = 'A';\r\nLink.SANITIZED_URL = 'about:blank';\r\nLink.PROTOCOL_WHITELIST = ['http', 'https', 'mailto', 'tel'];\r\n\r\nfunction sanitize(url, protocols) {\r\n  const anchor = document.createElement('a');\r\n  anchor.href = url;\r\n  const protocol = anchor.href.slice(0, anchor.href.indexOf(':'));\r\n  return protocols.indexOf(protocol) > -1;\r\n}\r\n\r\nexport { Link as default, sanitize };\r\n","import DropdownIcon from '../assets/icons/dropdown.svg';\r\n\r\nlet optionsCounter = 0;\r\n\r\nfunction toggleAriaAttribute(element, attribute) {\r\n  element.setAttribute(\r\n    attribute,\r\n    !(element.getAttribute(attribute) === 'true'),\r\n  );\r\n}\r\n\r\nclass Picker {\r\n  constructor(select) {\r\n    this.select = select;\r\n    this.container = document.createElement('span');\r\n    this.buildPicker();\r\n    this.select.style.display = 'none';\r\n    this.select.parentNode.insertBefore(this.container, this.select);\r\n\r\n    this.label.addEventListener('mousedown', () => {\r\n      this.togglePicker();\r\n    });\r\n    this.label.addEventListener('keydown', event => {\r\n      switch (event.key) {\r\n        case 'Enter':\r\n          this.togglePicker();\r\n          break;\r\n        case 'Escape':\r\n          this.escape();\r\n          event.preventDefault();\r\n          break;\r\n        default:\r\n      }\r\n    });\r\n    this.select.addEventListener('change', this.update.bind(this));\r\n  }\r\n\r\n  togglePicker() {\r\n    this.container.classList.toggle('ql-expanded');\r\n    // Toggle aria-expanded and aria-hidden to make the picker accessible\r\n    toggleAriaAttribute(this.label, 'aria-expanded');\r\n    toggleAriaAttribute(this.options, 'aria-hidden');\r\n  }\r\n\r\n  buildItem(option) {\r\n    const item = document.createElement('span');\r\n    item.tabIndex = '0';\r\n    item.setAttribute('role', 'button');\r\n    item.classList.add('ql-picker-item');\r\n    if (option.hasAttribute('value')) {\r\n      item.setAttribute('data-value', option.getAttribute('value'));\r\n    }\r\n    if (option.textContent) {\r\n      item.setAttribute('data-label', option.textContent);\r\n    }\r\n    item.addEventListener('click', () => {\r\n      this.selectItem(item, true);\r\n    });\r\n    item.addEventListener('keydown', event => {\r\n      switch (event.key) {\r\n        case 'Enter':\r\n          this.selectItem(item, true);\r\n          event.preventDefault();\r\n          break;\r\n        case 'Escape':\r\n          this.escape();\r\n          event.preventDefault();\r\n          break;\r\n        default:\r\n      }\r\n    });\r\n\r\n    return item;\r\n  }\r\n\r\n  buildLabel() {\r\n    const label = document.createElement('span');\r\n    label.classList.add('ql-picker-label');\r\n    label.innerHTML = DropdownIcon;\r\n    label.tabIndex = '0';\r\n    label.setAttribute('role', 'button');\r\n    label.setAttribute('aria-expanded', 'false');\r\n    this.container.appendChild(label);\r\n    return label;\r\n  }\r\n\r\n  buildOptions() {\r\n    const options = document.createElement('span');\r\n    options.classList.add('ql-picker-options');\r\n\r\n    // Don't want screen readers to read this until options are visible\r\n    options.setAttribute('aria-hidden', 'true');\r\n    options.tabIndex = '-1';\r\n\r\n    // Need a unique id for aria-controls\r\n    options.id = `ql-picker-options-${optionsCounter}`;\r\n    optionsCounter += 1;\r\n    this.label.setAttribute('aria-controls', options.id);\r\n\r\n    this.options = options;\r\n\r\n    Array.from(this.select.options).forEach(option => {\r\n      const item = this.buildItem(option);\r\n      options.appendChild(item);\r\n      if (option.selected === true) {\r\n        this.selectItem(item);\r\n      }\r\n    });\r\n    this.container.appendChild(options);\r\n  }\r\n\r\n  buildPicker() {\r\n    Array.from(this.select.attributes).forEach(item => {\r\n      this.container.setAttribute(item.name, item.value);\r\n    });\r\n    this.container.classList.add('ql-picker');\r\n    this.label = this.buildLabel();\r\n    this.buildOptions();\r\n  }\r\n\r\n  escape() {\r\n    // Close menu and return focus to trigger label\r\n    this.close();\r\n    // Need setTimeout for accessibility to ensure that the browser executes\r\n    // focus on the next process thread and after any DOM content changes\r\n    setTimeout(() => this.label.focus(), 1);\r\n  }\r\n\r\n  close() {\r\n    this.container.classList.remove('ql-expanded');\r\n    this.label.setAttribute('aria-expanded', 'false');\r\n    this.options.setAttribute('aria-hidden', 'true');\r\n  }\r\n\r\n  selectItem(item, trigger = false) {\r\n    const selected = this.container.querySelector('.ql-selected');\r\n    if (item === selected) return;\r\n    if (selected != null) {\r\n      selected.classList.remove('ql-selected');\r\n    }\r\n    if (item == null) return;\r\n    item.classList.add('ql-selected');\r\n    this.select.selectedIndex = Array.from(item.parentNode.children).indexOf(\r\n      item,\r\n    );\r\n    if (item.hasAttribute('data-value')) {\r\n      this.label.setAttribute('data-value', item.getAttribute('data-value'));\r\n    } else {\r\n      this.label.removeAttribute('data-value');\r\n    }\r\n    if (item.hasAttribute('data-label')) {\r\n      this.label.setAttribute('data-label', item.getAttribute('data-label'));\r\n    } else {\r\n      this.label.removeAttribute('data-label');\r\n    }\r\n    if (trigger) {\r\n      this.select.dispatchEvent(new Event('change'));\r\n      this.close();\r\n    }\r\n  }\r\n\r\n  update() {\r\n    let option;\r\n    if (this.select.selectedIndex > -1) {\r\n      const item = this.container.querySelector('.ql-picker-options').children[\r\n        this.select.selectedIndex\r\n      ];\r\n      option = this.select.options[this.select.selectedIndex];\r\n      this.selectItem(item);\r\n    } else {\r\n      this.selectItem(null);\r\n    }\r\n    const isActive =\r\n      option != null &&\r\n      option !== this.select.querySelector('option[selected]');\r\n    this.label.classList.toggle('ql-active', isActive);\r\n  }\r\n}\r\n\r\nexport default Picker;\r\n","var clone = (function() {\n'use strict';\n\nfunction _instanceof(obj, type) {\n  return type != null && obj instanceof type;\n}\n\nvar nativeMap;\ntry {\n  nativeMap = Map;\n} catch(_) {\n  // maybe a reference error because no `Map`. Give it a dummy value that no\n  // value will ever be an instanceof.\n  nativeMap = function() {};\n}\n\nvar nativeSet;\ntry {\n  nativeSet = Set;\n} catch(_) {\n  nativeSet = function() {};\n}\n\nvar nativePromise;\ntry {\n  nativePromise = Promise;\n} catch(_) {\n  nativePromise = function() {};\n}\n\n/**\n * Clones (copies) an Object using deep copying.\n *\n * This function supports circular references by default, but if you are certain\n * there are no circular references in your object, you can save some CPU time\n * by calling clone(obj, false).\n *\n * Caution: if `circular` is false and `parent` contains circular references,\n * your program may enter an infinite loop and crash.\n *\n * @param `parent` - the object to be cloned\n * @param `circular` - set to true if the object to be cloned may contain\n *    circular references. (optional - true by default)\n * @param `depth` - set to a number if the object is only to be cloned to\n *    a particular depth. (optional - defaults to Infinity)\n * @param `prototype` - sets the prototype to be used when cloning an object.\n *    (optional - defaults to parent prototype).\n * @param `includeNonEnumerable` - set to true if the non-enumerable properties\n *    should be cloned as well. Non-enumerable properties on the prototype\n *    chain will be ignored. (optional - false by default)\n*/\nfunction clone(parent, circular, depth, prototype, includeNonEnumerable) {\n  if (typeof circular === 'object') {\n    depth = circular.depth;\n    prototype = circular.prototype;\n    includeNonEnumerable = circular.includeNonEnumerable;\n    circular = circular.circular;\n  }\n  // maintain two arrays for circular references, where corresponding parents\n  // and children have the same index\n  var allParents = [];\n  var allChildren = [];\n\n  var useBuffer = typeof Buffer != 'undefined';\n\n  if (typeof circular == 'undefined')\n    circular = true;\n\n  if (typeof depth == 'undefined')\n    depth = Infinity;\n\n  // recurse this function so we don't reset allParents and allChildren\n  function _clone(parent, depth) {\n    // cloning null always returns null\n    if (parent === null)\n      return null;\n\n    if (depth === 0)\n      return parent;\n\n    var child;\n    var proto;\n    if (typeof parent != 'object') {\n      return parent;\n    }\n\n    if (_instanceof(parent, nativeMap)) {\n      child = new nativeMap();\n    } else if (_instanceof(parent, nativeSet)) {\n      child = new nativeSet();\n    } else if (_instanceof(parent, nativePromise)) {\n      child = new nativePromise(function (resolve, reject) {\n        parent.then(function(value) {\n          resolve(_clone(value, depth - 1));\n        }, function(err) {\n          reject(_clone(err, depth - 1));\n        });\n      });\n    } else if (clone.__isArray(parent)) {\n      child = [];\n    } else if (clone.__isRegExp(parent)) {\n      child = new RegExp(parent.source, __getRegExpFlags(parent));\n      if (parent.lastIndex) child.lastIndex = parent.lastIndex;\n    } else if (clone.__isDate(parent)) {\n      child = new Date(parent.getTime());\n    } else if (useBuffer && Buffer.isBuffer(parent)) {\n      if (Buffer.allocUnsafe) {\n        // Node.js >= 4.5.0\n        child = Buffer.allocUnsafe(parent.length);\n      } else {\n        // Older Node.js versions\n        child = new Buffer(parent.length);\n      }\n      parent.copy(child);\n      return child;\n    } else if (_instanceof(parent, Error)) {\n      child = Object.create(parent);\n    } else {\n      if (typeof prototype == 'undefined') {\n        proto = Object.getPrototypeOf(parent);\n        child = Object.create(proto);\n      }\n      else {\n        child = Object.create(prototype);\n        proto = prototype;\n      }\n    }\n\n    if (circular) {\n      var index = allParents.indexOf(parent);\n\n      if (index != -1) {\n        return allChildren[index];\n      }\n      allParents.push(parent);\n      allChildren.push(child);\n    }\n\n    if (_instanceof(parent, nativeMap)) {\n      parent.forEach(function(value, key) {\n        var keyChild = _clone(key, depth - 1);\n        var valueChild = _clone(value, depth - 1);\n        child.set(keyChild, valueChild);\n      });\n    }\n    if (_instanceof(parent, nativeSet)) {\n      parent.forEach(function(value) {\n        var entryChild = _clone(value, depth - 1);\n        child.add(entryChild);\n      });\n    }\n\n    for (var i in parent) {\n      var attrs;\n      if (proto) {\n        attrs = Object.getOwnPropertyDescriptor(proto, i);\n      }\n\n      if (attrs && attrs.set == null) {\n        continue;\n      }\n      child[i] = _clone(parent[i], depth - 1);\n    }\n\n    if (Object.getOwnPropertySymbols) {\n      var symbols = Object.getOwnPropertySymbols(parent);\n      for (var i = 0; i < symbols.length; i++) {\n        // Don't need to worry about cloning a symbol because it is a primitive,\n        // like a number or string.\n        var symbol = symbols[i];\n        var descriptor = Object.getOwnPropertyDescriptor(parent, symbol);\n        if (descriptor && !descriptor.enumerable && !includeNonEnumerable) {\n          continue;\n        }\n        child[symbol] = _clone(parent[symbol], depth - 1);\n        if (!descriptor.enumerable) {\n          Object.defineProperty(child, symbol, {\n            enumerable: false\n          });\n        }\n      }\n    }\n\n    if (includeNonEnumerable) {\n      var allPropertyNames = Object.getOwnPropertyNames(parent);\n      for (var i = 0; i < allPropertyNames.length; i++) {\n        var propertyName = allPropertyNames[i];\n        var descriptor = Object.getOwnPropertyDescriptor(parent, propertyName);\n        if (descriptor && descriptor.enumerable) {\n          continue;\n        }\n        child[propertyName] = _clone(parent[propertyName], depth - 1);\n        Object.defineProperty(child, propertyName, {\n          enumerable: false\n        });\n      }\n    }\n\n    return child;\n  }\n\n  return _clone(parent, depth);\n}\n\n/**\n * Simple flat clone using prototype, accepts only objects, usefull for property\n * override on FLAT configuration object (no nested props).\n *\n * USE WITH CAUTION! This may not behave as you wish if you do not know how this\n * works.\n */\nclone.clonePrototype = function clonePrototype(parent) {\n  if (parent === null)\n    return null;\n\n  var c = function () {};\n  c.prototype = parent;\n  return new c();\n};\n\n// private utility functions\n\nfunction __objToStr(o) {\n  return Object.prototype.toString.call(o);\n}\nclone.__objToStr = __objToStr;\n\nfunction __isDate(o) {\n  return typeof o === 'object' && __objToStr(o) === '[object Date]';\n}\nclone.__isDate = __isDate;\n\nfunction __isArray(o) {\n  return typeof o === 'object' && __objToStr(o) === '[object Array]';\n}\nclone.__isArray = __isArray;\n\nfunction __isRegExp(o) {\n  return typeof o === 'object' && __objToStr(o) === '[object RegExp]';\n}\nclone.__isRegExp = __isRegExp;\n\nfunction __getRegExpFlags(re) {\n  var flags = '';\n  if (re.global) flags += 'g';\n  if (re.ignoreCase) flags += 'i';\n  if (re.multiline) flags += 'm';\n  return flags;\n}\nclone.__getRegExpFlags = __getRegExpFlags;\n\nreturn clone;\n})();\n\nif (typeof module === 'object' && module.exports) {\n  module.exports = clone;\n}\n","import { ClassAttributor, Scope, StyleAttributor } from 'parchment';\r\n\r\nclass ColorAttributor extends StyleAttributor {\r\n  value(domNode) {\r\n    let value = super.value(domNode);\r\n    if (!value.startsWith('rgb(')) return value;\r\n    value = value.replace(/^[^\\d]+/, '').replace(/[^\\d]+$/, '');\r\n    const hex = value\r\n      .split(',')\r\n      .map(component => `00${parseInt(component, 10).toString(16)}`.slice(-2))\r\n      .join('');\r\n    return `#${hex}`;\r\n  }\r\n}\r\n\r\nconst ColorClass = new ClassAttributor('color', 'ql-color', {\r\n  scope: Scope.INLINE,\r\n});\r\nconst ColorStyle = new ColorAttributor('color', 'color', {\r\n  scope: Scope.INLINE,\r\n});\r\n\r\nexport { ColorAttributor, ColorClass, ColorStyle };\r\n","import Block from '../blots/block';\r\nimport Break from '../blots/break';\r\nimport Cursor from '../blots/cursor';\r\nimport Inline from '../blots/inline';\r\nimport TextBlot, { escapeText } from '../blots/text';\r\nimport Container from '../blots/container';\r\nimport Quill from '../core/quill';\r\n\r\nclass CodeBlockContainer extends Container {\r\n  static create(value) {\r\n    const domNode = super.create(value);\r\n    domNode.setAttribute('spellcheck', false);\r\n    return domNode;\r\n  }\r\n\r\n  html(index, length) {\r\n    let text = this.domNode.innerText;\r\n    // TODO find more robust solution for <select> turning into \\n\r\n    if (text.startsWith('\\n')) {\r\n      text = text.slice(1);\r\n    }\r\n    text = text.slice(index, index + length);\r\n    return `<pre>${escapeText(text)}</pre>`;\r\n  }\r\n}\r\n\r\nclass CodeBlock extends Block {\r\n  static register() {\r\n    Quill.register(CodeBlockContainer);\r\n  }\r\n}\r\n\r\nclass Code extends Inline {}\r\nCode.blotName = 'code';\r\nCode.tagName = 'CODE';\r\n\r\nCodeBlock.blotName = 'code-block';\r\nCodeBlock.className = 'ql-code-block';\r\nCodeBlock.tagName = 'DIV';\r\nCodeBlockContainer.blotName = 'code-block-container';\r\nCodeBlockContainer.className = 'ql-code-block-container';\r\nCodeBlockContainer.tagName = 'DIV';\r\n\r\nCodeBlockContainer.allowedChildren = [CodeBlock];\r\n\r\nCodeBlock.allowedChildren = [TextBlot, Break, Cursor];\r\nCodeBlock.requiredContainer = CodeBlockContainer;\r\nCodeBlock.TAB = '  ';\r\n\r\nexport { Code, CodeBlockContainer, CodeBlock as default };\r\n","import alignLeftIcon from '../assets/icons/align-left.svg';\r\nimport alignCenterIcon from '../assets/icons/align-center.svg';\r\nimport alignRightIcon from '../assets/icons/align-right.svg';\r\nimport alignJustifyIcon from '../assets/icons/align-justify.svg';\r\nimport backgroundIcon from '../assets/icons/background.svg';\r\nimport blockquoteIcon from '../assets/icons/blockquote.svg';\r\nimport boldIcon from '../assets/icons/bold.svg';\r\nimport cleanIcon from '../assets/icons/clean.svg';\r\nimport codeIcon from '../assets/icons/code.svg';\r\nimport colorIcon from '../assets/icons/color.svg';\r\nimport directionLeftToRightIcon from '../assets/icons/direction-ltr.svg';\r\nimport directionRightToLeftIcon from '../assets/icons/direction-rtl.svg';\r\nimport formulaIcon from '../assets/icons/formula.svg';\r\nimport headerIcon from '../assets/icons/header.svg';\r\nimport header2Icon from '../assets/icons/header-2.svg';\r\nimport italicIcon from '../assets/icons/italic.svg';\r\nimport imageIcon from '../assets/icons/image.svg';\r\nimport indentIcon from '../assets/icons/indent.svg';\r\nimport outdentIcon from '../assets/icons/outdent.svg';\r\nimport linkIcon from '../assets/icons/link.svg';\r\nimport listBulletIcon from '../assets/icons/list-bullet.svg';\r\nimport listCheckIcon from '../assets/icons/list-check.svg';\r\nimport listOrderedIcon from '../assets/icons/list-ordered.svg';\r\nimport subscriptIcon from '../assets/icons/subscript.svg';\r\nimport superscriptIcon from '../assets/icons/superscript.svg';\r\nimport strikeIcon from '../assets/icons/strike.svg';\r\nimport tableIcon from '../assets/icons/table.svg';\r\nimport underlineIcon from '../assets/icons/underline.svg';\r\nimport videoIcon from '../assets/icons/video.svg';\r\n\r\nmodule.exports = {\r\n  align: {\r\n    '': alignLeftIcon,\r\n    center: alignCenterIcon,\r\n    right: alignRightIcon,\r\n    justify: alignJustifyIcon,\r\n  },\r\n  background: backgroundIcon,\r\n  blockquote: blockquoteIcon,\r\n  bold: boldIcon,\r\n  clean: cleanIcon,\r\n  code: codeIcon,\r\n  'code-block': codeIcon,\r\n  color: colorIcon,\r\n  direction: {\r\n    '': directionLeftToRightIcon,\r\n    rtl: directionRightToLeftIcon,\r\n  },\r\n  formula: formulaIcon,\r\n  header: {\r\n    '1': headerIcon,\r\n    '2': header2Icon,\r\n  },\r\n  italic: italicIcon,\r\n  image: imageIcon,\r\n  indent: {\r\n    '+1': indentIcon,\r\n    '-1': outdentIcon,\r\n  },\r\n  link: linkIcon,\r\n  list: {\r\n    bullet: listBulletIcon,\r\n    check: listCheckIcon,\r\n    ordered: listOrderedIcon,\r\n  },\r\n  script: {\r\n    sub: subscriptIcon,\r\n    super: superscriptIcon,\r\n  },\r\n  strike: strikeIcon,\r\n  table: tableIcon,\r\n  underline: underlineIcon,\r\n  video: videoIcon,\r\n};\r\n","'use strict';\n\nvar hasOwn = Object.prototype.hasOwnProperty;\nvar toStr = Object.prototype.toString;\nvar defineProperty = Object.defineProperty;\nvar gOPD = Object.getOwnPropertyDescriptor;\n\nvar isArray = function isArray(arr) {\n\tif (typeof Array.isArray === 'function') {\n\t\treturn Array.isArray(arr);\n\t}\n\n\treturn toStr.call(arr) === '[object Array]';\n};\n\nvar isPlainObject = function isPlainObject(obj) {\n\tif (!obj || toStr.call(obj) !== '[object Object]') {\n\t\treturn false;\n\t}\n\n\tvar hasOwnConstructor = hasOwn.call(obj, 'constructor');\n\tvar hasIsPrototypeOf = obj.constructor && obj.constructor.prototype && hasOwn.call(obj.constructor.prototype, 'isPrototypeOf');\n\t// Not own constructor property must be Object\n\tif (obj.constructor && !hasOwnConstructor && !hasIsPrototypeOf) {\n\t\treturn false;\n\t}\n\n\t// Own properties are enumerated firstly, so to speed up,\n\t// if last one is own, then all properties are own.\n\tvar key;\n\tfor (key in obj) { /**/ }\n\n\treturn typeof key === 'undefined' || hasOwn.call(obj, key);\n};\n\n// If name is '__proto__', and Object.defineProperty is available, define __proto__ as an own property on target\nvar setProperty = function setProperty(target, options) {\n\tif (defineProperty && options.name === '__proto__') {\n\t\tdefineProperty(target, options.name, {\n\t\t\tenumerable: true,\n\t\t\tconfigurable: true,\n\t\t\tvalue: options.newValue,\n\t\t\twritable: true\n\t\t});\n\t} else {\n\t\ttarget[options.name] = options.newValue;\n\t}\n};\n\n// Return undefined instead of __proto__ if '__proto__' is not an own property\nvar getProperty = function getProperty(obj, name) {\n\tif (name === '__proto__') {\n\t\tif (!hasOwn.call(obj, name)) {\n\t\t\treturn void 0;\n\t\t} else if (gOPD) {\n\t\t\t// In early versions of node, obj['__proto__'] is buggy when obj has\n\t\t\t// __proto__ as an own property. Object.getOwnPropertyDescriptor() works.\n\t\t\treturn gOPD(obj, name).value;\n\t\t}\n\t}\n\n\treturn obj[name];\n};\n\nmodule.exports = function extend() {\n\tvar options, name, src, copy, copyIsArray, clone;\n\tvar target = arguments[0];\n\tvar i = 1;\n\tvar length = arguments.length;\n\tvar deep = false;\n\n\t// Handle a deep copy situation\n\tif (typeof target === 'boolean') {\n\t\tdeep = target;\n\t\ttarget = arguments[1] || {};\n\t\t// skip the boolean and the target\n\t\ti = 2;\n\t}\n\tif (target == null || (typeof target !== 'object' && typeof target !== 'function')) {\n\t\ttarget = {};\n\t}\n\n\tfor (; i < length; ++i) {\n\t\toptions = arguments[i];\n\t\t// Only deal with non-null/undefined values\n\t\tif (options != null) {\n\t\t\t// Extend the base object\n\t\t\tfor (name in options) {\n\t\t\t\tsrc = getProperty(target, name);\n\t\t\t\tcopy = getProperty(options, name);\n\n\t\t\t\t// Prevent never-ending loop\n\t\t\t\tif (target !== copy) {\n\t\t\t\t\t// Recurse if we're merging plain objects or arrays\n\t\t\t\t\tif (deep && copy && (isPlainObject(copy) || (copyIsArray = isArray(copy)))) {\n\t\t\t\t\t\tif (copyIsArray) {\n\t\t\t\t\t\t\tcopyIsArray = false;\n\t\t\t\t\t\t\tclone = src && isArray(src) ? src : [];\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tclone = src && isPlainObject(src) ? src : {};\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Never move original objects, clone them\n\t\t\t\t\t\tsetProperty(target, { name: name, newValue: extend(deep, clone, copy) });\n\n\t\t\t\t\t// Don't bring in undefined values\n\t\t\t\t\t} else if (typeof copy !== 'undefined') {\n\t\t\t\t\t\tsetProperty(target, { name: name, newValue: copy });\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t// Return the modified object\n\treturn target;\n};\n","export default new WeakMap();\r\n","class Theme {\r\n  constructor(quill, options) {\r\n    this.quill = quill;\r\n    this.options = options;\r\n    this.modules = {};\r\n  }\r\n\r\n  init() {\r\n    Object.keys(this.options.modules).forEach(name => {\r\n      if (this.modules[name] == null) {\r\n        this.addModule(name);\r\n      }\r\n    });\r\n  }\r\n\r\n  addModule(name) {\r\n    const ModuleClass = this.quill.constructor.import(`modules/${name}`);\r\n    this.modules[name] = new ModuleClass(\r\n      this.quill,\r\n      this.options.modules[name] || {},\r\n    );\r\n    return this.modules[name];\r\n  }\r\n}\r\nTheme.DEFAULTS = {\r\n  modules: {},\r\n};\r\nTheme.themes = {\r\n  default: Theme,\r\n};\r\n\r\nexport default Theme;\r\n","import { EmbedBlot } from 'parchment';\r\nimport TextBlot from './text';\r\n\r\nconst GUARD_TEXT = '\\uFEFF';\r\n\r\nclass Embed extends EmbedBlot {\r\n  constructor(scroll, node) {\r\n    super(scroll, node);\r\n    this.contentNode = document.createElement('span');\r\n    this.contentNode.setAttribute('contenteditable', false);\r\n    Array.from(this.domNode.childNodes).forEach(childNode => {\r\n      this.contentNode.appendChild(childNode);\r\n    });\r\n    this.leftGuard = document.createTextNode(GUARD_TEXT);\r\n    this.rightGuard = document.createTextNode(GUARD_TEXT);\r\n    this.domNode.appendChild(this.leftGuard);\r\n    this.domNode.appendChild(this.contentNode);\r\n    this.domNode.appendChild(this.rightGuard);\r\n  }\r\n\r\n  index(node, offset) {\r\n    if (node === this.leftGuard) return 0;\r\n    if (node === this.rightGuard) return 1;\r\n    return super.index(node, offset);\r\n  }\r\n\r\n  restore(node) {\r\n    let range;\r\n    let textNode;\r\n    const text = node.data.split(GUARD_TEXT).join('');\r\n    if (node === this.leftGuard) {\r\n      if (this.prev instanceof TextBlot) {\r\n        const prevLength = this.prev.length();\r\n        this.prev.insertAt(prevLength, text);\r\n        range = {\r\n          startNode: this.prev.domNode,\r\n          startOffset: prevLength + text.length,\r\n        };\r\n      } else {\r\n        textNode = document.createTextNode(text);\r\n        this.parent.insertBefore(this.scroll.create(textNode), this);\r\n        range = {\r\n          startNode: textNode,\r\n          startOffset: text.length,\r\n        };\r\n      }\r\n    } else if (node === this.rightGuard) {\r\n      if (this.next instanceof TextBlot) {\r\n        this.next.insertAt(0, text);\r\n        range = {\r\n          startNode: this.next.domNode,\r\n          startOffset: text.length,\r\n        };\r\n      } else {\r\n        textNode = document.createTextNode(text);\r\n        this.parent.insertBefore(this.scroll.create(textNode), this.next);\r\n        range = {\r\n          startNode: textNode,\r\n          startOffset: text.length,\r\n        };\r\n      }\r\n    }\r\n    node.data = GUARD_TEXT;\r\n    return range;\r\n  }\r\n\r\n  update(mutations, context) {\r\n    mutations.forEach(mutation => {\r\n      if (\r\n        mutation.type === 'characterData' &&\r\n        (mutation.target === this.leftGuard ||\r\n          mutation.target === this.rightGuard)\r\n      ) {\r\n        const range = this.restore(mutation.target);\r\n        if (range) context.range = range;\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nexport default Embed;\r\n","import extend from 'extend';\r\nimport Delta from 'quill-delta';\r\nimport {\r\n  Attributor,\r\n  ClassAttributor,\r\n  EmbedBlot,\r\n  Scope,\r\n  StyleAttributor,\r\n  BlockBlot,\r\n} from 'parchment';\r\nimport Quill from '../core/quill';\r\nimport logger from '../core/logger';\r\nimport Module from '../core/module';\r\n\r\nimport { AlignAttribute, AlignStyle } from '../formats/align';\r\nimport { BackgroundStyle } from '../formats/background';\r\nimport CodeBlock from '../formats/code';\r\nimport { ColorStyle } from '../formats/color';\r\nimport { DirectionAttribute, DirectionStyle } from '../formats/direction';\r\nimport { FontStyle } from '../formats/font';\r\nimport { SizeStyle } from '../formats/size';\r\n\r\nconst debug = logger('quill:clipboard');\r\n\r\nconst CLIPBOARD_CONFIG = [\r\n  [Node.TEXT_NODE, matchText],\r\n  [Node.TEXT_NODE, matchNewline],\r\n  ['br', matchBreak],\r\n  [Node.ELEMENT_NODE, matchNewline],\r\n  [Node.ELEMENT_NODE, matchBlot],\r\n  [Node.ELEMENT_NODE, matchAttributor],\r\n  [Node.ELEMENT_NODE, matchStyles],\r\n  ['li', matchIndent],\r\n  ['ol, ul', matchList],\r\n  ['pre', matchCodeBlock],\r\n  ['tr', matchTable],\r\n  ['b', matchAlias.bind(matchAlias, 'bold')],\r\n  ['i', matchAlias.bind(matchAlias, 'italic')],\r\n  ['style', matchIgnore],\r\n];\r\n\r\nconst ATTRIBUTE_ATTRIBUTORS = [AlignAttribute, DirectionAttribute].reduce(\r\n  (memo, attr) => {\r\n    memo[attr.keyName] = attr;\r\n    return memo;\r\n  },\r\n  {},\r\n);\r\n\r\nconst STYLE_ATTRIBUTORS = [\r\n  AlignStyle,\r\n  BackgroundStyle,\r\n  ColorStyle,\r\n  DirectionStyle,\r\n  FontStyle,\r\n  SizeStyle,\r\n].reduce((memo, attr) => {\r\n  memo[attr.keyName] = attr;\r\n  return memo;\r\n}, {});\r\n\r\nclass Clipboard extends Module {\r\n  constructor(quill, options) {\r\n    super(quill, options);\r\n    this.quill.root.addEventListener('copy', e => this.onCopy(e, false));\r\n    this.quill.root.addEventListener('cut', e => this.onCopy(e, true));\r\n    this.quill.root.addEventListener('paste', this.onCapturePaste.bind(this));\r\n    this.matchers = [];\r\n    CLIPBOARD_CONFIG.concat(this.options.matchers).forEach(\r\n      ([selector, matcher]) => {\r\n        this.addMatcher(selector, matcher);\r\n      },\r\n    );\r\n  }\r\n\r\n  addMatcher(selector, matcher) {\r\n    this.matchers.push([selector, matcher]);\r\n  }\r\n\r\n  convert({ html, text }, formats = {}) {\r\n    if (formats[CodeBlock.blotName]) {\r\n      return new Delta().insert(text, {\r\n        [CodeBlock.blotName]: formats[CodeBlock.blotName],\r\n      });\r\n    }\r\n    if (!html) {\r\n      return new Delta().insert(text || '');\r\n    }\r\n    const doc = new DOMParser().parseFromString(html, 'text/html');\r\n    const container = doc.body;\r\n    const nodeMatches = new WeakMap();\r\n    const [elementMatchers, textMatchers] = this.prepareMatching(\r\n      container,\r\n      nodeMatches,\r\n    );\r\n    const delta = traverse(\r\n      this.quill.scroll,\r\n      container,\r\n      elementMatchers,\r\n      textMatchers,\r\n      nodeMatches,\r\n    );\r\n    // Remove trailing newline\r\n    if (\r\n      deltaEndsWith(delta, '\\n') &&\r\n      (delta.ops[delta.ops.length - 1].attributes == null || formats.table)\r\n    ) {\r\n      return delta.compose(new Delta().retain(delta.length() - 1).delete(1));\r\n    }\r\n    return delta;\r\n  }\r\n\r\n  dangerouslyPasteHTML(index, html, source = Quill.sources.API) {\r\n    if (typeof index === 'string') {\r\n      const delta = this.convert({ html: index, text: '' });\r\n      this.quill.setContents(delta, html);\r\n      this.quill.setSelection(0, Quill.sources.SILENT);\r\n    } else {\r\n      const paste = this.convert({ html, text: '' });\r\n      this.quill.updateContents(\r\n        new Delta().retain(index).concat(paste),\r\n        source,\r\n      );\r\n      this.quill.setSelection(index + paste.length(), Quill.sources.SILENT);\r\n    }\r\n  }\r\n\r\n  onCaptureCopy(range) {\r\n    const text = this.quill.getText(range);\r\n    const html = this.quill.getSemanticHTML(range);\r\n    return { html, text };\r\n  }\r\n\r\n  onCapturePaste(e) {\r\n    if (e.defaultPrevented || !this.quill.isEnabled()) return;\r\n    e.preventDefault();\r\n    const range = this.quill.getSelection(true);\r\n    if (range == null) return;\r\n    this.onPaste(e, range);\r\n  }\r\n\r\n  onCopy(e, isCut = false) {\r\n    if (e.defaultPrevented) return;\r\n    e.preventDefault();\r\n    const [range] = this.quill.selection.getRange();\r\n    if (range == null) return;\r\n    const { html, text } = this.onCaptureCopy(range, isCut);\r\n    e.clipboardData.setData('text/plain', text);\r\n    e.clipboardData.setData('text/html', html);\r\n    if (isCut) {\r\n      this.quill.deleteText(range, Quill.sources.USER);\r\n    }\r\n  }\r\n\r\n  onPaste(e, range) {\r\n    const html = e.clipboardData.getData('text/html');\r\n    const text = e.clipboardData.getData('text/plain');\r\n    const files = Array.from(e.clipboardData.files || []);\r\n    if (!html && files.length > 0) {\r\n      this.quill.uploader.upload(range, files);\r\n      return;\r\n    }\r\n    const formats = this.quill.getFormat(range.index);\r\n    const pastedDelta = this.convert({ text, html }, formats);\r\n    debug.log('onPaste', pastedDelta, { text, html });\r\n    const delta = new Delta()\r\n      .retain(range.index)\r\n      .delete(range.length)\r\n      .concat(pastedDelta);\r\n    this.quill.updateContents(delta, Quill.sources.USER);\r\n    // range.length contributes to delta.length()\r\n    this.quill.setSelection(\r\n      delta.length() - range.length,\r\n      Quill.sources.SILENT,\r\n    );\r\n    this.quill.scrollIntoView();\r\n  }\r\n\r\n  prepareMatching(container, nodeMatches) {\r\n    const elementMatchers = [];\r\n    const textMatchers = [];\r\n    this.matchers.forEach(pair => {\r\n      const [selector, matcher] = pair;\r\n      switch (selector) {\r\n        case Node.TEXT_NODE:\r\n          textMatchers.push(matcher);\r\n          break;\r\n        case Node.ELEMENT_NODE:\r\n          elementMatchers.push(matcher);\r\n          break;\r\n        default:\r\n          Array.from(container.querySelectorAll(selector)).forEach(node => {\r\n            if (nodeMatches.has(node)) {\r\n              const matches = nodeMatches.get(node);\r\n              matches.push(matcher);\r\n            } else {\r\n              nodeMatches.set(node, [matcher]);\r\n            }\r\n          });\r\n          break;\r\n      }\r\n    });\r\n    return [elementMatchers, textMatchers];\r\n  }\r\n}\r\nClipboard.DEFAULTS = {\r\n  matchers: [],\r\n};\r\n\r\nfunction applyFormat(delta, format, value) {\r\n  if (typeof format === 'object') {\r\n    return Object.keys(format).reduce((newDelta, key) => {\r\n      return applyFormat(newDelta, key, format[key]);\r\n    }, delta);\r\n  }\r\n  return delta.reduce((newDelta, op) => {\r\n    if (op.attributes && op.attributes[format]) {\r\n      return newDelta.push(op);\r\n    }\r\n    return newDelta.insert(\r\n      op.insert,\r\n      extend({}, { [format]: value }, op.attributes),\r\n    );\r\n  }, new Delta());\r\n}\r\n\r\nfunction deltaEndsWith(delta, text) {\r\n  let endText = '';\r\n  for (\r\n    let i = delta.ops.length - 1;\r\n    i >= 0 && endText.length < text.length;\r\n    --i // eslint-disable-line no-plusplus\r\n  ) {\r\n    const op = delta.ops[i];\r\n    if (typeof op.insert !== 'string') break;\r\n    endText = op.insert + endText;\r\n  }\r\n  return endText.slice(-1 * text.length) === text;\r\n}\r\n\r\nfunction isLine(node) {\r\n  if (node.childNodes.length === 0) return false; // Exclude embed blocks\r\n  return [\r\n    'address',\r\n    'article',\r\n    'blockquote',\r\n    'canvas',\r\n    'dd',\r\n    'div',\r\n    'dl',\r\n    'dt',\r\n    'fieldset',\r\n    'figcaption',\r\n    'figure',\r\n    'footer',\r\n    'form',\r\n    'h1',\r\n    'h2',\r\n    'h3',\r\n    'h4',\r\n    'h5',\r\n    'h6',\r\n    'header',\r\n    'iframe',\r\n    'li',\r\n    'main',\r\n    'nav',\r\n    'ol',\r\n    'output',\r\n    'p',\r\n    'pre',\r\n    'section',\r\n    'table',\r\n    'td',\r\n    'tr',\r\n    'ul',\r\n    'video',\r\n  ].includes(node.tagName.toLowerCase());\r\n}\r\n\r\nconst preNodes = new WeakMap();\r\nfunction isPre(node) {\r\n  if (node == null) return false;\r\n  if (!preNodes.has(node)) {\r\n    if (node.tagName === 'PRE') {\r\n      preNodes.set(node, true);\r\n    } else {\r\n      preNodes.set(node, isPre(node.parentNode));\r\n    }\r\n  }\r\n  return preNodes.get(node);\r\n}\r\n\r\nfunction traverse(scroll, node, elementMatchers, textMatchers, nodeMatches) {\r\n  // Post-order\r\n  if (node.nodeType === node.TEXT_NODE) {\r\n    return textMatchers.reduce((delta, matcher) => {\r\n      return matcher(node, delta, scroll);\r\n    }, new Delta());\r\n  }\r\n  if (node.nodeType === node.ELEMENT_NODE) {\r\n    return Array.from(node.childNodes || []).reduce((delta, childNode) => {\r\n      let childrenDelta = traverse(\r\n        scroll,\r\n        childNode,\r\n        elementMatchers,\r\n        textMatchers,\r\n        nodeMatches,\r\n      );\r\n      if (childNode.nodeType === node.ELEMENT_NODE) {\r\n        childrenDelta = elementMatchers.reduce((reducedDelta, matcher) => {\r\n          return matcher(childNode, reducedDelta, scroll);\r\n        }, childrenDelta);\r\n        childrenDelta = (nodeMatches.get(childNode) || []).reduce(\r\n          (reducedDelta, matcher) => {\r\n            return matcher(childNode, reducedDelta, scroll);\r\n          },\r\n          childrenDelta,\r\n        );\r\n      }\r\n      return delta.concat(childrenDelta);\r\n    }, new Delta());\r\n  }\r\n  return new Delta();\r\n}\r\n\r\nfunction matchAlias(format, node, delta) {\r\n  return applyFormat(delta, format, true);\r\n}\r\n\r\nfunction matchAttributor(node, delta, scroll) {\r\n  const attributes = Attributor.keys(node);\r\n  const classes = ClassAttributor.keys(node);\r\n  const styles = StyleAttributor.keys(node);\r\n  const formats = {};\r\n  attributes\r\n    .concat(classes)\r\n    .concat(styles)\r\n    .forEach(name => {\r\n      let attr = scroll.query(name, Scope.ATTRIBUTE);\r\n      if (attr != null) {\r\n        formats[attr.attrName] = attr.value(node);\r\n        if (formats[attr.attrName]) return;\r\n      }\r\n      attr = ATTRIBUTE_ATTRIBUTORS[name];\r\n      if (attr != null && (attr.attrName === name || attr.keyName === name)) {\r\n        formats[attr.attrName] = attr.value(node) || undefined;\r\n      }\r\n      attr = STYLE_ATTRIBUTORS[name];\r\n      if (attr != null && (attr.attrName === name || attr.keyName === name)) {\r\n        attr = STYLE_ATTRIBUTORS[name];\r\n        formats[attr.attrName] = attr.value(node) || undefined;\r\n      }\r\n    });\r\n  if (Object.keys(formats).length > 0) {\r\n    return applyFormat(delta, formats);\r\n  }\r\n  return delta;\r\n}\r\n\r\nfunction matchBlot(node, delta, scroll) {\r\n  const match = scroll.query(node);\r\n  if (match == null) return delta;\r\n  if (match.prototype instanceof EmbedBlot) {\r\n    const embed = {};\r\n    const value = match.value(node);\r\n    if (value != null) {\r\n      embed[match.blotName] = value;\r\n      return new Delta().insert(embed, match.formats(node, scroll));\r\n    }\r\n  } else {\r\n    if (match.prototype instanceof BlockBlot && !deltaEndsWith(delta, '\\n')) {\r\n      delta.insert('\\n');\r\n    }\r\n    if (typeof match.formats === 'function') {\r\n      return applyFormat(delta, match.blotName, match.formats(node, scroll));\r\n    }\r\n  }\r\n  return delta;\r\n}\r\n\r\nfunction matchBreak(node, delta) {\r\n  if (!deltaEndsWith(delta, '\\n')) {\r\n    delta.insert('\\n');\r\n  }\r\n  return delta;\r\n}\r\n\r\nfunction matchCodeBlock(node, delta, scroll) {\r\n  const match = scroll.query('code-block');\r\n  const language = match ? match.formats(node, scroll) : true;\r\n  return applyFormat(delta, 'code-block', language);\r\n}\r\n\r\nfunction matchIgnore() {\r\n  return new Delta();\r\n}\r\n\r\nfunction matchIndent(node, delta, scroll) {\r\n  const match = scroll.query(node);\r\n  if (\r\n    match == null ||\r\n    match.blotName !== 'list' ||\r\n    !deltaEndsWith(delta, '\\n')\r\n  ) {\r\n    return delta;\r\n  }\r\n  let indent = -1;\r\n  let parent = node.parentNode;\r\n  while (parent != null) {\r\n    if (['OL', 'UL'].includes(parent.tagName)) {\r\n      indent += 1;\r\n    }\r\n    parent = parent.parentNode;\r\n  }\r\n  if (indent <= 0) return delta;\r\n  return delta.compose(\r\n    new Delta().retain(delta.length() - 1).retain(1, { indent }),\r\n  );\r\n}\r\n\r\nfunction matchList(node, delta) {\r\n  const list = node.tagName === 'OL' ? 'ordered' : 'bullet';\r\n  return applyFormat(delta, 'list', list);\r\n}\r\n\r\nfunction matchNewline(node, delta) {\r\n  if (!deltaEndsWith(delta, '\\n')) {\r\n    if (\r\n      isLine(node) ||\r\n      (delta.length() > 0 && node.nextSibling && isLine(node.nextSibling))\r\n    ) {\r\n      delta.insert('\\n');\r\n    }\r\n  }\r\n  return delta;\r\n}\r\n\r\nfunction matchStyles(node, delta) {\r\n  const formats = {};\r\n  const style = node.style || {};\r\n  if (style.fontStyle === 'italic') {\r\n    formats.italic = true;\r\n  }\r\n  if (\r\n    style.fontWeight.startsWith('bold') ||\r\n    parseInt(style.fontWeight, 10) >= 700\r\n  ) {\r\n    formats.bold = true;\r\n  }\r\n  if (Object.keys(formats).length > 0) {\r\n    delta = applyFormat(delta, formats);\r\n  }\r\n  if (parseFloat(style.textIndent || 0) > 0) {\r\n    // Could be 0.5in\r\n    return new Delta().insert('\\t').concat(delta);\r\n  }\r\n  return delta;\r\n}\r\n\r\nfunction matchTable(node, delta) {\r\n  const table =\r\n    node.parentNode.tagName === 'TABLE'\r\n      ? node.parentNode\r\n      : node.parentNode.parentNode;\r\n  const rows = Array.from(table.querySelectorAll('tr'));\r\n  const row = rows.indexOf(node) + 1;\r\n  return applyFormat(delta, 'table', row);\r\n}\r\n\r\nfunction matchText(node, delta) {\r\n  let text = node.data;\r\n  // Word represents empty line with <o:p>&nbsp;</o:p>\r\n  if (node.parentNode.tagName === 'O:P') {\r\n    return delta.insert(text.trim());\r\n  }\r\n  if (text.trim().length === 0) {\r\n    return delta;\r\n  }\r\n  if (!isPre(node)) {\r\n    const replacer = (collapse, match) => {\r\n      const replaced = match.replace(/[^\\u00a0]/g, ''); // \\u00a0 is nbsp;\r\n      return replaced.length < 1 && collapse ? ' ' : replaced;\r\n    };\r\n    text = text.replace(/\\r\\n/g, ' ').replace(/\\n/g, ' ');\r\n    text = text.replace(/\\s\\s+/g, replacer.bind(replacer, true)); // collapse whitespace\r\n    if (\r\n      (node.previousSibling == null && isLine(node.parentNode)) ||\r\n      (node.previousSibling != null && isLine(node.previousSibling))\r\n    ) {\r\n      text = text.replace(/^\\s+/, replacer.bind(replacer, false));\r\n    }\r\n    if (\r\n      (node.nextSibling == null && isLine(node.parentNode)) ||\r\n      (node.nextSibling != null && isLine(node.nextSibling))\r\n    ) {\r\n      text = text.replace(/\\s+$/, replacer.bind(replacer, false));\r\n    }\r\n  }\r\n  return delta.insert(text);\r\n}\r\n\r\nexport {\r\n  Clipboard as default,\r\n  matchAttributor,\r\n  matchBlot,\r\n  matchNewline,\r\n  matchText,\r\n  traverse,\r\n};\r\n","import { Attributor, ClassAttributor, Scope, StyleAttributor } from 'parchment';\r\n\r\nconst config = {\r\n  scope: Scope.BLOCK,\r\n  whitelist: ['right', 'center', 'justify'],\r\n};\r\n\r\nconst AlignAttribute = new Attributor('align', 'align', config);\r\nconst AlignClass = new ClassAttributor('align', 'ql-align', config);\r\nconst AlignStyle = new StyleAttributor('align', 'text-align', config);\r\n\r\nexport { AlignAttribute, AlignClass, AlignStyle };\r\n","import { ClassAttributor, Scope } from 'parchment';\r\nimport { ColorAttributor } from './color';\r\n\r\nconst BackgroundClass = new ClassAttributor('background', 'ql-bg', {\r\n  scope: Scope.INLINE,\r\n});\r\nconst BackgroundStyle = new ColorAttributor('background', 'background-color', {\r\n  scope: Scope.INLINE,\r\n});\r\n\r\nexport { BackgroundClass, BackgroundStyle };\r\n","import { Attributor, ClassAttributor, Scope, StyleAttributor } from 'parchment';\r\n\r\nconst config = {\r\n  scope: Scope.BLOCK,\r\n  whitelist: ['rtl'],\r\n};\r\n\r\nconst DirectionAttribute = new Attributor('direction', 'dir', config);\r\nconst DirectionClass = new ClassAttributor('direction', 'ql-direction', config);\r\nconst DirectionStyle = new StyleAttributor('direction', 'direction', config);\r\n\r\nexport { DirectionAttribute, DirectionClass, DirectionStyle };\r\n","import { ClassAttributor, Scope, StyleAttributor } from 'parchment';\r\n\r\nconst config = {\r\n  scope: Scope.INLINE,\r\n  whitelist: ['serif', 'monospace'],\r\n};\r\n\r\nconst FontClass = new ClassAttributor('font', 'ql-font', config);\r\n\r\nclass FontStyleAttributor extends StyleAttributor {\r\n  value(node) {\r\n    return super.value(node).replace(/[\"']/g, '');\r\n  }\r\n}\r\n\r\nconst FontStyle = new FontStyleAttributor('font', 'font-family', config);\r\n\r\nexport { FontStyle, FontClass };\r\n","import { ClassAttributor, Scope, StyleAttributor } from 'parchment';\r\n\r\nconst SizeClass = new ClassAttributor('size', 'ql-size', {\r\n  scope: Scope.INLINE,\r\n  whitelist: ['small', 'large', 'huge'],\r\n});\r\nconst SizeStyle = new StyleAttributor('size', 'font-size', {\r\n  scope: Scope.INLINE,\r\n  whitelist: ['10px', '18px', '32px'],\r\n});\r\n\r\nexport { SizeClass, SizeStyle };\r\n","import Inline from '../blots/inline';\r\n\r\nclass Bold extends Inline {\r\n  static create() {\r\n    return super.create();\r\n  }\r\n\r\n  static formats() {\r\n    return true;\r\n  }\r\n\r\n  optimize(context) {\r\n    super.optimize(context);\r\n    if (this.domNode.tagName !== this.statics.tagName[0]) {\r\n      this.replaceWith(this.statics.blotName);\r\n    }\r\n  }\r\n}\r\nBold.blotName = 'bold';\r\nBold.tagName = ['STRONG', 'B'];\r\n\r\nexport default Bold;\r\n","import Picker from './picker';\r\n\r\nclass ColorPicker extends Picker {\r\n  constructor(select, label) {\r\n    super(select);\r\n    this.label.innerHTML = label;\r\n    this.container.classList.add('ql-color-picker');\r\n    Array.from(this.container.querySelectorAll('.ql-picker-item'))\r\n      .slice(0, 7)\r\n      .forEach(item => {\r\n        item.classList.add('ql-primary');\r\n      });\r\n  }\r\n\r\n  buildItem(option) {\r\n    const item = super.buildItem(option);\r\n    item.style.backgroundColor = option.getAttribute('value') || '';\r\n    return item;\r\n  }\r\n\r\n  selectItem(item, trigger) {\r\n    super.selectItem(item, trigger);\r\n    const colorLabel = this.label.querySelector('.ql-color-label');\r\n    const value = item ? item.getAttribute('data-value') || '' : '';\r\n    if (colorLabel) {\r\n      if (colorLabel.tagName === 'line') {\r\n        colorLabel.style.stroke = value;\r\n      } else {\r\n        colorLabel.style.fill = value;\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nexport default ColorPicker;\r\n","import Picker from './picker';\r\n\r\nclass IconPicker extends Picker {\r\n  constructor(select, icons) {\r\n    super(select);\r\n    this.container.classList.add('ql-icon-picker');\r\n    Array.from(this.container.querySelectorAll('.ql-picker-item')).forEach(\r\n      item => {\r\n        item.innerHTML = icons[item.getAttribute('data-value') || ''];\r\n      },\r\n    );\r\n    this.defaultItem = this.container.querySelector('.ql-selected');\r\n    this.selectItem(this.defaultItem);\r\n  }\r\n\r\n  selectItem(target, trigger) {\r\n    super.selectItem(target, trigger);\r\n    const item = target || this.defaultItem;\r\n    if (this.label.innerHTML === item.innerHTML) return;\r\n    this.label.innerHTML = item.innerHTML;\r\n  }\r\n}\r\n\r\nexport default IconPicker;\r\n","class Tooltip {\r\n  constructor(quill, boundsContainer) {\r\n    this.quill = quill;\r\n    this.boundsContainer = boundsContainer || document.body;\r\n    this.root = quill.addContainer('ql-tooltip');\r\n    this.root.innerHTML = this.constructor.TEMPLATE;\r\n    if (this.quill.root === this.quill.scrollingContainer) {\r\n      this.quill.root.addEventListener('scroll', () => {\r\n        this.root.style.marginTop = `${-1 * this.quill.root.scrollTop}px`;\r\n      });\r\n    }\r\n    this.hide();\r\n  }\r\n\r\n  hide() {\r\n    this.root.classList.add('ql-hidden');\r\n  }\r\n\r\n  position(reference) {\r\n    const left =\r\n      reference.left + reference.width / 2 - this.root.offsetWidth / 2;\r\n    // root.scrollTop should be 0 if scrollContainer !== root\r\n    const top = reference.bottom + this.quill.root.scrollTop;\r\n    this.root.style.left = `${left}px`;\r\n    this.root.style.top = `${top}px`;\r\n    this.root.classList.remove('ql-flip');\r\n    const containerBounds = this.boundsContainer.getBoundingClientRect();\r\n    const rootBounds = this.root.getBoundingClientRect();\r\n    let shift = 0;\r\n    if (rootBounds.right > containerBounds.right) {\r\n      shift = containerBounds.right - rootBounds.right;\r\n      this.root.style.left = `${left + shift}px`;\r\n    }\r\n    if (rootBounds.left < containerBounds.left) {\r\n      shift = containerBounds.left - rootBounds.left;\r\n      this.root.style.left = `${left + shift}px`;\r\n    }\r\n    if (rootBounds.bottom > containerBounds.bottom) {\r\n      const height = rootBounds.bottom - rootBounds.top;\r\n      const verticalShift = reference.bottom - reference.top + height;\r\n      this.root.style.top = `${top - verticalShift}px`;\r\n      this.root.classList.add('ql-flip');\r\n    }\r\n    return shift;\r\n  }\r\n\r\n  show() {\r\n    this.root.classList.remove('ql-editing');\r\n    this.root.classList.remove('ql-hidden');\r\n  }\r\n}\r\n\r\nexport default Tooltip;\r\n","import extend from 'extend';\r\nimport Emitter from '../core/emitter';\r\nimport Theme from '../core/theme';\r\nimport ColorPicker from '../ui/color-picker';\r\nimport IconPicker from '../ui/icon-picker';\r\nimport Picker from '../ui/picker';\r\nimport Tooltip from '../ui/tooltip';\r\n\r\nconst ALIGNS = [false, 'center', 'right', 'justify'];\r\n\r\nconst COLORS = [\r\n  '#000000',\r\n  '#e60000',\r\n  '#ff9900',\r\n  '#ffff00',\r\n  '#008a00',\r\n  '#0066cc',\r\n  '#9933ff',\r\n  '#ffffff',\r\n  '#facccc',\r\n  '#ffebcc',\r\n  '#ffffcc',\r\n  '#cce8cc',\r\n  '#cce0f5',\r\n  '#ebd6ff',\r\n  '#bbbbbb',\r\n  '#f06666',\r\n  '#ffc266',\r\n  '#ffff66',\r\n  '#66b966',\r\n  '#66a3e0',\r\n  '#c285ff',\r\n  '#888888',\r\n  '#a10000',\r\n  '#b26b00',\r\n  '#b2b200',\r\n  '#006100',\r\n  '#0047b2',\r\n  '#6b24b2',\r\n  '#444444',\r\n  '#5c0000',\r\n  '#663d00',\r\n  '#666600',\r\n  '#003700',\r\n  '#002966',\r\n  '#3d1466',\r\n];\r\n\r\nconst FONTS = [false, 'serif', 'monospace'];\r\n\r\nconst HEADERS = ['1', '2', '3', false];\r\n\r\nconst SIZES = ['small', false, 'large', 'huge'];\r\n\r\nclass BaseTheme extends Theme {\r\n  constructor(quill, options) {\r\n    super(quill, options);\r\n    const listener = e => {\r\n      if (!document.body.contains(quill.root)) {\r\n        document.body.removeEventListener('click', listener);\r\n        return;\r\n      }\r\n      if (\r\n        this.tooltip != null &&\r\n        !this.tooltip.root.contains(e.target) &&\r\n        document.activeElement !== this.tooltip.textbox &&\r\n        !this.quill.hasFocus()\r\n      ) {\r\n        this.tooltip.hide();\r\n      }\r\n      if (this.pickers != null) {\r\n        this.pickers.forEach(picker => {\r\n          if (!picker.container.contains(e.target)) {\r\n            picker.close();\r\n          }\r\n        });\r\n      }\r\n    };\r\n    quill.emitter.listenDOM('click', document.body, listener);\r\n  }\r\n\r\n  addModule(name) {\r\n    const module = super.addModule(name);\r\n    if (name === 'toolbar') {\r\n      this.extendToolbar(module);\r\n    }\r\n    return module;\r\n  }\r\n\r\n  buildButtons(buttons, icons) {\r\n    Array.from(buttons).forEach(button => {\r\n      const className = button.getAttribute('class') || '';\r\n      className.split(/\\s+/).forEach(name => {\r\n        if (!name.startsWith('ql-')) return;\r\n        name = name.slice('ql-'.length);\r\n        if (icons[name] == null) return;\r\n        if (name === 'direction') {\r\n          button.innerHTML = icons[name][''] + icons[name].rtl;\r\n        } else if (typeof icons[name] === 'string') {\r\n          button.innerHTML = icons[name];\r\n        } else {\r\n          const value = button.value || '';\r\n          if (value != null && icons[name][value]) {\r\n            button.innerHTML = icons[name][value];\r\n          }\r\n        }\r\n      });\r\n    });\r\n  }\r\n\r\n  buildPickers(selects, icons) {\r\n    this.pickers = Array.from(selects).map(select => {\r\n      if (select.classList.contains('ql-align')) {\r\n        if (select.querySelector('option') == null) {\r\n          fillSelect(select, ALIGNS);\r\n        }\r\n        return new IconPicker(select, icons.align);\r\n      }\r\n      if (\r\n        select.classList.contains('ql-background') ||\r\n        select.classList.contains('ql-color')\r\n      ) {\r\n        const format = select.classList.contains('ql-background')\r\n          ? 'background'\r\n          : 'color';\r\n        if (select.querySelector('option') == null) {\r\n          fillSelect(\r\n            select,\r\n            COLORS,\r\n            format === 'background' ? '#ffffff' : '#000000',\r\n          );\r\n        }\r\n        return new ColorPicker(select, icons[format]);\r\n      }\r\n      if (select.querySelector('option') == null) {\r\n        if (select.classList.contains('ql-font')) {\r\n          fillSelect(select, FONTS);\r\n        } else if (select.classList.contains('ql-header')) {\r\n          fillSelect(select, HEADERS);\r\n        } else if (select.classList.contains('ql-size')) {\r\n          fillSelect(select, SIZES);\r\n        }\r\n      }\r\n      return new Picker(select);\r\n    });\r\n    const update = () => {\r\n      this.pickers.forEach(picker => {\r\n        picker.update();\r\n      });\r\n    };\r\n    this.quill.on(Emitter.events.EDITOR_CHANGE, update);\r\n  }\r\n}\r\nBaseTheme.DEFAULTS = extend(true, {}, Theme.DEFAULTS, {\r\n  modules: {\r\n    toolbar: {\r\n      handlers: {\r\n        formula() {\r\n          this.quill.theme.tooltip.edit('formula');\r\n        },\r\n        image() {\r\n          let fileInput = this.container.querySelector(\r\n            'input.ql-image[type=file]',\r\n          );\r\n          if (fileInput == null) {\r\n            fileInput = document.createElement('input');\r\n            fileInput.setAttribute('type', 'file');\r\n            fileInput.setAttribute(\r\n              'accept',\r\n              this.quill.uploader.options.mimetypes.join(', '),\r\n            );\r\n            fileInput.classList.add('ql-image');\r\n            fileInput.addEventListener('change', () => {\r\n              const range = this.quill.getSelection(true);\r\n              this.quill.uploader.upload(range, fileInput.files);\r\n              fileInput.value = '';\r\n            });\r\n            this.container.appendChild(fileInput);\r\n          }\r\n          fileInput.click();\r\n        },\r\n        video() {\r\n          this.quill.theme.tooltip.edit('video');\r\n        },\r\n      },\r\n    },\r\n  },\r\n});\r\n\r\nclass BaseTooltip extends Tooltip {\r\n  constructor(quill, boundsContainer) {\r\n    super(quill, boundsContainer);\r\n    this.textbox = this.root.querySelector('input[type=\"text\"]');\r\n    this.listen();\r\n  }\r\n\r\n  listen() {\r\n    this.textbox.addEventListener('keydown', event => {\r\n      if (event.key === 'Enter') {\r\n        this.save();\r\n        event.preventDefault();\r\n      } else if (event.key === 'Escape') {\r\n        this.cancel();\r\n        event.preventDefault();\r\n      }\r\n    });\r\n  }\r\n\r\n  cancel() {\r\n    this.hide();\r\n  }\r\n\r\n  edit(mode = 'link', preview = null) {\r\n    this.root.classList.remove('ql-hidden');\r\n    this.root.classList.add('ql-editing');\r\n    if (preview != null) {\r\n      this.textbox.value = preview;\r\n    } else if (mode !== this.root.getAttribute('data-mode')) {\r\n      this.textbox.value = '';\r\n    }\r\n    this.position(this.quill.getBounds(this.quill.selection.savedRange));\r\n    this.textbox.select();\r\n    this.textbox.setAttribute(\r\n      'placeholder',\r\n      this.textbox.getAttribute(`data-${mode}`) || '',\r\n    );\r\n    this.root.setAttribute('data-mode', mode);\r\n  }\r\n\r\n  restoreFocus() {\r\n    const { scrollTop } = this.quill.scrollingContainer;\r\n    this.quill.focus();\r\n    this.quill.scrollingContainer.scrollTop = scrollTop;\r\n  }\r\n\r\n  save() {\r\n    let { value } = this.textbox;\r\n    switch (this.root.getAttribute('data-mode')) {\r\n      case 'link': {\r\n        const { scrollTop } = this.quill.root;\r\n        if (this.linkRange) {\r\n          this.quill.formatText(\r\n            this.linkRange,\r\n            'link',\r\n            value,\r\n            Emitter.sources.USER,\r\n          );\r\n          delete this.linkRange;\r\n        } else {\r\n          this.restoreFocus();\r\n          this.quill.format('link', value, Emitter.sources.USER);\r\n        }\r\n        this.quill.root.scrollTop = scrollTop;\r\n        break;\r\n      }\r\n      case 'video': {\r\n        value = extractVideoUrl(value);\r\n      } // eslint-disable-next-line no-fallthrough\r\n      case 'formula': {\r\n        if (!value) break;\r\n        const range = this.quill.getSelection(true);\r\n        if (range != null) {\r\n          const index = range.index + range.length;\r\n          this.quill.insertEmbed(\r\n            index,\r\n            this.root.getAttribute('data-mode'),\r\n            value,\r\n            Emitter.sources.USER,\r\n          );\r\n          if (this.root.getAttribute('data-mode') === 'formula') {\r\n            this.quill.insertText(index + 1, ' ', Emitter.sources.USER);\r\n          }\r\n          this.quill.setSelection(index + 2, Emitter.sources.USER);\r\n        }\r\n        break;\r\n      }\r\n      default:\r\n    }\r\n    this.textbox.value = '';\r\n    this.hide();\r\n  }\r\n}\r\n\r\nfunction extractVideoUrl(url) {\r\n  let match =\r\n    url.match(\r\n      /^(?:(https?):\\/\\/)?(?:(?:www|m)\\.)?youtube\\.com\\/watch.*v=([a-zA-Z0-9_-]+)/,\r\n    ) ||\r\n    url.match(/^(?:(https?):\\/\\/)?(?:(?:www|m)\\.)?youtu\\.be\\/([a-zA-Z0-9_-]+)/);\r\n  if (match) {\r\n    return `${match[1] || 'https'}://www.youtube.com/embed/${\r\n      match[2]\r\n    }?showinfo=0`;\r\n  }\r\n  // eslint-disable-next-line no-cond-assign\r\n  if ((match = url.match(/^(?:(https?):\\/\\/)?(?:www\\.)?vimeo\\.com\\/(\\d+)/))) {\r\n    return `${match[1] || 'https'}://player.vimeo.com/video/${match[2]}/`;\r\n  }\r\n  return url;\r\n}\r\n\r\nfunction fillSelect(select, values, defaultValue = false) {\r\n  values.forEach(value => {\r\n    const option = document.createElement('option');\r\n    if (value === defaultValue) {\r\n      option.setAttribute('selected', 'selected');\r\n    } else {\r\n      option.setAttribute('value', value);\r\n    }\r\n    select.appendChild(option);\r\n  });\r\n}\r\n\r\nexport { BaseTooltip, BaseTheme as default };\r\n","import Quill from './core';\r\n\r\nimport { AlignClass, AlignStyle } from './formats/align';\r\nimport {\r\n  DirectionAttribute,\r\n  DirectionClass,\r\n  DirectionStyle,\r\n} from './formats/direction';\r\nimport Indent from './formats/indent';\r\n\r\nimport Blockquote from './formats/blockquote';\r\nimport Header from './formats/header';\r\nimport List from './formats/list';\r\n\r\nimport { BackgroundClass, BackgroundStyle } from './formats/background';\r\nimport { ColorClass, ColorStyle } from './formats/color';\r\nimport { FontClass, FontStyle } from './formats/font';\r\nimport { SizeClass, SizeStyle } from './formats/size';\r\n\r\nimport Bold from './formats/bold';\r\nimport Italic from './formats/italic';\r\nimport Link from './formats/link';\r\nimport Script from './formats/script';\r\nimport Strike from './formats/strike';\r\nimport Underline from './formats/underline';\r\n\r\nimport Formula from './formats/formula';\r\nimport Image from './formats/image';\r\nimport Video from './formats/video';\r\n\r\nimport CodeBlock, { Code as InlineCode } from './formats/code';\r\n\r\nimport Syntax from './modules/syntax';\r\nimport Table from './modules/table';\r\nimport Toolbar from './modules/toolbar';\r\n\r\nimport Icons from './ui/icons';\r\nimport Picker from './ui/picker';\r\nimport ColorPicker from './ui/color-picker';\r\nimport IconPicker from './ui/icon-picker';\r\nimport Tooltip from './ui/tooltip';\r\n\r\nimport BubbleTheme from './themes/bubble';\r\nimport SnowTheme from './themes/snow';\r\n\r\nQuill.register(\r\n  {\r\n    'attributors/attribute/direction': DirectionAttribute,\r\n\r\n    'attributors/class/align': AlignClass,\r\n    'attributors/class/background': BackgroundClass,\r\n    'attributors/class/color': ColorClass,\r\n    'attributors/class/direction': DirectionClass,\r\n    'attributors/class/font': FontClass,\r\n    'attributors/class/size': SizeClass,\r\n\r\n    'attributors/style/align': AlignStyle,\r\n    'attributors/style/background': BackgroundStyle,\r\n    'attributors/style/color': ColorStyle,\r\n    'attributors/style/direction': DirectionStyle,\r\n    'attributors/style/font': FontStyle,\r\n    'attributors/style/size': SizeStyle,\r\n  },\r\n  true,\r\n);\r\n\r\nQuill.register(\r\n  {\r\n    'formats/align': AlignClass,\r\n    'formats/direction': DirectionClass,\r\n    'formats/indent': Indent,\r\n\r\n    'formats/background': BackgroundStyle,\r\n    'formats/color': ColorStyle,\r\n    'formats/font': FontClass,\r\n    'formats/size': SizeClass,\r\n\r\n    'formats/blockquote': Blockquote,\r\n    'formats/code-block': CodeBlock,\r\n    'formats/header': Header,\r\n    'formats/list': List,\r\n\r\n    'formats/bold': Bold,\r\n    'formats/code': InlineCode,\r\n    'formats/italic': Italic,\r\n    'formats/link': Link,\r\n    'formats/script': Script,\r\n    'formats/strike': Strike,\r\n    'formats/underline': Underline,\r\n\r\n    'formats/formula': Formula,\r\n    'formats/image': Image,\r\n    'formats/video': Video,\r\n\r\n    'modules/syntax': Syntax,\r\n    'modules/table': Table,\r\n    'modules/toolbar': Toolbar,\r\n\r\n    'themes/bubble': BubbleTheme,\r\n    'themes/snow': SnowTheme,\r\n\r\n    'ui/icons': Icons,\r\n    'ui/picker': Picker,\r\n    'ui/icon-picker': IconPicker,\r\n    'ui/color-picker': ColorPicker,\r\n    'ui/tooltip': Tooltip,\r\n  },\r\n  true,\r\n);\r\n\r\nexport default Quill;\r\n","import Quill from './core/quill';\r\n\r\nimport Block, { BlockEmbed } from './blots/block';\r\nimport Break from './blots/break';\r\nimport Container from './blots/container';\r\nimport Cursor from './blots/cursor';\r\nimport Embed from './blots/embed';\r\nimport Inline from './blots/inline';\r\nimport Scroll from './blots/scroll';\r\nimport TextBlot from './blots/text';\r\n\r\nimport Clipboard from './modules/clipboard';\r\nimport History from './modules/history';\r\nimport Keyboard from './modules/keyboard';\r\nimport Uploader from './modules/uploader';\r\n\r\nQuill.register({\r\n  'blots/block': Block,\r\n  'blots/block/embed': BlockEmbed,\r\n  'blots/break': Break,\r\n  'blots/container': Container,\r\n  'blots/cursor': Cursor,\r\n  'blots/embed': Embed,\r\n  'blots/inline': Inline,\r\n  'blots/scroll': Scroll,\r\n  'blots/text': TextBlot,\r\n\r\n  'modules/clipboard': Clipboard,\r\n  'modules/history': History,\r\n  'modules/keyboard': Keyboard,\r\n  'modules/uploader': Uploader,\r\n});\r\n\r\nexport default Quill;\r\n","/**\n * This library modifies the diff-patch-match library by Neil Fraser\n * by removing the patch and match functionality and certain advanced\n * options in the diff function. The original license is as follows:\n *\n * ===\n *\n * Diff Match and Patch\n *\n * Copyright 2006 Google Inc.\n * http://code.google.com/p/google-diff-match-patch/\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\n/**\n * The data structure representing a diff is an array of tuples:\n * [[DIFF_DELETE, 'Hello'], [DIFF_INSERT, 'Goodbye'], [DIFF_EQUAL, ' world.']]\n * which means: delete 'Hello', add 'Goodbye' and keep ' world.'\n */\nvar DIFF_DELETE = -1;\nvar DIFF_INSERT = 1;\nvar DIFF_EQUAL = 0;\n\n\n/**\n * Find the differences between two texts.  Simplifies the problem by stripping\n * any common prefix or suffix off the texts before diffing.\n * @param {string} text1 Old string to be diffed.\n * @param {string} text2 New string to be diffed.\n * @param {Int} cursor_pos Expected edit position in text1 (optional)\n * @return {Array} Array of diff tuples.\n */\nfunction diff_main(text1, text2, cursor_pos) {\n  // Check for equality (speedup).\n  if (text1 == text2) {\n    if (text1) {\n      return [[DIFF_EQUAL, text1]];\n    }\n    return [];\n  }\n\n  // Check cursor_pos within bounds\n  if (cursor_pos < 0 || text1.length < cursor_pos) {\n    cursor_pos = null;\n  }\n\n  // Trim off common prefix (speedup).\n  var commonlength = diff_commonPrefix(text1, text2);\n  var commonprefix = text1.substring(0, commonlength);\n  text1 = text1.substring(commonlength);\n  text2 = text2.substring(commonlength);\n\n  // Trim off common suffix (speedup).\n  commonlength = diff_commonSuffix(text1, text2);\n  var commonsuffix = text1.substring(text1.length - commonlength);\n  text1 = text1.substring(0, text1.length - commonlength);\n  text2 = text2.substring(0, text2.length - commonlength);\n\n  // Compute the diff on the middle block.\n  var diffs = diff_compute_(text1, text2);\n\n  // Restore the prefix and suffix.\n  if (commonprefix) {\n    diffs.unshift([DIFF_EQUAL, commonprefix]);\n  }\n  if (commonsuffix) {\n    diffs.push([DIFF_EQUAL, commonsuffix]);\n  }\n  diff_cleanupMerge(diffs);\n  if (cursor_pos != null) {\n    diffs = fix_cursor(diffs, cursor_pos);\n  }\n  diffs = fix_emoji(diffs);\n  return diffs;\n};\n\n\n/**\n * Find the differences between two texts.  Assumes that the texts do not\n * have any common prefix or suffix.\n * @param {string} text1 Old string to be diffed.\n * @param {string} text2 New string to be diffed.\n * @return {Array} Array of diff tuples.\n */\nfunction diff_compute_(text1, text2) {\n  var diffs;\n\n  if (!text1) {\n    // Just add some text (speedup).\n    return [[DIFF_INSERT, text2]];\n  }\n\n  if (!text2) {\n    // Just delete some text (speedup).\n    return [[DIFF_DELETE, text1]];\n  }\n\n  var longtext = text1.length > text2.length ? text1 : text2;\n  var shorttext = text1.length > text2.length ? text2 : text1;\n  var i = longtext.indexOf(shorttext);\n  if (i != -1) {\n    // Shorter text is inside the longer text (speedup).\n    diffs = [[DIFF_INSERT, longtext.substring(0, i)],\n             [DIFF_EQUAL, shorttext],\n             [DIFF_INSERT, longtext.substring(i + shorttext.length)]];\n    // Swap insertions for deletions if diff is reversed.\n    if (text1.length > text2.length) {\n      diffs[0][0] = diffs[2][0] = DIFF_DELETE;\n    }\n    return diffs;\n  }\n\n  if (shorttext.length == 1) {\n    // Single character string.\n    // After the previous speedup, the character can't be an equality.\n    return [[DIFF_DELETE, text1], [DIFF_INSERT, text2]];\n  }\n\n  // Check to see if the problem can be split in two.\n  var hm = diff_halfMatch_(text1, text2);\n  if (hm) {\n    // A half-match was found, sort out the return data.\n    var text1_a = hm[0];\n    var text1_b = hm[1];\n    var text2_a = hm[2];\n    var text2_b = hm[3];\n    var mid_common = hm[4];\n    // Send both pairs off for separate processing.\n    var diffs_a = diff_main(text1_a, text2_a);\n    var diffs_b = diff_main(text1_b, text2_b);\n    // Merge the results.\n    return diffs_a.concat([[DIFF_EQUAL, mid_common]], diffs_b);\n  }\n\n  return diff_bisect_(text1, text2);\n};\n\n\n/**\n * Find the 'middle snake' of a diff, split the problem in two\n * and return the recursively constructed diff.\n * See Myers 1986 paper: An O(ND) Difference Algorithm and Its Variations.\n * @param {string} text1 Old string to be diffed.\n * @param {string} text2 New string to be diffed.\n * @return {Array} Array of diff tuples.\n * @private\n */\nfunction diff_bisect_(text1, text2) {\n  // Cache the text lengths to prevent multiple calls.\n  var text1_length = text1.length;\n  var text2_length = text2.length;\n  var max_d = Math.ceil((text1_length + text2_length) / 2);\n  var v_offset = max_d;\n  var v_length = 2 * max_d;\n  var v1 = new Array(v_length);\n  var v2 = new Array(v_length);\n  // Setting all elements to -1 is faster in Chrome & Firefox than mixing\n  // integers and undefined.\n  for (var x = 0; x < v_length; x++) {\n    v1[x] = -1;\n    v2[x] = -1;\n  }\n  v1[v_offset + 1] = 0;\n  v2[v_offset + 1] = 0;\n  var delta = text1_length - text2_length;\n  // If the total number of characters is odd, then the front path will collide\n  // with the reverse path.\n  var front = (delta % 2 != 0);\n  // Offsets for start and end of k loop.\n  // Prevents mapping of space beyond the grid.\n  var k1start = 0;\n  var k1end = 0;\n  var k2start = 0;\n  var k2end = 0;\n  for (var d = 0; d < max_d; d++) {\n    // Walk the front path one step.\n    for (var k1 = -d + k1start; k1 <= d - k1end; k1 += 2) {\n      var k1_offset = v_offset + k1;\n      var x1;\n      if (k1 == -d || (k1 != d && v1[k1_offset - 1] < v1[k1_offset + 1])) {\n        x1 = v1[k1_offset + 1];\n      } else {\n        x1 = v1[k1_offset - 1] + 1;\n      }\n      var y1 = x1 - k1;\n      while (x1 < text1_length && y1 < text2_length &&\n             text1.charAt(x1) == text2.charAt(y1)) {\n        x1++;\n        y1++;\n      }\n      v1[k1_offset] = x1;\n      if (x1 > text1_length) {\n        // Ran off the right of the graph.\n        k1end += 2;\n      } else if (y1 > text2_length) {\n        // Ran off the bottom of the graph.\n        k1start += 2;\n      } else if (front) {\n        var k2_offset = v_offset + delta - k1;\n        if (k2_offset >= 0 && k2_offset < v_length && v2[k2_offset] != -1) {\n          // Mirror x2 onto top-left coordinate system.\n          var x2 = text1_length - v2[k2_offset];\n          if (x1 >= x2) {\n            // Overlap detected.\n            return diff_bisectSplit_(text1, text2, x1, y1);\n          }\n        }\n      }\n    }\n\n    // Walk the reverse path one step.\n    for (var k2 = -d + k2start; k2 <= d - k2end; k2 += 2) {\n      var k2_offset = v_offset + k2;\n      var x2;\n      if (k2 == -d || (k2 != d && v2[k2_offset - 1] < v2[k2_offset + 1])) {\n        x2 = v2[k2_offset + 1];\n      } else {\n        x2 = v2[k2_offset - 1] + 1;\n      }\n      var y2 = x2 - k2;\n      while (x2 < text1_length && y2 < text2_length &&\n             text1.charAt(text1_length - x2 - 1) ==\n             text2.charAt(text2_length - y2 - 1)) {\n        x2++;\n        y2++;\n      }\n      v2[k2_offset] = x2;\n      if (x2 > text1_length) {\n        // Ran off the left of the graph.\n        k2end += 2;\n      } else if (y2 > text2_length) {\n        // Ran off the top of the graph.\n        k2start += 2;\n      } else if (!front) {\n        var k1_offset = v_offset + delta - k2;\n        if (k1_offset >= 0 && k1_offset < v_length && v1[k1_offset] != -1) {\n          var x1 = v1[k1_offset];\n          var y1 = v_offset + x1 - k1_offset;\n          // Mirror x2 onto top-left coordinate system.\n          x2 = text1_length - x2;\n          if (x1 >= x2) {\n            // Overlap detected.\n            return diff_bisectSplit_(text1, text2, x1, y1);\n          }\n        }\n      }\n    }\n  }\n  // Diff took too long and hit the deadline or\n  // number of diffs equals number of characters, no commonality at all.\n  return [[DIFF_DELETE, text1], [DIFF_INSERT, text2]];\n};\n\n\n/**\n * Given the location of the 'middle snake', split the diff in two parts\n * and recurse.\n * @param {string} text1 Old string to be diffed.\n * @param {string} text2 New string to be diffed.\n * @param {number} x Index of split point in text1.\n * @param {number} y Index of split point in text2.\n * @return {Array} Array of diff tuples.\n */\nfunction diff_bisectSplit_(text1, text2, x, y) {\n  var text1a = text1.substring(0, x);\n  var text2a = text2.substring(0, y);\n  var text1b = text1.substring(x);\n  var text2b = text2.substring(y);\n\n  // Compute both diffs serially.\n  var diffs = diff_main(text1a, text2a);\n  var diffsb = diff_main(text1b, text2b);\n\n  return diffs.concat(diffsb);\n};\n\n\n/**\n * Determine the common prefix of two strings.\n * @param {string} text1 First string.\n * @param {string} text2 Second string.\n * @return {number} The number of characters common to the start of each\n *     string.\n */\nfunction diff_commonPrefix(text1, text2) {\n  // Quick check for common null cases.\n  if (!text1 || !text2 || text1.charAt(0) != text2.charAt(0)) {\n    return 0;\n  }\n  // Binary search.\n  // Performance analysis: http://neil.fraser.name/news/2007/10/09/\n  var pointermin = 0;\n  var pointermax = Math.min(text1.length, text2.length);\n  var pointermid = pointermax;\n  var pointerstart = 0;\n  while (pointermin < pointermid) {\n    if (text1.substring(pointerstart, pointermid) ==\n        text2.substring(pointerstart, pointermid)) {\n      pointermin = pointermid;\n      pointerstart = pointermin;\n    } else {\n      pointermax = pointermid;\n    }\n    pointermid = Math.floor((pointermax - pointermin) / 2 + pointermin);\n  }\n  return pointermid;\n};\n\n\n/**\n * Determine the common suffix of two strings.\n * @param {string} text1 First string.\n * @param {string} text2 Second string.\n * @return {number} The number of characters common to the end of each string.\n */\nfunction diff_commonSuffix(text1, text2) {\n  // Quick check for common null cases.\n  if (!text1 || !text2 ||\n      text1.charAt(text1.length - 1) != text2.charAt(text2.length - 1)) {\n    return 0;\n  }\n  // Binary search.\n  // Performance analysis: http://neil.fraser.name/news/2007/10/09/\n  var pointermin = 0;\n  var pointermax = Math.min(text1.length, text2.length);\n  var pointermid = pointermax;\n  var pointerend = 0;\n  while (pointermin < pointermid) {\n    if (text1.substring(text1.length - pointermid, text1.length - pointerend) ==\n        text2.substring(text2.length - pointermid, text2.length - pointerend)) {\n      pointermin = pointermid;\n      pointerend = pointermin;\n    } else {\n      pointermax = pointermid;\n    }\n    pointermid = Math.floor((pointermax - pointermin) / 2 + pointermin);\n  }\n  return pointermid;\n};\n\n\n/**\n * Do the two texts share a substring which is at least half the length of the\n * longer text?\n * This speedup can produce non-minimal diffs.\n * @param {string} text1 First string.\n * @param {string} text2 Second string.\n * @return {Array.<string>} Five element Array, containing the prefix of\n *     text1, the suffix of text1, the prefix of text2, the suffix of\n *     text2 and the common middle.  Or null if there was no match.\n */\nfunction diff_halfMatch_(text1, text2) {\n  var longtext = text1.length > text2.length ? text1 : text2;\n  var shorttext = text1.length > text2.length ? text2 : text1;\n  if (longtext.length < 4 || shorttext.length * 2 < longtext.length) {\n    return null;  // Pointless.\n  }\n\n  /**\n   * Does a substring of shorttext exist within longtext such that the substring\n   * is at least half the length of longtext?\n   * Closure, but does not reference any external variables.\n   * @param {string} longtext Longer string.\n   * @param {string} shorttext Shorter string.\n   * @param {number} i Start index of quarter length substring within longtext.\n   * @return {Array.<string>} Five element Array, containing the prefix of\n   *     longtext, the suffix of longtext, the prefix of shorttext, the suffix\n   *     of shorttext and the common middle.  Or null if there was no match.\n   * @private\n   */\n  function diff_halfMatchI_(longtext, shorttext, i) {\n    // Start with a 1/4 length substring at position i as a seed.\n    var seed = longtext.substring(i, i + Math.floor(longtext.length / 4));\n    var j = -1;\n    var best_common = '';\n    var best_longtext_a, best_longtext_b, best_shorttext_a, best_shorttext_b;\n    while ((j = shorttext.indexOf(seed, j + 1)) != -1) {\n      var prefixLength = diff_commonPrefix(longtext.substring(i),\n                                           shorttext.substring(j));\n      var suffixLength = diff_commonSuffix(longtext.substring(0, i),\n                                           shorttext.substring(0, j));\n      if (best_common.length < suffixLength + prefixLength) {\n        best_common = shorttext.substring(j - suffixLength, j) +\n            shorttext.substring(j, j + prefixLength);\n        best_longtext_a = longtext.substring(0, i - suffixLength);\n        best_longtext_b = longtext.substring(i + prefixLength);\n        best_shorttext_a = shorttext.substring(0, j - suffixLength);\n        best_shorttext_b = shorttext.substring(j + prefixLength);\n      }\n    }\n    if (best_common.length * 2 >= longtext.length) {\n      return [best_longtext_a, best_longtext_b,\n              best_shorttext_a, best_shorttext_b, best_common];\n    } else {\n      return null;\n    }\n  }\n\n  // First check if the second quarter is the seed for a half-match.\n  var hm1 = diff_halfMatchI_(longtext, shorttext,\n                             Math.ceil(longtext.length / 4));\n  // Check again based on the third quarter.\n  var hm2 = diff_halfMatchI_(longtext, shorttext,\n                             Math.ceil(longtext.length / 2));\n  var hm;\n  if (!hm1 && !hm2) {\n    return null;\n  } else if (!hm2) {\n    hm = hm1;\n  } else if (!hm1) {\n    hm = hm2;\n  } else {\n    // Both matched.  Select the longest.\n    hm = hm1[4].length > hm2[4].length ? hm1 : hm2;\n  }\n\n  // A half-match was found, sort out the return data.\n  var text1_a, text1_b, text2_a, text2_b;\n  if (text1.length > text2.length) {\n    text1_a = hm[0];\n    text1_b = hm[1];\n    text2_a = hm[2];\n    text2_b = hm[3];\n  } else {\n    text2_a = hm[0];\n    text2_b = hm[1];\n    text1_a = hm[2];\n    text1_b = hm[3];\n  }\n  var mid_common = hm[4];\n  return [text1_a, text1_b, text2_a, text2_b, mid_common];\n};\n\n\n/**\n * Reorder and merge like edit sections.  Merge equalities.\n * Any edit section can move as long as it doesn't cross an equality.\n * @param {Array} diffs Array of diff tuples.\n */\nfunction diff_cleanupMerge(diffs) {\n  diffs.push([DIFF_EQUAL, '']);  // Add a dummy entry at the end.\n  var pointer = 0;\n  var count_delete = 0;\n  var count_insert = 0;\n  var text_delete = '';\n  var text_insert = '';\n  var commonlength;\n  while (pointer < diffs.length) {\n    switch (diffs[pointer][0]) {\n      case DIFF_INSERT:\n        count_insert++;\n        text_insert += diffs[pointer][1];\n        pointer++;\n        break;\n      case DIFF_DELETE:\n        count_delete++;\n        text_delete += diffs[pointer][1];\n        pointer++;\n        break;\n      case DIFF_EQUAL:\n        // Upon reaching an equality, check for prior redundancies.\n        if (count_delete + count_insert > 1) {\n          if (count_delete !== 0 && count_insert !== 0) {\n            // Factor out any common prefixies.\n            commonlength = diff_commonPrefix(text_insert, text_delete);\n            if (commonlength !== 0) {\n              if ((pointer - count_delete - count_insert) > 0 &&\n                  diffs[pointer - count_delete - count_insert - 1][0] ==\n                  DIFF_EQUAL) {\n                diffs[pointer - count_delete - count_insert - 1][1] +=\n                    text_insert.substring(0, commonlength);\n              } else {\n                diffs.splice(0, 0, [DIFF_EQUAL,\n                                    text_insert.substring(0, commonlength)]);\n                pointer++;\n              }\n              text_insert = text_insert.substring(commonlength);\n              text_delete = text_delete.substring(commonlength);\n            }\n            // Factor out any common suffixies.\n            commonlength = diff_commonSuffix(text_insert, text_delete);\n            if (commonlength !== 0) {\n              diffs[pointer][1] = text_insert.substring(text_insert.length -\n                  commonlength) + diffs[pointer][1];\n              text_insert = text_insert.substring(0, text_insert.length -\n                  commonlength);\n              text_delete = text_delete.substring(0, text_delete.length -\n                  commonlength);\n            }\n          }\n          // Delete the offending records and add the merged ones.\n          if (count_delete === 0) {\n            diffs.splice(pointer - count_insert,\n                count_delete + count_insert, [DIFF_INSERT, text_insert]);\n          } else if (count_insert === 0) {\n            diffs.splice(pointer - count_delete,\n                count_delete + count_insert, [DIFF_DELETE, text_delete]);\n          } else {\n            diffs.splice(pointer - count_delete - count_insert,\n                count_delete + count_insert, [DIFF_DELETE, text_delete],\n                [DIFF_INSERT, text_insert]);\n          }\n          pointer = pointer - count_delete - count_insert +\n                    (count_delete ? 1 : 0) + (count_insert ? 1 : 0) + 1;\n        } else if (pointer !== 0 && diffs[pointer - 1][0] == DIFF_EQUAL) {\n          // Merge this equality with the previous one.\n          diffs[pointer - 1][1] += diffs[pointer][1];\n          diffs.splice(pointer, 1);\n        } else {\n          pointer++;\n        }\n        count_insert = 0;\n        count_delete = 0;\n        text_delete = '';\n        text_insert = '';\n        break;\n    }\n  }\n  if (diffs[diffs.length - 1][1] === '') {\n    diffs.pop();  // Remove the dummy entry at the end.\n  }\n\n  // Second pass: look for single edits surrounded on both sides by equalities\n  // which can be shifted sideways to eliminate an equality.\n  // e.g: A<ins>BA</ins>C -> <ins>AB</ins>AC\n  var changes = false;\n  pointer = 1;\n  // Intentionally ignore the first and last element (don't need checking).\n  while (pointer < diffs.length - 1) {\n    if (diffs[pointer - 1][0] == DIFF_EQUAL &&\n        diffs[pointer + 1][0] == DIFF_EQUAL) {\n      // This is a single edit surrounded by equalities.\n      if (diffs[pointer][1].substring(diffs[pointer][1].length -\n          diffs[pointer - 1][1].length) == diffs[pointer - 1][1]) {\n        // Shift the edit over the previous equality.\n        diffs[pointer][1] = diffs[pointer - 1][1] +\n            diffs[pointer][1].substring(0, diffs[pointer][1].length -\n                                        diffs[pointer - 1][1].length);\n        diffs[pointer + 1][1] = diffs[pointer - 1][1] + diffs[pointer + 1][1];\n        diffs.splice(pointer - 1, 1);\n        changes = true;\n      } else if (diffs[pointer][1].substring(0, diffs[pointer + 1][1].length) ==\n          diffs[pointer + 1][1]) {\n        // Shift the edit over the next equality.\n        diffs[pointer - 1][1] += diffs[pointer + 1][1];\n        diffs[pointer][1] =\n            diffs[pointer][1].substring(diffs[pointer + 1][1].length) +\n            diffs[pointer + 1][1];\n        diffs.splice(pointer + 1, 1);\n        changes = true;\n      }\n    }\n    pointer++;\n  }\n  // If shifts were made, the diff needs reordering and another shift sweep.\n  if (changes) {\n    diff_cleanupMerge(diffs);\n  }\n};\n\n\nvar diff = diff_main;\ndiff.INSERT = DIFF_INSERT;\ndiff.DELETE = DIFF_DELETE;\ndiff.EQUAL = DIFF_EQUAL;\n\nmodule.exports = diff;\n\n/*\n * Modify a diff such that the cursor position points to the start of a change:\n * E.g.\n *   cursor_normalize_diff([[DIFF_EQUAL, 'abc']], 1)\n *     => [1, [[DIFF_EQUAL, 'a'], [DIFF_EQUAL, 'bc']]]\n *   cursor_normalize_diff([[DIFF_INSERT, 'new'], [DIFF_DELETE, 'xyz']], 2)\n *     => [2, [[DIFF_INSERT, 'new'], [DIFF_DELETE, 'xy'], [DIFF_DELETE, 'z']]]\n *\n * @param {Array} diffs Array of diff tuples\n * @param {Int} cursor_pos Suggested edit position. Must not be out of bounds!\n * @return {Array} A tuple [cursor location in the modified diff, modified diff]\n */\nfunction cursor_normalize_diff (diffs, cursor_pos) {\n  if (cursor_pos === 0) {\n    return [DIFF_EQUAL, diffs];\n  }\n  for (var current_pos = 0, i = 0; i < diffs.length; i++) {\n    var d = diffs[i];\n    if (d[0] === DIFF_DELETE || d[0] === DIFF_EQUAL) {\n      var next_pos = current_pos + d[1].length;\n      if (cursor_pos === next_pos) {\n        return [i + 1, diffs];\n      } else if (cursor_pos < next_pos) {\n        // copy to prevent side effects\n        diffs = diffs.slice();\n        // split d into two diff changes\n        var split_pos = cursor_pos - current_pos;\n        var d_left = [d[0], d[1].slice(0, split_pos)];\n        var d_right = [d[0], d[1].slice(split_pos)];\n        diffs.splice(i, 1, d_left, d_right);\n        return [i + 1, diffs];\n      } else {\n        current_pos = next_pos;\n      }\n    }\n  }\n  throw new Error('cursor_pos is out of bounds!')\n}\n\n/*\n * Modify a diff such that the edit position is \"shifted\" to the proposed edit location (cursor_position).\n *\n * Case 1)\n *   Check if a naive shift is possible:\n *     [0, X], [ 1, Y] -> [ 1, Y], [0, X]    (if X + Y === Y + X)\n *     [0, X], [-1, Y] -> [-1, Y], [0, X]    (if X + Y === Y + X) - holds same result\n * Case 2)\n *   Check if the following shifts are possible:\n *     [0, 'pre'], [ 1, 'prefix'] -> [ 1, 'pre'], [0, 'pre'], [ 1, 'fix']\n *     [0, 'pre'], [-1, 'prefix'] -> [-1, 'pre'], [0, 'pre'], [-1, 'fix']\n *         ^            ^\n *         d          d_next\n *\n * @param {Array} diffs Array of diff tuples\n * @param {Int} cursor_pos Suggested edit position. Must not be out of bounds!\n * @return {Array} Array of diff tuples\n */\nfunction fix_cursor (diffs, cursor_pos) {\n  var norm = cursor_normalize_diff(diffs, cursor_pos);\n  var ndiffs = norm[1];\n  var cursor_pointer = norm[0];\n  var d = ndiffs[cursor_pointer];\n  var d_next = ndiffs[cursor_pointer + 1];\n\n  if (d == null) {\n    // Text was deleted from end of original string,\n    // cursor is now out of bounds in new string\n    return diffs;\n  } else if (d[0] !== DIFF_EQUAL) {\n    // A modification happened at the cursor location.\n    // This is the expected outcome, so we can return the original diff.\n    return diffs;\n  } else {\n    if (d_next != null && d[1] + d_next[1] === d_next[1] + d[1]) {\n      // Case 1)\n      // It is possible to perform a naive shift\n      ndiffs.splice(cursor_pointer, 2, d_next, d)\n      return merge_tuples(ndiffs, cursor_pointer, 2)\n    } else if (d_next != null && d_next[1].indexOf(d[1]) === 0) {\n      // Case 2)\n      // d[1] is a prefix of d_next[1]\n      // We can assume that d_next[0] !== 0, since d[0] === 0\n      // Shift edit locations..\n      ndiffs.splice(cursor_pointer, 2, [d_next[0], d[1]], [0, d[1]]);\n      var suffix = d_next[1].slice(d[1].length);\n      if (suffix.length > 0) {\n        ndiffs.splice(cursor_pointer + 2, 0, [d_next[0], suffix]);\n      }\n      return merge_tuples(ndiffs, cursor_pointer, 3)\n    } else {\n      // Not possible to perform any modification\n      return diffs;\n    }\n  }\n}\n\n/*\n * Check diff did not split surrogate pairs.\n * Ex. [0, '\\uD83D'], [-1, '\\uDC36'], [1, '\\uDC2F'] -> [-1, '\\uD83D\\uDC36'], [1, '\\uD83D\\uDC2F']\n *     '\\uD83D\\uDC36' === '', '\\uD83D\\uDC2F' === ''\n *\n * @param {Array} diffs Array of diff tuples\n * @return {Array} Array of diff tuples\n */\nfunction fix_emoji (diffs) {\n  var compact = false;\n  var starts_with_pair_end = function(str) {\n    return str.charCodeAt(0) >= 0xDC00 && str.charCodeAt(0) <= 0xDFFF;\n  }\n  var ends_with_pair_start = function(str) {\n    return str.charCodeAt(str.length-1) >= 0xD800 && str.charCodeAt(str.length-1) <= 0xDBFF;\n  }\n  for (var i = 2; i < diffs.length; i += 1) {\n    if (diffs[i-2][0] === DIFF_EQUAL && ends_with_pair_start(diffs[i-2][1]) &&\n        diffs[i-1][0] === DIFF_DELETE && starts_with_pair_end(diffs[i-1][1]) &&\n        diffs[i][0] === DIFF_INSERT && starts_with_pair_end(diffs[i][1])) {\n      compact = true;\n\n      diffs[i-1][1] = diffs[i-2][1].slice(-1) + diffs[i-1][1];\n      diffs[i][1] = diffs[i-2][1].slice(-1) + diffs[i][1];\n\n      diffs[i-2][1] = diffs[i-2][1].slice(0, -1);\n    }\n  }\n  if (!compact) {\n    return diffs;\n  }\n  var fixed_diffs = [];\n  for (var i = 0; i < diffs.length; i += 1) {\n    if (diffs[i][1].length > 0) {\n      fixed_diffs.push(diffs[i]);\n    }\n  }\n  return fixed_diffs;\n}\n\n/*\n * Try to merge tuples with their neigbors in a given range.\n * E.g. [0, 'a'], [0, 'b'] -> [0, 'ab']\n *\n * @param {Array} diffs Array of diff tuples.\n * @param {Int} start Position of the first element to merge (diffs[start] is also merged with diffs[start - 1]).\n * @param {Int} length Number of consecutive elements to check.\n * @return {Array} Array of merged diff tuples.\n */\nfunction merge_tuples (diffs, start, length) {\n  // Check from (start-1) to (start+length).\n  for (var i = start + length - 1; i >= 0 && i >= start - 1; i--) {\n    if (i + 1 < diffs.length) {\n      var left_d = diffs[i];\n      var right_d = diffs[i+1];\n      if (left_d[0] === right_d[1]) {\n        diffs.splice(i, 2, [left_d[0], left_d[1] + right_d[1]]);\n      }\n    }\n  }\n  return diffs;\n}\n","exports = module.exports = typeof Object.keys === 'function'\n  ? Object.keys : shim;\n\nexports.shim = shim;\nfunction shim (obj) {\n  var keys = [];\n  for (var key in obj) keys.push(key);\n  return keys;\n}\n","var supportsArgumentsClass = (function(){\n  return Object.prototype.toString.call(arguments)\n})() == '[object Arguments]';\n\nexports = module.exports = supportsArgumentsClass ? supported : unsupported;\n\nexports.supported = supported;\nfunction supported(object) {\n  return Object.prototype.toString.call(object) == '[object Arguments]';\n};\n\nexports.unsupported = unsupported;\nfunction unsupported(object){\n  return object &&\n    typeof object == 'object' &&\n    typeof object.length == 'number' &&\n    Object.prototype.hasOwnProperty.call(object, 'callee') &&\n    !Object.prototype.propertyIsEnumerable.call(object, 'callee') ||\n    false;\n};\n","import clone from 'clone';\r\nimport equal from 'deep-equal';\r\nimport extend from 'extend';\r\nimport Delta from 'quill-delta';\r\nimport DeltaOp from 'quill-delta/lib/op';\r\nimport { LeafBlot } from 'parchment';\r\nimport { Range } from './selection';\r\nimport CursorBlot from '../blots/cursor';\r\nimport Block, { BlockEmbed, bubbleFormats } from '../blots/block';\r\nimport Break from '../blots/break';\r\nimport TextBlot, { escapeText } from '../blots/text';\r\n\r\nconst ASCII = /^[ -~]*$/;\r\n\r\nclass Editor {\r\n  constructor(scroll) {\r\n    this.scroll = scroll;\r\n    this.delta = this.getDelta();\r\n  }\r\n\r\n  applyDelta(delta) {\r\n    let consumeNextNewline = false;\r\n    this.scroll.update();\r\n    let scrollLength = this.scroll.length();\r\n    this.scroll.batchStart();\r\n    const normalizedDelta = normalizeDelta(delta);\r\n    normalizedDelta.reduce((index, op) => {\r\n      const length = op.retain || op.delete || op.insert.length || 1;\r\n      let attributes = op.attributes || {};\r\n      if (op.insert != null) {\r\n        if (typeof op.insert === 'string') {\r\n          let text = op.insert;\r\n          if (text.endsWith('\\n') && consumeNextNewline) {\r\n            consumeNextNewline = false;\r\n            text = text.slice(0, -1);\r\n          }\r\n          if (\r\n            (index >= scrollLength ||\r\n              this.scroll.descendant(BlockEmbed, index)[0]) &&\r\n            !text.endsWith('\\n')\r\n          ) {\r\n            consumeNextNewline = true;\r\n          }\r\n          this.scroll.insertAt(index, text);\r\n          const [line, offset] = this.scroll.line(index);\r\n          let formats = extend({}, bubbleFormats(line));\r\n          if (line instanceof Block) {\r\n            const [leaf] = line.descendant(LeafBlot, offset);\r\n            formats = extend(formats, bubbleFormats(leaf));\r\n          }\r\n          attributes = DeltaOp.attributes.diff(formats, attributes) || {};\r\n        } else if (typeof op.insert === 'object') {\r\n          const key = Object.keys(op.insert)[0]; // There should only be one key\r\n          if (key == null) return index;\r\n          this.scroll.insertAt(index, key, op.insert[key]);\r\n        }\r\n        scrollLength += length;\r\n      }\r\n      Object.keys(attributes).forEach(name => {\r\n        this.scroll.formatAt(index, length, name, attributes[name]);\r\n      });\r\n      return index + length;\r\n    }, 0);\r\n    normalizedDelta.reduce((index, op) => {\r\n      if (typeof op.delete === 'number') {\r\n        this.scroll.deleteAt(index, op.delete);\r\n        return index;\r\n      }\r\n      return index + (op.retain || op.insert.length || 1);\r\n    }, 0);\r\n    this.scroll.batchEnd();\r\n    this.scroll.optimize();\r\n    return this.update(normalizedDelta);\r\n  }\r\n\r\n  deleteText(index, length) {\r\n    this.scroll.deleteAt(index, length);\r\n    return this.update(new Delta().retain(index).delete(length));\r\n  }\r\n\r\n  formatLine(index, length, formats = {}) {\r\n    this.scroll.update();\r\n    Object.keys(formats).forEach(format => {\r\n      this.scroll.lines(index, Math.max(length, 1)).forEach(line => {\r\n        line.format(format, formats[format]);\r\n      });\r\n    });\r\n    this.scroll.optimize();\r\n    const delta = new Delta().retain(index).retain(length, clone(formats));\r\n    return this.update(delta);\r\n  }\r\n\r\n  formatText(index, length, formats = {}) {\r\n    Object.keys(formats).forEach(format => {\r\n      this.scroll.formatAt(index, length, format, formats[format]);\r\n    });\r\n    const delta = new Delta().retain(index).retain(length, clone(formats));\r\n    return this.update(delta);\r\n  }\r\n\r\n  getContents(index, length) {\r\n    return this.delta.slice(index, index + length);\r\n  }\r\n\r\n  getDelta() {\r\n    return this.scroll.lines().reduce((delta, line) => {\r\n      return delta.concat(line.delta());\r\n    }, new Delta());\r\n  }\r\n\r\n  getFormat(index, length = 0) {\r\n    let lines = [];\r\n    let leaves = [];\r\n    if (length === 0) {\r\n      this.scroll.path(index).forEach(path => {\r\n        const [blot] = path;\r\n        if (blot instanceof Block) {\r\n          lines.push(blot);\r\n        } else if (blot instanceof LeafBlot) {\r\n          leaves.push(blot);\r\n        }\r\n      });\r\n    } else {\r\n      lines = this.scroll.lines(index, length);\r\n      leaves = this.scroll.descendants(LeafBlot, index, length);\r\n    }\r\n    const formatsArr = [lines, leaves].map(blots => {\r\n      if (blots.length === 0) return {};\r\n      let formats = bubbleFormats(blots.shift());\r\n      while (Object.keys(formats).length > 0) {\r\n        const blot = blots.shift();\r\n        if (blot == null) return formats;\r\n        formats = combineFormats(bubbleFormats(blot), formats);\r\n      }\r\n      return formats;\r\n    });\r\n    return extend.apply(extend, formatsArr);\r\n  }\r\n\r\n  getHTML(index, length) {\r\n    const [line, lineOffset] = this.scroll.line(index);\r\n    if (line.length() >= lineOffset + length) {\r\n      return convertHTML(line, lineOffset, length, true);\r\n    }\r\n    return convertHTML(this.scroll, index, length, true);\r\n  }\r\n\r\n  getText(index, length) {\r\n    return this.getContents(index, length)\r\n      .filter(op => typeof op.insert === 'string')\r\n      .map(op => op.insert)\r\n      .join('');\r\n  }\r\n\r\n  insertEmbed(index, embed, value) {\r\n    this.scroll.insertAt(index, embed, value);\r\n    return this.update(new Delta().retain(index).insert({ [embed]: value }));\r\n  }\r\n\r\n  insertText(index, text, formats = {}) {\r\n    text = text.replace(/\\r\\n/g, '\\n').replace(/\\r/g, '\\n');\r\n    this.scroll.insertAt(index, text);\r\n    Object.keys(formats).forEach(format => {\r\n      this.scroll.formatAt(index, text.length, format, formats[format]);\r\n    });\r\n    return this.update(new Delta().retain(index).insert(text, clone(formats)));\r\n  }\r\n\r\n  isBlank() {\r\n    if (this.scroll.children.length === 0) return true;\r\n    if (this.scroll.children.length > 1) return false;\r\n    const block = this.scroll.children.head;\r\n    if (block.statics.blotName !== Block.blotName) return false;\r\n    if (block.children.length > 1) return false;\r\n    return block.children.head instanceof Break;\r\n  }\r\n\r\n  removeFormat(index, length) {\r\n    const text = this.getText(index, length);\r\n    const [line, offset] = this.scroll.line(index + length);\r\n    let suffixLength = 0;\r\n    let suffix = new Delta();\r\n    if (line != null) {\r\n      suffixLength = line.length() - offset;\r\n      suffix = line\r\n        .delta()\r\n        .slice(offset, offset + suffixLength - 1)\r\n        .insert('\\n');\r\n    }\r\n    const contents = this.getContents(index, length + suffixLength);\r\n    const diff = contents.diff(new Delta().insert(text).concat(suffix));\r\n    const delta = new Delta().retain(index).concat(diff);\r\n    return this.applyDelta(delta);\r\n  }\r\n\r\n  update(change, mutations = [], selectionInfo = undefined) {\r\n    const oldDelta = this.delta;\r\n    if (\r\n      mutations.length === 1 &&\r\n      mutations[0].type === 'characterData' &&\r\n      mutations[0].target.data.match(ASCII) &&\r\n      this.scroll.find(mutations[0].target)\r\n    ) {\r\n      // Optimization for character changes\r\n      const textBlot = this.scroll.find(mutations[0].target);\r\n      const formats = bubbleFormats(textBlot);\r\n      const index = textBlot.offset(this.scroll);\r\n      const oldValue = mutations[0].oldValue.replace(CursorBlot.CONTENTS, '');\r\n      const oldText = new Delta().insert(oldValue);\r\n      const newText = new Delta().insert(textBlot.value());\r\n      const relativeSelectionInfo = selectionInfo && [\r\n        new Range(selectionInfo[0].index - index, selectionInfo[0].length),\r\n        new Range(selectionInfo[1].index - index, selectionInfo[1].length),\r\n      ];\r\n      const diffDelta = new Delta()\r\n        .retain(index)\r\n        .concat(diffDeltas(oldText, newText, relativeSelectionInfo));\r\n      change = diffDelta.reduce((delta, op) => {\r\n        if (op.insert) {\r\n          return delta.insert(op.insert, formats);\r\n        }\r\n        return delta.push(op);\r\n      }, new Delta());\r\n      this.delta = oldDelta.compose(change);\r\n    } else {\r\n      this.delta = this.getDelta();\r\n      if (!change || !equal(oldDelta.compose(change), this.delta)) {\r\n        change = diffDeltas(oldDelta, this.delta, selectionInfo);\r\n      }\r\n    }\r\n    return change;\r\n  }\r\n}\r\n\r\nfunction convertListHTML(items, lastIndent, types) {\r\n  if (items.length === 0) {\r\n    const [endTag] = getListType(types.pop());\r\n    if (lastIndent <= 0) {\r\n      return `</li></${endTag}>`;\r\n    }\r\n    return `</li></${endTag}>${convertListHTML([], lastIndent - 1, types)}`;\r\n  }\r\n  const [{ child, offset, length, indent, type }, ...rest] = items;\r\n  const [tag, attribute] = getListType(type);\r\n  if (indent > lastIndent) {\r\n    types.push(type);\r\n    return `<${tag}><li${attribute}>${convertHTML(\r\n      child,\r\n      offset,\r\n      length,\r\n    )}${convertListHTML(rest, indent, types)}`;\r\n  }\r\n  if (indent === lastIndent) {\r\n    return `</li><li${attribute}>${convertHTML(\r\n      child,\r\n      offset,\r\n      length,\r\n    )}${convertListHTML(rest, indent, types)}`;\r\n  }\r\n  const [endTag] = getListType(types.pop());\r\n  return `</li></${endTag}>${convertListHTML(items, lastIndent - 1, types)}`;\r\n}\r\n\r\nfunction convertHTML(blot, index, length, isRoot = false) {\r\n  if (typeof blot.html === 'function') {\r\n    return blot.html(index, length);\r\n  }\r\n  if (blot instanceof TextBlot) {\r\n    return escapeText(blot.value().slice(index, index + length));\r\n  }\r\n  if (blot.children) {\r\n    // TODO fix API\r\n    if (blot.statics.blotName === 'list-container') {\r\n      const items = [];\r\n      blot.children.forEachAt(index, length, (child, offset, childLength) => {\r\n        const formats = child.formats();\r\n        items.push({\r\n          child,\r\n          offset,\r\n          length: childLength,\r\n          indent: formats.indent || 0,\r\n          type: formats.list,\r\n        });\r\n      });\r\n      return convertListHTML(items, -1, []);\r\n    }\r\n    const parts = [];\r\n    blot.children.forEachAt(index, length, (child, offset, childLength) => {\r\n      parts.push(convertHTML(child, offset, childLength));\r\n    });\r\n    if (isRoot || blot.statics.blotName === 'list') {\r\n      return parts.join('');\r\n    }\r\n    const { outerHTML, innerHTML } = blot.domNode;\r\n    const [start, end] = outerHTML.split(`>${innerHTML}<`);\r\n    // TODO cleanup\r\n    if (start === '<table') {\r\n      return `<table style=\"border: 1px solid #000;\">${parts.join('')}<${end}`;\r\n    }\r\n    return `${start}>${parts.join('')}<${end}`;\r\n  }\r\n  return blot.domNode.outerHTML;\r\n}\r\n\r\nfunction combineFormats(formats, combined) {\r\n  return Object.keys(combined).reduce((merged, name) => {\r\n    if (formats[name] == null) return merged;\r\n    if (combined[name] === formats[name]) {\r\n      merged[name] = combined[name];\r\n    } else if (Array.isArray(combined[name])) {\r\n      if (combined[name].indexOf(formats[name]) < 0) {\r\n        merged[name] = combined[name].concat([formats[name]]);\r\n      }\r\n    } else {\r\n      merged[name] = [combined[name], formats[name]];\r\n    }\r\n    return merged;\r\n  }, {});\r\n}\r\n\r\nfunction getListType(type) {\r\n  const tag = type === 'ordered' ? 'ol' : 'ul';\r\n  switch (type) {\r\n    case 'checked':\r\n      return [tag, ' data-list=\"checked\"'];\r\n    case 'unchecked':\r\n      return [tag, ' data-list=\"unchecked\"'];\r\n    default:\r\n      return [tag, ''];\r\n  }\r\n}\r\n\r\nfunction normalizeDelta(delta) {\r\n  return delta.reduce((normalizedDelta, op) => {\r\n    if (typeof op.insert === 'string') {\r\n      const text = op.insert.replace(/\\r\\n/g, '\\n').replace(/\\r/g, '\\n');\r\n      return normalizedDelta.insert(text, op.attributes);\r\n    }\r\n    return normalizedDelta.push(op);\r\n  }, new Delta());\r\n}\r\n\r\nfunction splitDelta(delta, index) {\r\n  return [delta.slice(0, index), delta.slice(index)];\r\n}\r\n\r\nfunction diffDeltas(oldDelta, newDelta, selectionInfo = undefined) {\r\n  if (selectionInfo == null) {\r\n    return oldDelta.diff(newDelta);\r\n  }\r\n\r\n  // generate better diffs than Delta#diff by taking into account the\r\n  // old and new selection.  for example, a text change from \"xxx\" to \"xx\"\r\n  // could be a delete or forwards-delete of any one of the x's, or the\r\n  // result of selecting two of the x's and typing \"x\".\r\n  const [oldSelection, newSelection] = selectionInfo;\r\n  const oldDeltaLength = oldDelta.length();\r\n  const newDeltaLength = newDelta.length();\r\n  if (oldSelection.length === 0 && newSelection.length === 0) {\r\n    // see if we have an insert or delete before or after cursor\r\n    const oldCursor = oldSelection.index;\r\n    const newCursor = newSelection.index;\r\n    const [oldBefore, oldAfter] = splitDelta(oldDelta, oldCursor);\r\n    const [newBefore, newAfter] = splitDelta(newDelta, newCursor);\r\n    if (equal(oldAfter, newAfter)) {\r\n      const prefixLength = Math.min(oldCursor, newCursor);\r\n      const [oldPrefix, oldMiddle] = splitDelta(oldBefore, prefixLength);\r\n      const [newPrefix, newMiddle] = splitDelta(newBefore, prefixLength);\r\n      if (equal(oldPrefix, newPrefix)) {\r\n        // insert or delete right before cursor\r\n        return new Delta()\r\n          .retain(prefixLength)\r\n          .concat(oldMiddle.diff(newMiddle));\r\n      }\r\n    } else if (equal(oldBefore, newBefore)) {\r\n      const suffixLength = Math.min(\r\n        oldDeltaLength - oldCursor,\r\n        newDeltaLength - newCursor,\r\n      );\r\n      const [oldMiddle, oldSuffix] = splitDelta(\r\n        oldAfter,\r\n        oldDeltaLength - oldCursor - suffixLength,\r\n      );\r\n      const [newMiddle, newSuffix] = splitDelta(\r\n        newAfter,\r\n        newDeltaLength - newCursor - suffixLength,\r\n      );\r\n      if (equal(oldSuffix, newSuffix)) {\r\n        // insert or delete right after cursor\r\n        return new Delta().retain(oldCursor).concat(oldMiddle.diff(newMiddle));\r\n      }\r\n    }\r\n  }\r\n  if (oldSelection.length > 0 && newSelection.length === 0) {\r\n    // see if diff could be a splice of the old selection range\r\n    const oldPrefix = oldDelta.slice(0, oldSelection.index);\r\n    const oldSuffix = oldDelta.slice(oldSelection.index + oldSelection.length);\r\n    const prefixLength = oldPrefix.length();\r\n    const suffixLength = oldSuffix.length();\r\n    if (newDeltaLength >= prefixLength + suffixLength) {\r\n      const newPrefix = newDelta.slice(0, prefixLength);\r\n      const newSuffix = newDelta.slice(newDeltaLength - suffixLength);\r\n      if (equal(oldPrefix, newPrefix) && equal(oldSuffix, newSuffix)) {\r\n        const oldMiddle = oldDelta.slice(\r\n          prefixLength,\r\n          oldDeltaLength - suffixLength,\r\n        );\r\n        const newMiddle = newDelta.slice(\r\n          prefixLength,\r\n          newDeltaLength - suffixLength,\r\n        );\r\n        return new Delta()\r\n          .retain(prefixLength)\r\n          .concat(newMiddle)\r\n          .delete(oldMiddle.length());\r\n      }\r\n    }\r\n  }\r\n\r\n  return oldDelta.diff(newDelta);\r\n}\r\n\r\nexport default Editor;\r\n","/*!\n * The buffer module from node.js, for the browser.\n *\n * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>\n * @license  MIT\n */\n/* eslint-disable no-proto */\n\n'use strict'\n\nvar base64 = require('base64-js')\nvar ieee754 = require('ieee754')\nvar isArray = require('isarray')\n\nexports.Buffer = Buffer\nexports.SlowBuffer = SlowBuffer\nexports.INSPECT_MAX_BYTES = 50\n\n/**\n * If `Buffer.TYPED_ARRAY_SUPPORT`:\n *   === true    Use Uint8Array implementation (fastest)\n *   === false   Use Object implementation (most compatible, even IE6)\n *\n * Browsers that support typed arrays are IE 10+, Firefox 4+, Chrome 7+, Safari 5.1+,\n * Opera 11.6+, iOS 4.2+.\n *\n * Due to various browser bugs, sometimes the Object implementation will be used even\n * when the browser supports typed arrays.\n *\n * Note:\n *\n *   - Firefox 4-29 lacks support for adding new properties to `Uint8Array` instances,\n *     See: https://bugzilla.mozilla.org/show_bug.cgi?id=695438.\n *\n *   - Chrome 9-10 is missing the `TypedArray.prototype.subarray` function.\n *\n *   - IE10 has a broken `TypedArray.prototype.subarray` function which returns arrays of\n *     incorrect length in some situations.\n\n * We detect these buggy browsers and set `Buffer.TYPED_ARRAY_SUPPORT` to `false` so they\n * get the Object implementation, which is slower but behaves correctly.\n */\nBuffer.TYPED_ARRAY_SUPPORT = global.TYPED_ARRAY_SUPPORT !== undefined\n  ? global.TYPED_ARRAY_SUPPORT\n  : typedArraySupport()\n\n/*\n * Export kMaxLength after typed array support is determined.\n */\nexports.kMaxLength = kMaxLength()\n\nfunction typedArraySupport () {\n  try {\n    var arr = new Uint8Array(1)\n    arr.__proto__ = {__proto__: Uint8Array.prototype, foo: function () { return 42 }}\n    return arr.foo() === 42 && // typed array instances can be augmented\n        typeof arr.subarray === 'function' && // chrome 9-10 lack `subarray`\n        arr.subarray(1, 1).byteLength === 0 // ie10 has broken `subarray`\n  } catch (e) {\n    return false\n  }\n}\n\nfunction kMaxLength () {\n  return Buffer.TYPED_ARRAY_SUPPORT\n    ? 0x7fffffff\n    : 0x3fffffff\n}\n\nfunction createBuffer (that, length) {\n  if (kMaxLength() < length) {\n    throw new RangeError('Invalid typed array length')\n  }\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    // Return an augmented `Uint8Array` instance, for best performance\n    that = new Uint8Array(length)\n    that.__proto__ = Buffer.prototype\n  } else {\n    // Fallback: Return an object instance of the Buffer class\n    if (that === null) {\n      that = new Buffer(length)\n    }\n    that.length = length\n  }\n\n  return that\n}\n\n/**\n * The Buffer constructor returns instances of `Uint8Array` that have their\n * prototype changed to `Buffer.prototype`. Furthermore, `Buffer` is a subclass of\n * `Uint8Array`, so the returned instances will have all the node `Buffer` methods\n * and the `Uint8Array` methods. Square bracket notation works as expected -- it\n * returns a single octet.\n *\n * The `Uint8Array` prototype remains unmodified.\n */\n\nfunction Buffer (arg, encodingOrOffset, length) {\n  if (!Buffer.TYPED_ARRAY_SUPPORT && !(this instanceof Buffer)) {\n    return new Buffer(arg, encodingOrOffset, length)\n  }\n\n  // Common case.\n  if (typeof arg === 'number') {\n    if (typeof encodingOrOffset === 'string') {\n      throw new Error(\n        'If encoding is specified then the first argument must be a string'\n      )\n    }\n    return allocUnsafe(this, arg)\n  }\n  return from(this, arg, encodingOrOffset, length)\n}\n\nBuffer.poolSize = 8192 // not used by this implementation\n\n// TODO: Legacy, not needed anymore. Remove in next major version.\nBuffer._augment = function (arr) {\n  arr.__proto__ = Buffer.prototype\n  return arr\n}\n\nfunction from (that, value, encodingOrOffset, length) {\n  if (typeof value === 'number') {\n    throw new TypeError('\"value\" argument must not be a number')\n  }\n\n  if (typeof ArrayBuffer !== 'undefined' && value instanceof ArrayBuffer) {\n    return fromArrayBuffer(that, value, encodingOrOffset, length)\n  }\n\n  if (typeof value === 'string') {\n    return fromString(that, value, encodingOrOffset)\n  }\n\n  return fromObject(that, value)\n}\n\n/**\n * Functionally equivalent to Buffer(arg, encoding) but throws a TypeError\n * if value is a number.\n * Buffer.from(str[, encoding])\n * Buffer.from(array)\n * Buffer.from(buffer)\n * Buffer.from(arrayBuffer[, byteOffset[, length]])\n **/\nBuffer.from = function (value, encodingOrOffset, length) {\n  return from(null, value, encodingOrOffset, length)\n}\n\nif (Buffer.TYPED_ARRAY_SUPPORT) {\n  Buffer.prototype.__proto__ = Uint8Array.prototype\n  Buffer.__proto__ = Uint8Array\n  if (typeof Symbol !== 'undefined' && Symbol.species &&\n      Buffer[Symbol.species] === Buffer) {\n    // Fix subarray() in ES2016. See: https://github.com/feross/buffer/pull/97\n    Object.defineProperty(Buffer, Symbol.species, {\n      value: null,\n      configurable: true\n    })\n  }\n}\n\nfunction assertSize (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('\"size\" argument must be a number')\n  } else if (size < 0) {\n    throw new RangeError('\"size\" argument must not be negative')\n  }\n}\n\nfunction alloc (that, size, fill, encoding) {\n  assertSize(size)\n  if (size <= 0) {\n    return createBuffer(that, size)\n  }\n  if (fill !== undefined) {\n    // Only pay attention to encoding if it's a string. This\n    // prevents accidentally sending in a number that would\n    // be interpretted as a start offset.\n    return typeof encoding === 'string'\n      ? createBuffer(that, size).fill(fill, encoding)\n      : createBuffer(that, size).fill(fill)\n  }\n  return createBuffer(that, size)\n}\n\n/**\n * Creates a new filled Buffer instance.\n * alloc(size[, fill[, encoding]])\n **/\nBuffer.alloc = function (size, fill, encoding) {\n  return alloc(null, size, fill, encoding)\n}\n\nfunction allocUnsafe (that, size) {\n  assertSize(size)\n  that = createBuffer(that, size < 0 ? 0 : checked(size) | 0)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) {\n    for (var i = 0; i < size; ++i) {\n      that[i] = 0\n    }\n  }\n  return that\n}\n\n/**\n * Equivalent to Buffer(num), by default creates a non-zero-filled Buffer instance.\n * */\nBuffer.allocUnsafe = function (size) {\n  return allocUnsafe(null, size)\n}\n/**\n * Equivalent to SlowBuffer(num), by default creates a non-zero-filled Buffer instance.\n */\nBuffer.allocUnsafeSlow = function (size) {\n  return allocUnsafe(null, size)\n}\n\nfunction fromString (that, string, encoding) {\n  if (typeof encoding !== 'string' || encoding === '') {\n    encoding = 'utf8'\n  }\n\n  if (!Buffer.isEncoding(encoding)) {\n    throw new TypeError('\"encoding\" must be a valid string encoding')\n  }\n\n  var length = byteLength(string, encoding) | 0\n  that = createBuffer(that, length)\n\n  var actual = that.write(string, encoding)\n\n  if (actual !== length) {\n    // Writing a hex string, for example, that contains invalid characters will\n    // cause everything after the first invalid character to be ignored. (e.g.\n    // 'abxxcd' will be treated as 'ab')\n    that = that.slice(0, actual)\n  }\n\n  return that\n}\n\nfunction fromArrayLike (that, array) {\n  var length = array.length < 0 ? 0 : checked(array.length) | 0\n  that = createBuffer(that, length)\n  for (var i = 0; i < length; i += 1) {\n    that[i] = array[i] & 255\n  }\n  return that\n}\n\nfunction fromArrayBuffer (that, array, byteOffset, length) {\n  array.byteLength // this throws if `array` is not a valid ArrayBuffer\n\n  if (byteOffset < 0 || array.byteLength < byteOffset) {\n    throw new RangeError('\\'offset\\' is out of bounds')\n  }\n\n  if (array.byteLength < byteOffset + (length || 0)) {\n    throw new RangeError('\\'length\\' is out of bounds')\n  }\n\n  if (byteOffset === undefined && length === undefined) {\n    array = new Uint8Array(array)\n  } else if (length === undefined) {\n    array = new Uint8Array(array, byteOffset)\n  } else {\n    array = new Uint8Array(array, byteOffset, length)\n  }\n\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    // Return an augmented `Uint8Array` instance, for best performance\n    that = array\n    that.__proto__ = Buffer.prototype\n  } else {\n    // Fallback: Return an object instance of the Buffer class\n    that = fromArrayLike(that, array)\n  }\n  return that\n}\n\nfunction fromObject (that, obj) {\n  if (Buffer.isBuffer(obj)) {\n    var len = checked(obj.length) | 0\n    that = createBuffer(that, len)\n\n    if (that.length === 0) {\n      return that\n    }\n\n    obj.copy(that, 0, 0, len)\n    return that\n  }\n\n  if (obj) {\n    if ((typeof ArrayBuffer !== 'undefined' &&\n        obj.buffer instanceof ArrayBuffer) || 'length' in obj) {\n      if (typeof obj.length !== 'number' || isnan(obj.length)) {\n        return createBuffer(that, 0)\n      }\n      return fromArrayLike(that, obj)\n    }\n\n    if (obj.type === 'Buffer' && isArray(obj.data)) {\n      return fromArrayLike(that, obj.data)\n    }\n  }\n\n  throw new TypeError('First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.')\n}\n\nfunction checked (length) {\n  // Note: cannot use `length < kMaxLength()` here because that fails when\n  // length is NaN (which is otherwise coerced to zero.)\n  if (length >= kMaxLength()) {\n    throw new RangeError('Attempt to allocate Buffer larger than maximum ' +\n                         'size: 0x' + kMaxLength().toString(16) + ' bytes')\n  }\n  return length | 0\n}\n\nfunction SlowBuffer (length) {\n  if (+length != length) { // eslint-disable-line eqeqeq\n    length = 0\n  }\n  return Buffer.alloc(+length)\n}\n\nBuffer.isBuffer = function isBuffer (b) {\n  return !!(b != null && b._isBuffer)\n}\n\nBuffer.compare = function compare (a, b) {\n  if (!Buffer.isBuffer(a) || !Buffer.isBuffer(b)) {\n    throw new TypeError('Arguments must be Buffers')\n  }\n\n  if (a === b) return 0\n\n  var x = a.length\n  var y = b.length\n\n  for (var i = 0, len = Math.min(x, y); i < len; ++i) {\n    if (a[i] !== b[i]) {\n      x = a[i]\n      y = b[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\nBuffer.isEncoding = function isEncoding (encoding) {\n  switch (String(encoding).toLowerCase()) {\n    case 'hex':\n    case 'utf8':\n    case 'utf-8':\n    case 'ascii':\n    case 'latin1':\n    case 'binary':\n    case 'base64':\n    case 'ucs2':\n    case 'ucs-2':\n    case 'utf16le':\n    case 'utf-16le':\n      return true\n    default:\n      return false\n  }\n}\n\nBuffer.concat = function concat (list, length) {\n  if (!isArray(list)) {\n    throw new TypeError('\"list\" argument must be an Array of Buffers')\n  }\n\n  if (list.length === 0) {\n    return Buffer.alloc(0)\n  }\n\n  var i\n  if (length === undefined) {\n    length = 0\n    for (i = 0; i < list.length; ++i) {\n      length += list[i].length\n    }\n  }\n\n  var buffer = Buffer.allocUnsafe(length)\n  var pos = 0\n  for (i = 0; i < list.length; ++i) {\n    var buf = list[i]\n    if (!Buffer.isBuffer(buf)) {\n      throw new TypeError('\"list\" argument must be an Array of Buffers')\n    }\n    buf.copy(buffer, pos)\n    pos += buf.length\n  }\n  return buffer\n}\n\nfunction byteLength (string, encoding) {\n  if (Buffer.isBuffer(string)) {\n    return string.length\n  }\n  if (typeof ArrayBuffer !== 'undefined' && typeof ArrayBuffer.isView === 'function' &&\n      (ArrayBuffer.isView(string) || string instanceof ArrayBuffer)) {\n    return string.byteLength\n  }\n  if (typeof string !== 'string') {\n    string = '' + string\n  }\n\n  var len = string.length\n  if (len === 0) return 0\n\n  // Use a for loop to avoid recursion\n  var loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'ascii':\n      case 'latin1':\n      case 'binary':\n        return len\n      case 'utf8':\n      case 'utf-8':\n      case undefined:\n        return utf8ToBytes(string).length\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return len * 2\n      case 'hex':\n        return len >>> 1\n      case 'base64':\n        return base64ToBytes(string).length\n      default:\n        if (loweredCase) return utf8ToBytes(string).length // assume utf8\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\nBuffer.byteLength = byteLength\n\nfunction slowToString (encoding, start, end) {\n  var loweredCase = false\n\n  // No need to verify that \"this.length <= MAX_UINT32\" since it's a read-only\n  // property of a typed array.\n\n  // This behaves neither like String nor Uint8Array in that we set start/end\n  // to their upper/lower bounds if the value passed is out of range.\n  // undefined is handled specially as per ECMA-262 6th Edition,\n  // Section 13.3.3.7 Runtime Semantics: KeyedBindingInitialization.\n  if (start === undefined || start < 0) {\n    start = 0\n  }\n  // Return early if start > this.length. Done here to prevent potential uint32\n  // coercion fail below.\n  if (start > this.length) {\n    return ''\n  }\n\n  if (end === undefined || end > this.length) {\n    end = this.length\n  }\n\n  if (end <= 0) {\n    return ''\n  }\n\n  // Force coersion to uint32. This will also coerce falsey/NaN values to 0.\n  end >>>= 0\n  start >>>= 0\n\n  if (end <= start) {\n    return ''\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  while (true) {\n    switch (encoding) {\n      case 'hex':\n        return hexSlice(this, start, end)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Slice(this, start, end)\n\n      case 'ascii':\n        return asciiSlice(this, start, end)\n\n      case 'latin1':\n      case 'binary':\n        return latin1Slice(this, start, end)\n\n      case 'base64':\n        return base64Slice(this, start, end)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return utf16leSlice(this, start, end)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = (encoding + '').toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\n// The property is used by `Buffer.isBuffer` and `is-buffer` (in Safari 5-7) to detect\n// Buffer instances.\nBuffer.prototype._isBuffer = true\n\nfunction swap (b, n, m) {\n  var i = b[n]\n  b[n] = b[m]\n  b[m] = i\n}\n\nBuffer.prototype.swap16 = function swap16 () {\n  var len = this.length\n  if (len % 2 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 16-bits')\n  }\n  for (var i = 0; i < len; i += 2) {\n    swap(this, i, i + 1)\n  }\n  return this\n}\n\nBuffer.prototype.swap32 = function swap32 () {\n  var len = this.length\n  if (len % 4 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 32-bits')\n  }\n  for (var i = 0; i < len; i += 4) {\n    swap(this, i, i + 3)\n    swap(this, i + 1, i + 2)\n  }\n  return this\n}\n\nBuffer.prototype.swap64 = function swap64 () {\n  var len = this.length\n  if (len % 8 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 64-bits')\n  }\n  for (var i = 0; i < len; i += 8) {\n    swap(this, i, i + 7)\n    swap(this, i + 1, i + 6)\n    swap(this, i + 2, i + 5)\n    swap(this, i + 3, i + 4)\n  }\n  return this\n}\n\nBuffer.prototype.toString = function toString () {\n  var length = this.length | 0\n  if (length === 0) return ''\n  if (arguments.length === 0) return utf8Slice(this, 0, length)\n  return slowToString.apply(this, arguments)\n}\n\nBuffer.prototype.equals = function equals (b) {\n  if (!Buffer.isBuffer(b)) throw new TypeError('Argument must be a Buffer')\n  if (this === b) return true\n  return Buffer.compare(this, b) === 0\n}\n\nBuffer.prototype.inspect = function inspect () {\n  var str = ''\n  var max = exports.INSPECT_MAX_BYTES\n  if (this.length > 0) {\n    str = this.toString('hex', 0, max).match(/.{2}/g).join(' ')\n    if (this.length > max) str += ' ... '\n  }\n  return '<Buffer ' + str + '>'\n}\n\nBuffer.prototype.compare = function compare (target, start, end, thisStart, thisEnd) {\n  if (!Buffer.isBuffer(target)) {\n    throw new TypeError('Argument must be a Buffer')\n  }\n\n  if (start === undefined) {\n    start = 0\n  }\n  if (end === undefined) {\n    end = target ? target.length : 0\n  }\n  if (thisStart === undefined) {\n    thisStart = 0\n  }\n  if (thisEnd === undefined) {\n    thisEnd = this.length\n  }\n\n  if (start < 0 || end > target.length || thisStart < 0 || thisEnd > this.length) {\n    throw new RangeError('out of range index')\n  }\n\n  if (thisStart >= thisEnd && start >= end) {\n    return 0\n  }\n  if (thisStart >= thisEnd) {\n    return -1\n  }\n  if (start >= end) {\n    return 1\n  }\n\n  start >>>= 0\n  end >>>= 0\n  thisStart >>>= 0\n  thisEnd >>>= 0\n\n  if (this === target) return 0\n\n  var x = thisEnd - thisStart\n  var y = end - start\n  var len = Math.min(x, y)\n\n  var thisCopy = this.slice(thisStart, thisEnd)\n  var targetCopy = target.slice(start, end)\n\n  for (var i = 0; i < len; ++i) {\n    if (thisCopy[i] !== targetCopy[i]) {\n      x = thisCopy[i]\n      y = targetCopy[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\n// Finds either the first index of `val` in `buffer` at offset >= `byteOffset`,\n// OR the last index of `val` in `buffer` at offset <= `byteOffset`.\n//\n// Arguments:\n// - buffer - a Buffer to search\n// - val - a string, Buffer, or number\n// - byteOffset - an index into `buffer`; will be clamped to an int32\n// - encoding - an optional encoding, relevant is val is a string\n// - dir - true for indexOf, false for lastIndexOf\nfunction bidirectionalIndexOf (buffer, val, byteOffset, encoding, dir) {\n  // Empty buffer means no match\n  if (buffer.length === 0) return -1\n\n  // Normalize byteOffset\n  if (typeof byteOffset === 'string') {\n    encoding = byteOffset\n    byteOffset = 0\n  } else if (byteOffset > 0x7fffffff) {\n    byteOffset = 0x7fffffff\n  } else if (byteOffset < -0x80000000) {\n    byteOffset = -0x80000000\n  }\n  byteOffset = +byteOffset  // Coerce to Number.\n  if (isNaN(byteOffset)) {\n    // byteOffset: it it's undefined, null, NaN, \"foo\", etc, search whole buffer\n    byteOffset = dir ? 0 : (buffer.length - 1)\n  }\n\n  // Normalize byteOffset: negative offsets start from the end of the buffer\n  if (byteOffset < 0) byteOffset = buffer.length + byteOffset\n  if (byteOffset >= buffer.length) {\n    if (dir) return -1\n    else byteOffset = buffer.length - 1\n  } else if (byteOffset < 0) {\n    if (dir) byteOffset = 0\n    else return -1\n  }\n\n  // Normalize val\n  if (typeof val === 'string') {\n    val = Buffer.from(val, encoding)\n  }\n\n  // Finally, search either indexOf (if dir is true) or lastIndexOf\n  if (Buffer.isBuffer(val)) {\n    // Special case: looking for empty string/buffer always fails\n    if (val.length === 0) {\n      return -1\n    }\n    return arrayIndexOf(buffer, val, byteOffset, encoding, dir)\n  } else if (typeof val === 'number') {\n    val = val & 0xFF // Search for a byte value [0-255]\n    if (Buffer.TYPED_ARRAY_SUPPORT &&\n        typeof Uint8Array.prototype.indexOf === 'function') {\n      if (dir) {\n        return Uint8Array.prototype.indexOf.call(buffer, val, byteOffset)\n      } else {\n        return Uint8Array.prototype.lastIndexOf.call(buffer, val, byteOffset)\n      }\n    }\n    return arrayIndexOf(buffer, [ val ], byteOffset, encoding, dir)\n  }\n\n  throw new TypeError('val must be string, number or Buffer')\n}\n\nfunction arrayIndexOf (arr, val, byteOffset, encoding, dir) {\n  var indexSize = 1\n  var arrLength = arr.length\n  var valLength = val.length\n\n  if (encoding !== undefined) {\n    encoding = String(encoding).toLowerCase()\n    if (encoding === 'ucs2' || encoding === 'ucs-2' ||\n        encoding === 'utf16le' || encoding === 'utf-16le') {\n      if (arr.length < 2 || val.length < 2) {\n        return -1\n      }\n      indexSize = 2\n      arrLength /= 2\n      valLength /= 2\n      byteOffset /= 2\n    }\n  }\n\n  function read (buf, i) {\n    if (indexSize === 1) {\n      return buf[i]\n    } else {\n      return buf.readUInt16BE(i * indexSize)\n    }\n  }\n\n  var i\n  if (dir) {\n    var foundIndex = -1\n    for (i = byteOffset; i < arrLength; i++) {\n      if (read(arr, i) === read(val, foundIndex === -1 ? 0 : i - foundIndex)) {\n        if (foundIndex === -1) foundIndex = i\n        if (i - foundIndex + 1 === valLength) return foundIndex * indexSize\n      } else {\n        if (foundIndex !== -1) i -= i - foundIndex\n        foundIndex = -1\n      }\n    }\n  } else {\n    if (byteOffset + valLength > arrLength) byteOffset = arrLength - valLength\n    for (i = byteOffset; i >= 0; i--) {\n      var found = true\n      for (var j = 0; j < valLength; j++) {\n        if (read(arr, i + j) !== read(val, j)) {\n          found = false\n          break\n        }\n      }\n      if (found) return i\n    }\n  }\n\n  return -1\n}\n\nBuffer.prototype.includes = function includes (val, byteOffset, encoding) {\n  return this.indexOf(val, byteOffset, encoding) !== -1\n}\n\nBuffer.prototype.indexOf = function indexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, true)\n}\n\nBuffer.prototype.lastIndexOf = function lastIndexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, false)\n}\n\nfunction hexWrite (buf, string, offset, length) {\n  offset = Number(offset) || 0\n  var remaining = buf.length - offset\n  if (!length) {\n    length = remaining\n  } else {\n    length = Number(length)\n    if (length > remaining) {\n      length = remaining\n    }\n  }\n\n  // must be an even number of digits\n  var strLen = string.length\n  if (strLen % 2 !== 0) throw new TypeError('Invalid hex string')\n\n  if (length > strLen / 2) {\n    length = strLen / 2\n  }\n  for (var i = 0; i < length; ++i) {\n    var parsed = parseInt(string.substr(i * 2, 2), 16)\n    if (isNaN(parsed)) return i\n    buf[offset + i] = parsed\n  }\n  return i\n}\n\nfunction utf8Write (buf, string, offset, length) {\n  return blitBuffer(utf8ToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nfunction asciiWrite (buf, string, offset, length) {\n  return blitBuffer(asciiToBytes(string), buf, offset, length)\n}\n\nfunction latin1Write (buf, string, offset, length) {\n  return asciiWrite(buf, string, offset, length)\n}\n\nfunction base64Write (buf, string, offset, length) {\n  return blitBuffer(base64ToBytes(string), buf, offset, length)\n}\n\nfunction ucs2Write (buf, string, offset, length) {\n  return blitBuffer(utf16leToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nBuffer.prototype.write = function write (string, offset, length, encoding) {\n  // Buffer#write(string)\n  if (offset === undefined) {\n    encoding = 'utf8'\n    length = this.length\n    offset = 0\n  // Buffer#write(string, encoding)\n  } else if (length === undefined && typeof offset === 'string') {\n    encoding = offset\n    length = this.length\n    offset = 0\n  // Buffer#write(string, offset[, length][, encoding])\n  } else if (isFinite(offset)) {\n    offset = offset | 0\n    if (isFinite(length)) {\n      length = length | 0\n      if (encoding === undefined) encoding = 'utf8'\n    } else {\n      encoding = length\n      length = undefined\n    }\n  // legacy write(string, encoding, offset, length) - remove in v0.13\n  } else {\n    throw new Error(\n      'Buffer.write(string, encoding, offset[, length]) is no longer supported'\n    )\n  }\n\n  var remaining = this.length - offset\n  if (length === undefined || length > remaining) length = remaining\n\n  if ((string.length > 0 && (length < 0 || offset < 0)) || offset > this.length) {\n    throw new RangeError('Attempt to write outside buffer bounds')\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  var loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'hex':\n        return hexWrite(this, string, offset, length)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Write(this, string, offset, length)\n\n      case 'ascii':\n        return asciiWrite(this, string, offset, length)\n\n      case 'latin1':\n      case 'binary':\n        return latin1Write(this, string, offset, length)\n\n      case 'base64':\n        // Warning: maxLength not taken into account in base64Write\n        return base64Write(this, string, offset, length)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return ucs2Write(this, string, offset, length)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\nBuffer.prototype.toJSON = function toJSON () {\n  return {\n    type: 'Buffer',\n    data: Array.prototype.slice.call(this._arr || this, 0)\n  }\n}\n\nfunction base64Slice (buf, start, end) {\n  if (start === 0 && end === buf.length) {\n    return base64.fromByteArray(buf)\n  } else {\n    return base64.fromByteArray(buf.slice(start, end))\n  }\n}\n\nfunction utf8Slice (buf, start, end) {\n  end = Math.min(buf.length, end)\n  var res = []\n\n  var i = start\n  while (i < end) {\n    var firstByte = buf[i]\n    var codePoint = null\n    var bytesPerSequence = (firstByte > 0xEF) ? 4\n      : (firstByte > 0xDF) ? 3\n      : (firstByte > 0xBF) ? 2\n      : 1\n\n    if (i + bytesPerSequence <= end) {\n      var secondByte, thirdByte, fourthByte, tempCodePoint\n\n      switch (bytesPerSequence) {\n        case 1:\n          if (firstByte < 0x80) {\n            codePoint = firstByte\n          }\n          break\n        case 2:\n          secondByte = buf[i + 1]\n          if ((secondByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0x1F) << 0x6 | (secondByte & 0x3F)\n            if (tempCodePoint > 0x7F) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 3:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0xC | (secondByte & 0x3F) << 0x6 | (thirdByte & 0x3F)\n            if (tempCodePoint > 0x7FF && (tempCodePoint < 0xD800 || tempCodePoint > 0xDFFF)) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 4:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          fourthByte = buf[i + 3]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80 && (fourthByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0x12 | (secondByte & 0x3F) << 0xC | (thirdByte & 0x3F) << 0x6 | (fourthByte & 0x3F)\n            if (tempCodePoint > 0xFFFF && tempCodePoint < 0x110000) {\n              codePoint = tempCodePoint\n            }\n          }\n      }\n    }\n\n    if (codePoint === null) {\n      // we did not generate a valid codePoint so insert a\n      // replacement char (U+FFFD) and advance only 1 byte\n      codePoint = 0xFFFD\n      bytesPerSequence = 1\n    } else if (codePoint > 0xFFFF) {\n      // encode to utf16 (surrogate pair dance)\n      codePoint -= 0x10000\n      res.push(codePoint >>> 10 & 0x3FF | 0xD800)\n      codePoint = 0xDC00 | codePoint & 0x3FF\n    }\n\n    res.push(codePoint)\n    i += bytesPerSequence\n  }\n\n  return decodeCodePointsArray(res)\n}\n\n// Based on http://stackoverflow.com/a/22747272/680742, the browser with\n// the lowest limit is Chrome, with 0x10000 args.\n// We go 1 magnitude less, for safety\nvar MAX_ARGUMENTS_LENGTH = 0x1000\n\nfunction decodeCodePointsArray (codePoints) {\n  var len = codePoints.length\n  if (len <= MAX_ARGUMENTS_LENGTH) {\n    return String.fromCharCode.apply(String, codePoints) // avoid extra slice()\n  }\n\n  // Decode in chunks to avoid \"call stack size exceeded\".\n  var res = ''\n  var i = 0\n  while (i < len) {\n    res += String.fromCharCode.apply(\n      String,\n      codePoints.slice(i, i += MAX_ARGUMENTS_LENGTH)\n    )\n  }\n  return res\n}\n\nfunction asciiSlice (buf, start, end) {\n  var ret = ''\n  end = Math.min(buf.length, end)\n\n  for (var i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i] & 0x7F)\n  }\n  return ret\n}\n\nfunction latin1Slice (buf, start, end) {\n  var ret = ''\n  end = Math.min(buf.length, end)\n\n  for (var i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i])\n  }\n  return ret\n}\n\nfunction hexSlice (buf, start, end) {\n  var len = buf.length\n\n  if (!start || start < 0) start = 0\n  if (!end || end < 0 || end > len) end = len\n\n  var out = ''\n  for (var i = start; i < end; ++i) {\n    out += toHex(buf[i])\n  }\n  return out\n}\n\nfunction utf16leSlice (buf, start, end) {\n  var bytes = buf.slice(start, end)\n  var res = ''\n  for (var i = 0; i < bytes.length; i += 2) {\n    res += String.fromCharCode(bytes[i] + bytes[i + 1] * 256)\n  }\n  return res\n}\n\nBuffer.prototype.slice = function slice (start, end) {\n  var len = this.length\n  start = ~~start\n  end = end === undefined ? len : ~~end\n\n  if (start < 0) {\n    start += len\n    if (start < 0) start = 0\n  } else if (start > len) {\n    start = len\n  }\n\n  if (end < 0) {\n    end += len\n    if (end < 0) end = 0\n  } else if (end > len) {\n    end = len\n  }\n\n  if (end < start) end = start\n\n  var newBuf\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    newBuf = this.subarray(start, end)\n    newBuf.__proto__ = Buffer.prototype\n  } else {\n    var sliceLen = end - start\n    newBuf = new Buffer(sliceLen, undefined)\n    for (var i = 0; i < sliceLen; ++i) {\n      newBuf[i] = this[i + start]\n    }\n  }\n\n  return newBuf\n}\n\n/*\n * Need to make sure that buffer isn't trying to write out of bounds.\n */\nfunction checkOffset (offset, ext, length) {\n  if ((offset % 1) !== 0 || offset < 0) throw new RangeError('offset is not uint')\n  if (offset + ext > length) throw new RangeError('Trying to access beyond buffer length')\n}\n\nBuffer.prototype.readUIntLE = function readUIntLE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var val = this[offset]\n  var mul = 1\n  var i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUIntBE = function readUIntBE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    checkOffset(offset, byteLength, this.length)\n  }\n\n  var val = this[offset + --byteLength]\n  var mul = 1\n  while (byteLength > 0 && (mul *= 0x100)) {\n    val += this[offset + --byteLength] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUInt8 = function readUInt8 (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  return this[offset]\n}\n\nBuffer.prototype.readUInt16LE = function readUInt16LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return this[offset] | (this[offset + 1] << 8)\n}\n\nBuffer.prototype.readUInt16BE = function readUInt16BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return (this[offset] << 8) | this[offset + 1]\n}\n\nBuffer.prototype.readUInt32LE = function readUInt32LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return ((this[offset]) |\n      (this[offset + 1] << 8) |\n      (this[offset + 2] << 16)) +\n      (this[offset + 3] * 0x1000000)\n}\n\nBuffer.prototype.readUInt32BE = function readUInt32BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] * 0x1000000) +\n    ((this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    this[offset + 3])\n}\n\nBuffer.prototype.readIntLE = function readIntLE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var val = this[offset]\n  var mul = 1\n  var i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readIntBE = function readIntBE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var i = byteLength\n  var mul = 1\n  var val = this[offset + --i]\n  while (i > 0 && (mul *= 0x100)) {\n    val += this[offset + --i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readInt8 = function readInt8 (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  if (!(this[offset] & 0x80)) return (this[offset])\n  return ((0xff - this[offset] + 1) * -1)\n}\n\nBuffer.prototype.readInt16LE = function readInt16LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  var val = this[offset] | (this[offset + 1] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt16BE = function readInt16BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  var val = this[offset + 1] | (this[offset] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt32LE = function readInt32LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset]) |\n    (this[offset + 1] << 8) |\n    (this[offset + 2] << 16) |\n    (this[offset + 3] << 24)\n}\n\nBuffer.prototype.readInt32BE = function readInt32BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] << 24) |\n    (this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    (this[offset + 3])\n}\n\nBuffer.prototype.readFloatLE = function readFloatLE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, true, 23, 4)\n}\n\nBuffer.prototype.readFloatBE = function readFloatBE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, false, 23, 4)\n}\n\nBuffer.prototype.readDoubleLE = function readDoubleLE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, true, 52, 8)\n}\n\nBuffer.prototype.readDoubleBE = function readDoubleBE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, false, 52, 8)\n}\n\nfunction checkInt (buf, value, offset, ext, max, min) {\n  if (!Buffer.isBuffer(buf)) throw new TypeError('\"buffer\" argument must be a Buffer instance')\n  if (value > max || value < min) throw new RangeError('\"value\" argument is out of bounds')\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n}\n\nBuffer.prototype.writeUIntLE = function writeUIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  var mul = 1\n  var i = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUIntBE = function writeUIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  var i = byteLength - 1\n  var mul = 1\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUInt8 = function writeUInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0xff, 0)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nfunction objectWriteUInt16 (buf, value, offset, littleEndian) {\n  if (value < 0) value = 0xffff + value + 1\n  for (var i = 0, j = Math.min(buf.length - offset, 2); i < j; ++i) {\n    buf[offset + i] = (value & (0xff << (8 * (littleEndian ? i : 1 - i)))) >>>\n      (littleEndian ? i : 1 - i) * 8\n  }\n}\n\nBuffer.prototype.writeUInt16LE = function writeUInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n  } else {\n    objectWriteUInt16(this, value, offset, true)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeUInt16BE = function writeUInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 8)\n    this[offset + 1] = (value & 0xff)\n  } else {\n    objectWriteUInt16(this, value, offset, false)\n  }\n  return offset + 2\n}\n\nfunction objectWriteUInt32 (buf, value, offset, littleEndian) {\n  if (value < 0) value = 0xffffffff + value + 1\n  for (var i = 0, j = Math.min(buf.length - offset, 4); i < j; ++i) {\n    buf[offset + i] = (value >>> (littleEndian ? i : 3 - i) * 8) & 0xff\n  }\n}\n\nBuffer.prototype.writeUInt32LE = function writeUInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset + 3] = (value >>> 24)\n    this[offset + 2] = (value >>> 16)\n    this[offset + 1] = (value >>> 8)\n    this[offset] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, true)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeUInt32BE = function writeUInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 24)\n    this[offset + 1] = (value >>> 16)\n    this[offset + 2] = (value >>> 8)\n    this[offset + 3] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, false)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeIntLE = function writeIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) {\n    var limit = Math.pow(2, 8 * byteLength - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  var i = 0\n  var mul = 1\n  var sub = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i - 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeIntBE = function writeIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) {\n    var limit = Math.pow(2, 8 * byteLength - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  var i = byteLength - 1\n  var mul = 1\n  var sub = 0\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i + 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeInt8 = function writeInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0x7f, -0x80)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)\n  if (value < 0) value = 0xff + value + 1\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nBuffer.prototype.writeInt16LE = function writeInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n  } else {\n    objectWriteUInt16(this, value, offset, true)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeInt16BE = function writeInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 8)\n    this[offset + 1] = (value & 0xff)\n  } else {\n    objectWriteUInt16(this, value, offset, false)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeInt32LE = function writeInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n    this[offset + 2] = (value >>> 16)\n    this[offset + 3] = (value >>> 24)\n  } else {\n    objectWriteUInt32(this, value, offset, true)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeInt32BE = function writeInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  if (value < 0) value = 0xffffffff + value + 1\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 24)\n    this[offset + 1] = (value >>> 16)\n    this[offset + 2] = (value >>> 8)\n    this[offset + 3] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, false)\n  }\n  return offset + 4\n}\n\nfunction checkIEEE754 (buf, value, offset, ext, max, min) {\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n  if (offset < 0) throw new RangeError('Index out of range')\n}\n\nfunction writeFloat (buf, value, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 4, 3.4028234663852886e+38, -3.4028234663852886e+38)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 23, 4)\n  return offset + 4\n}\n\nBuffer.prototype.writeFloatLE = function writeFloatLE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeFloatBE = function writeFloatBE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, false, noAssert)\n}\n\nfunction writeDouble (buf, value, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 8, 1.7976931348623157E+308, -1.7976931348623157E+308)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 52, 8)\n  return offset + 8\n}\n\nBuffer.prototype.writeDoubleLE = function writeDoubleLE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeDoubleBE = function writeDoubleBE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, false, noAssert)\n}\n\n// copy(targetBuffer, targetStart=0, sourceStart=0, sourceEnd=buffer.length)\nBuffer.prototype.copy = function copy (target, targetStart, start, end) {\n  if (!start) start = 0\n  if (!end && end !== 0) end = this.length\n  if (targetStart >= target.length) targetStart = target.length\n  if (!targetStart) targetStart = 0\n  if (end > 0 && end < start) end = start\n\n  // Copy 0 bytes; we're done\n  if (end === start) return 0\n  if (target.length === 0 || this.length === 0) return 0\n\n  // Fatal error conditions\n  if (targetStart < 0) {\n    throw new RangeError('targetStart out of bounds')\n  }\n  if (start < 0 || start >= this.length) throw new RangeError('sourceStart out of bounds')\n  if (end < 0) throw new RangeError('sourceEnd out of bounds')\n\n  // Are we oob?\n  if (end > this.length) end = this.length\n  if (target.length - targetStart < end - start) {\n    end = target.length - targetStart + start\n  }\n\n  var len = end - start\n  var i\n\n  if (this === target && start < targetStart && targetStart < end) {\n    // descending copy from end\n    for (i = len - 1; i >= 0; --i) {\n      target[i + targetStart] = this[i + start]\n    }\n  } else if (len < 1000 || !Buffer.TYPED_ARRAY_SUPPORT) {\n    // ascending copy from start\n    for (i = 0; i < len; ++i) {\n      target[i + targetStart] = this[i + start]\n    }\n  } else {\n    Uint8Array.prototype.set.call(\n      target,\n      this.subarray(start, start + len),\n      targetStart\n    )\n  }\n\n  return len\n}\n\n// Usage:\n//    buffer.fill(number[, offset[, end]])\n//    buffer.fill(buffer[, offset[, end]])\n//    buffer.fill(string[, offset[, end]][, encoding])\nBuffer.prototype.fill = function fill (val, start, end, encoding) {\n  // Handle string cases:\n  if (typeof val === 'string') {\n    if (typeof start === 'string') {\n      encoding = start\n      start = 0\n      end = this.length\n    } else if (typeof end === 'string') {\n      encoding = end\n      end = this.length\n    }\n    if (val.length === 1) {\n      var code = val.charCodeAt(0)\n      if (code < 256) {\n        val = code\n      }\n    }\n    if (encoding !== undefined && typeof encoding !== 'string') {\n      throw new TypeError('encoding must be a string')\n    }\n    if (typeof encoding === 'string' && !Buffer.isEncoding(encoding)) {\n      throw new TypeError('Unknown encoding: ' + encoding)\n    }\n  } else if (typeof val === 'number') {\n    val = val & 255\n  }\n\n  // Invalid ranges are not set to a default, so can range check early.\n  if (start < 0 || this.length < start || this.length < end) {\n    throw new RangeError('Out of range index')\n  }\n\n  if (end <= start) {\n    return this\n  }\n\n  start = start >>> 0\n  end = end === undefined ? this.length : end >>> 0\n\n  if (!val) val = 0\n\n  var i\n  if (typeof val === 'number') {\n    for (i = start; i < end; ++i) {\n      this[i] = val\n    }\n  } else {\n    var bytes = Buffer.isBuffer(val)\n      ? val\n      : utf8ToBytes(new Buffer(val, encoding).toString())\n    var len = bytes.length\n    for (i = 0; i < end - start; ++i) {\n      this[i + start] = bytes[i % len]\n    }\n  }\n\n  return this\n}\n\n// HELPER FUNCTIONS\n// ================\n\nvar INVALID_BASE64_RE = /[^+\\/0-9A-Za-z-_]/g\n\nfunction base64clean (str) {\n  // Node strips out invalid characters like \\n and \\t from the string, base64-js does not\n  str = stringtrim(str).replace(INVALID_BASE64_RE, '')\n  // Node converts strings with length < 2 to ''\n  if (str.length < 2) return ''\n  // Node allows for non-padded base64 strings (missing trailing ===), base64-js does not\n  while (str.length % 4 !== 0) {\n    str = str + '='\n  }\n  return str\n}\n\nfunction stringtrim (str) {\n  if (str.trim) return str.trim()\n  return str.replace(/^\\s+|\\s+$/g, '')\n}\n\nfunction toHex (n) {\n  if (n < 16) return '0' + n.toString(16)\n  return n.toString(16)\n}\n\nfunction utf8ToBytes (string, units) {\n  units = units || Infinity\n  var codePoint\n  var length = string.length\n  var leadSurrogate = null\n  var bytes = []\n\n  for (var i = 0; i < length; ++i) {\n    codePoint = string.charCodeAt(i)\n\n    // is surrogate component\n    if (codePoint > 0xD7FF && codePoint < 0xE000) {\n      // last char was a lead\n      if (!leadSurrogate) {\n        // no lead yet\n        if (codePoint > 0xDBFF) {\n          // unexpected trail\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        } else if (i + 1 === length) {\n          // unpaired lead\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        }\n\n        // valid lead\n        leadSurrogate = codePoint\n\n        continue\n      }\n\n      // 2 leads in a row\n      if (codePoint < 0xDC00) {\n        if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n        leadSurrogate = codePoint\n        continue\n      }\n\n      // valid surrogate pair\n      codePoint = (leadSurrogate - 0xD800 << 10 | codePoint - 0xDC00) + 0x10000\n    } else if (leadSurrogate) {\n      // valid bmp char, but last char was a lead\n      if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n    }\n\n    leadSurrogate = null\n\n    // encode utf8\n    if (codePoint < 0x80) {\n      if ((units -= 1) < 0) break\n      bytes.push(codePoint)\n    } else if (codePoint < 0x800) {\n      if ((units -= 2) < 0) break\n      bytes.push(\n        codePoint >> 0x6 | 0xC0,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x10000) {\n      if ((units -= 3) < 0) break\n      bytes.push(\n        codePoint >> 0xC | 0xE0,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x110000) {\n      if ((units -= 4) < 0) break\n      bytes.push(\n        codePoint >> 0x12 | 0xF0,\n        codePoint >> 0xC & 0x3F | 0x80,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else {\n      throw new Error('Invalid code point')\n    }\n  }\n\n  return bytes\n}\n\nfunction asciiToBytes (str) {\n  var byteArray = []\n  for (var i = 0; i < str.length; ++i) {\n    // Node's code seems to be doing this and not & 0x7F..\n    byteArray.push(str.charCodeAt(i) & 0xFF)\n  }\n  return byteArray\n}\n\nfunction utf16leToBytes (str, units) {\n  var c, hi, lo\n  var byteArray = []\n  for (var i = 0; i < str.length; ++i) {\n    if ((units -= 2) < 0) break\n\n    c = str.charCodeAt(i)\n    hi = c >> 8\n    lo = c % 256\n    byteArray.push(lo)\n    byteArray.push(hi)\n  }\n\n  return byteArray\n}\n\nfunction base64ToBytes (str) {\n  return base64.toByteArray(base64clean(str))\n}\n\nfunction blitBuffer (src, dst, offset, length) {\n  for (var i = 0; i < length; ++i) {\n    if ((i + offset >= dst.length) || (i >= src.length)) break\n    dst[i + offset] = src[i]\n  }\n  return i\n}\n\nfunction isnan (val) {\n  return val !== val // eslint-disable-line no-self-compare\n}\n","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || Function(\"return this\")() || (1, eval)(\"this\");\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","'use strict'\n\nexports.byteLength = byteLength\nexports.toByteArray = toByteArray\nexports.fromByteArray = fromByteArray\n\nvar lookup = []\nvar revLookup = []\nvar Arr = typeof Uint8Array !== 'undefined' ? Uint8Array : Array\n\nvar code = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'\nfor (var i = 0, len = code.length; i < len; ++i) {\n  lookup[i] = code[i]\n  revLookup[code.charCodeAt(i)] = i\n}\n\n// Support decoding URL-safe base64 strings, as Node.js does.\n// See: https://en.wikipedia.org/wiki/Base64#URL_applications\nrevLookup['-'.charCodeAt(0)] = 62\nrevLookup['_'.charCodeAt(0)] = 63\n\nfunction getLens (b64) {\n  var len = b64.length\n\n  if (len % 4 > 0) {\n    throw new Error('Invalid string. Length must be a multiple of 4')\n  }\n\n  // Trim off extra bytes after placeholder bytes are found\n  // See: https://github.com/beatgammit/base64-js/issues/42\n  var validLen = b64.indexOf('=')\n  if (validLen === -1) validLen = len\n\n  var placeHoldersLen = validLen === len\n    ? 0\n    : 4 - (validLen % 4)\n\n  return [validLen, placeHoldersLen]\n}\n\n// base64 is 4/3 + up to two characters of the original data\nfunction byteLength (b64) {\n  var lens = getLens(b64)\n  var validLen = lens[0]\n  var placeHoldersLen = lens[1]\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction _byteLength (b64, validLen, placeHoldersLen) {\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction toByteArray (b64) {\n  var tmp\n  var lens = getLens(b64)\n  var validLen = lens[0]\n  var placeHoldersLen = lens[1]\n\n  var arr = new Arr(_byteLength(b64, validLen, placeHoldersLen))\n\n  var curByte = 0\n\n  // if there are placeholders, only get up to the last complete 4 chars\n  var len = placeHoldersLen > 0\n    ? validLen - 4\n    : validLen\n\n  for (var i = 0; i < len; i += 4) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 18) |\n      (revLookup[b64.charCodeAt(i + 1)] << 12) |\n      (revLookup[b64.charCodeAt(i + 2)] << 6) |\n      revLookup[b64.charCodeAt(i + 3)]\n    arr[curByte++] = (tmp >> 16) & 0xFF\n    arr[curByte++] = (tmp >> 8) & 0xFF\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  if (placeHoldersLen === 2) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 2) |\n      (revLookup[b64.charCodeAt(i + 1)] >> 4)\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  if (placeHoldersLen === 1) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 10) |\n      (revLookup[b64.charCodeAt(i + 1)] << 4) |\n      (revLookup[b64.charCodeAt(i + 2)] >> 2)\n    arr[curByte++] = (tmp >> 8) & 0xFF\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  return arr\n}\n\nfunction tripletToBase64 (num) {\n  return lookup[num >> 18 & 0x3F] +\n    lookup[num >> 12 & 0x3F] +\n    lookup[num >> 6 & 0x3F] +\n    lookup[num & 0x3F]\n}\n\nfunction encodeChunk (uint8, start, end) {\n  var tmp\n  var output = []\n  for (var i = start; i < end; i += 3) {\n    tmp =\n      ((uint8[i] << 16) & 0xFF0000) +\n      ((uint8[i + 1] << 8) & 0xFF00) +\n      (uint8[i + 2] & 0xFF)\n    output.push(tripletToBase64(tmp))\n  }\n  return output.join('')\n}\n\nfunction fromByteArray (uint8) {\n  var tmp\n  var len = uint8.length\n  var extraBytes = len % 3 // if we have 1 byte left, pad 2 bytes\n  var parts = []\n  var maxChunkLength = 16383 // must be multiple of 3\n\n  // go through the array every three bytes, we'll deal with trailing stuff later\n  for (var i = 0, len2 = len - extraBytes; i < len2; i += maxChunkLength) {\n    parts.push(encodeChunk(\n      uint8, i, (i + maxChunkLength) > len2 ? len2 : (i + maxChunkLength)\n    ))\n  }\n\n  // pad the end with zeros, but make sure to not forget the extra bytes\n  if (extraBytes === 1) {\n    tmp = uint8[len - 1]\n    parts.push(\n      lookup[tmp >> 2] +\n      lookup[(tmp << 4) & 0x3F] +\n      '=='\n    )\n  } else if (extraBytes === 2) {\n    tmp = (uint8[len - 2] << 8) + uint8[len - 1]\n    parts.push(\n      lookup[tmp >> 10] +\n      lookup[(tmp >> 4) & 0x3F] +\n      lookup[(tmp << 2) & 0x3F] +\n      '='\n    )\n  }\n\n  return parts.join('')\n}\n","exports.read = function (buffer, offset, isLE, mLen, nBytes) {\n  var e, m\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var nBits = -7\n  var i = isLE ? (nBytes - 1) : 0\n  var d = isLE ? -1 : 1\n  var s = buffer[offset + i]\n\n  i += d\n\n  e = s & ((1 << (-nBits)) - 1)\n  s >>= (-nBits)\n  nBits += eLen\n  for (; nBits > 0; e = (e * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  m = e & ((1 << (-nBits)) - 1)\n  e >>= (-nBits)\n  nBits += mLen\n  for (; nBits > 0; m = (m * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  if (e === 0) {\n    e = 1 - eBias\n  } else if (e === eMax) {\n    return m ? NaN : ((s ? -1 : 1) * Infinity)\n  } else {\n    m = m + Math.pow(2, mLen)\n    e = e - eBias\n  }\n  return (s ? -1 : 1) * m * Math.pow(2, e - mLen)\n}\n\nexports.write = function (buffer, value, offset, isLE, mLen, nBytes) {\n  var e, m, c\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var rt = (mLen === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0)\n  var i = isLE ? 0 : (nBytes - 1)\n  var d = isLE ? 1 : -1\n  var s = value < 0 || (value === 0 && 1 / value < 0) ? 1 : 0\n\n  value = Math.abs(value)\n\n  if (isNaN(value) || value === Infinity) {\n    m = isNaN(value) ? 1 : 0\n    e = eMax\n  } else {\n    e = Math.floor(Math.log(value) / Math.LN2)\n    if (value * (c = Math.pow(2, -e)) < 1) {\n      e--\n      c *= 2\n    }\n    if (e + eBias >= 1) {\n      value += rt / c\n    } else {\n      value += rt * Math.pow(2, 1 - eBias)\n    }\n    if (value * c >= 2) {\n      e++\n      c /= 2\n    }\n\n    if (e + eBias >= eMax) {\n      m = 0\n      e = eMax\n    } else if (e + eBias >= 1) {\n      m = ((value * c) - 1) * Math.pow(2, mLen)\n      e = e + eBias\n    } else {\n      m = value * Math.pow(2, eBias - 1) * Math.pow(2, mLen)\n      e = 0\n    }\n  }\n\n  for (; mLen >= 8; buffer[offset + i] = m & 0xff, i += d, m /= 256, mLen -= 8) {}\n\n  e = (e << mLen) | m\n  eLen += mLen\n  for (; eLen > 0; buffer[offset + i] = e & 0xff, i += d, e /= 256, eLen -= 8) {}\n\n  buffer[offset + i - d] |= s * 128\n}\n","var toString = {}.toString;\n\nmodule.exports = Array.isArray || function (arr) {\n  return toString.call(arr) == '[object Array]';\n};\n","'use strict';\n\nvar has = Object.prototype.hasOwnProperty\n  , prefix = '~';\n\n/**\n * Constructor to create a storage for our `EE` objects.\n * An `Events` instance is a plain object whose properties are event names.\n *\n * @constructor\n * @private\n */\nfunction Events() {}\n\n//\n// We try to not inherit from `Object.prototype`. In some engines creating an\n// instance in this way is faster than calling `Object.create(null)` directly.\n// If `Object.create(null)` is not supported we prefix the event names with a\n// character to make sure that the built-in object properties are not\n// overridden or used as an attack vector.\n//\nif (Object.create) {\n  Events.prototype = Object.create(null);\n\n  //\n  // This hack is needed because the `__proto__` property is still inherited in\n  // some old browsers like Android 4, iPhone 5.1, Opera 11 and Safari 5.\n  //\n  if (!new Events().__proto__) prefix = false;\n}\n\n/**\n * Representation of a single event listener.\n *\n * @param {Function} fn The listener function.\n * @param {*} context The context to invoke the listener with.\n * @param {Boolean} [once=false] Specify if the listener is a one-time listener.\n * @constructor\n * @private\n */\nfunction EE(fn, context, once) {\n  this.fn = fn;\n  this.context = context;\n  this.once = once || false;\n}\n\n/**\n * Add a listener for a given event.\n *\n * @param {EventEmitter} emitter Reference to the `EventEmitter` instance.\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} context The context to invoke the listener with.\n * @param {Boolean} once Specify if the listener is a one-time listener.\n * @returns {EventEmitter}\n * @private\n */\nfunction addListener(emitter, event, fn, context, once) {\n  if (typeof fn !== 'function') {\n    throw new TypeError('The listener must be a function');\n  }\n\n  var listener = new EE(fn, context || emitter, once)\n    , evt = prefix ? prefix + event : event;\n\n  if (!emitter._events[evt]) emitter._events[evt] = listener, emitter._eventsCount++;\n  else if (!emitter._events[evt].fn) emitter._events[evt].push(listener);\n  else emitter._events[evt] = [emitter._events[evt], listener];\n\n  return emitter;\n}\n\n/**\n * Clear event by name.\n *\n * @param {EventEmitter} emitter Reference to the `EventEmitter` instance.\n * @param {(String|Symbol)} evt The Event name.\n * @private\n */\nfunction clearEvent(emitter, evt) {\n  if (--emitter._eventsCount === 0) emitter._events = new Events();\n  else delete emitter._events[evt];\n}\n\n/**\n * Minimal `EventEmitter` interface that is molded against the Node.js\n * `EventEmitter` interface.\n *\n * @constructor\n * @public\n */\nfunction EventEmitter() {\n  this._events = new Events();\n  this._eventsCount = 0;\n}\n\n/**\n * Return an array listing the events for which the emitter has registered\n * listeners.\n *\n * @returns {Array}\n * @public\n */\nEventEmitter.prototype.eventNames = function eventNames() {\n  var names = []\n    , events\n    , name;\n\n  if (this._eventsCount === 0) return names;\n\n  for (name in (events = this._events)) {\n    if (has.call(events, name)) names.push(prefix ? name.slice(1) : name);\n  }\n\n  if (Object.getOwnPropertySymbols) {\n    return names.concat(Object.getOwnPropertySymbols(events));\n  }\n\n  return names;\n};\n\n/**\n * Return the listeners registered for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Array} The registered listeners.\n * @public\n */\nEventEmitter.prototype.listeners = function listeners(event) {\n  var evt = prefix ? prefix + event : event\n    , handlers = this._events[evt];\n\n  if (!handlers) return [];\n  if (handlers.fn) return [handlers.fn];\n\n  for (var i = 0, l = handlers.length, ee = new Array(l); i < l; i++) {\n    ee[i] = handlers[i].fn;\n  }\n\n  return ee;\n};\n\n/**\n * Return the number of listeners listening to a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Number} The number of listeners.\n * @public\n */\nEventEmitter.prototype.listenerCount = function listenerCount(event) {\n  var evt = prefix ? prefix + event : event\n    , listeners = this._events[evt];\n\n  if (!listeners) return 0;\n  if (listeners.fn) return 1;\n  return listeners.length;\n};\n\n/**\n * Calls each of the listeners registered for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Boolean} `true` if the event had listeners, else `false`.\n * @public\n */\nEventEmitter.prototype.emit = function emit(event, a1, a2, a3, a4, a5) {\n  var evt = prefix ? prefix + event : event;\n\n  if (!this._events[evt]) return false;\n\n  var listeners = this._events[evt]\n    , len = arguments.length\n    , args\n    , i;\n\n  if (listeners.fn) {\n    if (listeners.once) this.removeListener(event, listeners.fn, undefined, true);\n\n    switch (len) {\n      case 1: return listeners.fn.call(listeners.context), true;\n      case 2: return listeners.fn.call(listeners.context, a1), true;\n      case 3: return listeners.fn.call(listeners.context, a1, a2), true;\n      case 4: return listeners.fn.call(listeners.context, a1, a2, a3), true;\n      case 5: return listeners.fn.call(listeners.context, a1, a2, a3, a4), true;\n      case 6: return listeners.fn.call(listeners.context, a1, a2, a3, a4, a5), true;\n    }\n\n    for (i = 1, args = new Array(len -1); i < len; i++) {\n      args[i - 1] = arguments[i];\n    }\n\n    listeners.fn.apply(listeners.context, args);\n  } else {\n    var length = listeners.length\n      , j;\n\n    for (i = 0; i < length; i++) {\n      if (listeners[i].once) this.removeListener(event, listeners[i].fn, undefined, true);\n\n      switch (len) {\n        case 1: listeners[i].fn.call(listeners[i].context); break;\n        case 2: listeners[i].fn.call(listeners[i].context, a1); break;\n        case 3: listeners[i].fn.call(listeners[i].context, a1, a2); break;\n        case 4: listeners[i].fn.call(listeners[i].context, a1, a2, a3); break;\n        default:\n          if (!args) for (j = 1, args = new Array(len -1); j < len; j++) {\n            args[j - 1] = arguments[j];\n          }\n\n          listeners[i].fn.apply(listeners[i].context, args);\n      }\n    }\n  }\n\n  return true;\n};\n\n/**\n * Add a listener for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} [context=this] The context to invoke the listener with.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.on = function on(event, fn, context) {\n  return addListener(this, event, fn, context, false);\n};\n\n/**\n * Add a one-time listener for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} [context=this] The context to invoke the listener with.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.once = function once(event, fn, context) {\n  return addListener(this, event, fn, context, true);\n};\n\n/**\n * Remove the listeners of a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn Only remove the listeners that match this function.\n * @param {*} context Only remove the listeners that have this context.\n * @param {Boolean} once Only remove one-time listeners.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.removeListener = function removeListener(event, fn, context, once) {\n  var evt = prefix ? prefix + event : event;\n\n  if (!this._events[evt]) return this;\n  if (!fn) {\n    clearEvent(this, evt);\n    return this;\n  }\n\n  var listeners = this._events[evt];\n\n  if (listeners.fn) {\n    if (\n      listeners.fn === fn &&\n      (!once || listeners.once) &&\n      (!context || listeners.context === context)\n    ) {\n      clearEvent(this, evt);\n    }\n  } else {\n    for (var i = 0, events = [], length = listeners.length; i < length; i++) {\n      if (\n        listeners[i].fn !== fn ||\n        (once && !listeners[i].once) ||\n        (context && listeners[i].context !== context)\n      ) {\n        events.push(listeners[i]);\n      }\n    }\n\n    //\n    // Reset the array, or remove it completely if we have no more listeners.\n    //\n    if (events.length) this._events[evt] = events.length === 1 ? events[0] : events;\n    else clearEvent(this, evt);\n  }\n\n  return this;\n};\n\n/**\n * Remove all listeners, or those of the specified event.\n *\n * @param {(String|Symbol)} [event] The event name.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.removeAllListeners = function removeAllListeners(event) {\n  var evt;\n\n  if (event) {\n    evt = prefix ? prefix + event : event;\n    if (this._events[evt]) clearEvent(this, evt);\n  } else {\n    this._events = new Events();\n    this._eventsCount = 0;\n  }\n\n  return this;\n};\n\n//\n// Alias methods names because people roll like that.\n//\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\nEventEmitter.prototype.addListener = EventEmitter.prototype.on;\n\n//\n// Expose the prefix.\n//\nEventEmitter.prefixed = prefix;\n\n//\n// Allow `EventEmitter` to be imported as module namespace.\n//\nEventEmitter.EventEmitter = EventEmitter;\n\n//\n// Expose the module.\n//\nif ('undefined' !== typeof module) {\n  module.exports = EventEmitter;\n}\n","import { Scope, ScrollBlot, ContainerBlot } from 'parchment';\r\nimport Emitter from '../core/emitter';\r\nimport Block, { BlockEmbed } from './block';\r\nimport Break from './break';\r\nimport Container from './container';\r\n\r\nfunction isLine(blot) {\r\n  return blot instanceof Block || blot instanceof BlockEmbed;\r\n}\r\n\r\nclass Scroll extends ScrollBlot {\r\n  constructor(registry, domNode, { emitter }) {\r\n    super(registry, domNode);\r\n    this.emitter = emitter;\r\n    // Some reason fixes composition issues with character languages in Windows/Chrome, Safari\r\n    this.domNode.addEventListener('DOMNodeInserted', () => {});\r\n    this.optimize();\r\n    this.enable();\r\n  }\r\n\r\n  batchStart() {\r\n    this.batch = true;\r\n  }\r\n\r\n  batchEnd() {\r\n    this.batch = false;\r\n    this.optimize();\r\n  }\r\n\r\n  emitMount(blot) {\r\n    this.emitter.emit(Emitter.events.SCROLL_BLOT_MOUNT, blot);\r\n  }\r\n\r\n  emitUnmount(blot) {\r\n    this.emitter.emit(Emitter.events.SCROLL_BLOT_UNMOUNT, blot);\r\n  }\r\n\r\n  deleteAt(index, length) {\r\n    const [first, offset] = this.line(index);\r\n    const [last] = this.line(index + length);\r\n    super.deleteAt(index, length);\r\n    if (last != null && first !== last && offset > 0) {\r\n      if (first instanceof BlockEmbed || last instanceof BlockEmbed) {\r\n        this.optimize();\r\n        return;\r\n      }\r\n      const ref =\r\n        last.children.head instanceof Break ? null : last.children.head;\r\n      first.moveChildren(last, ref);\r\n      first.remove();\r\n    }\r\n    this.optimize();\r\n  }\r\n\r\n  enable(enabled = true) {\r\n    this.domNode.setAttribute('contenteditable', enabled);\r\n  }\r\n\r\n  formatAt(index, length, format, value) {\r\n    super.formatAt(index, length, format, value);\r\n    this.optimize();\r\n  }\r\n\r\n  insertAt(index, value, def) {\r\n    if (index >= this.length()) {\r\n      if (def == null || this.scroll.query(value, Scope.BLOCK) == null) {\r\n        const blot = this.scroll.create(this.statics.defaultChild.blotName);\r\n        this.appendChild(blot);\r\n        if (def == null && value.endsWith('\\n')) {\r\n          blot.insertAt(0, value.slice(0, -1), def);\r\n        } else {\r\n          blot.insertAt(0, value, def);\r\n        }\r\n      } else {\r\n        const embed = this.scroll.create(value, def);\r\n        this.appendChild(embed);\r\n      }\r\n    } else {\r\n      super.insertAt(index, value, def);\r\n    }\r\n    this.optimize();\r\n  }\r\n\r\n  insertBefore(blot, ref) {\r\n    if (blot.statics.scope === Scope.INLINE_BLOT) {\r\n      const wrapper = this.scroll.create(this.statics.defaultChild.blotName);\r\n      wrapper.appendChild(blot);\r\n      super.insertBefore(wrapper, ref);\r\n    } else {\r\n      super.insertBefore(blot, ref);\r\n    }\r\n  }\r\n\r\n  isEnabled() {\r\n    return this.domNode.getAttribute('contenteditable') === 'true';\r\n  }\r\n\r\n  leaf(index) {\r\n    return this.path(index).pop() || [null, -1];\r\n  }\r\n\r\n  line(index) {\r\n    if (index === this.length()) {\r\n      return this.line(index - 1);\r\n    }\r\n    return this.descendant(isLine, index);\r\n  }\r\n\r\n  lines(index = 0, length = Number.MAX_VALUE) {\r\n    const getLines = (blot, blotIndex, blotLength) => {\r\n      let lines = [];\r\n      let lengthLeft = blotLength;\r\n      blot.children.forEachAt(\r\n        blotIndex,\r\n        blotLength,\r\n        (child, childIndex, childLength) => {\r\n          if (isLine(child)) {\r\n            lines.push(child);\r\n          } else if (child instanceof ContainerBlot) {\r\n            lines = lines.concat(getLines(child, childIndex, lengthLeft));\r\n          }\r\n          lengthLeft -= childLength;\r\n        },\r\n      );\r\n      return lines;\r\n    };\r\n    return getLines(this, index, length);\r\n  }\r\n\r\n  optimize(mutations = [], context = {}) {\r\n    if (this.batch === true) return;\r\n    super.optimize(mutations, context);\r\n    if (mutations.length > 0) {\r\n      this.emitter.emit(Emitter.events.SCROLL_OPTIMIZE, mutations, context);\r\n    }\r\n  }\r\n\r\n  path(index) {\r\n    return super.path(index).slice(1); // Exclude self\r\n  }\r\n\r\n  remove() {\r\n    // Never remove self\r\n  }\r\n\r\n  update(mutations) {\r\n    if (this.batch === true) return;\r\n    let source = Emitter.sources.USER;\r\n    if (typeof mutations === 'string') {\r\n      source = mutations;\r\n    }\r\n    if (!Array.isArray(mutations)) {\r\n      mutations = this.observer.takeRecords();\r\n    }\r\n    if (mutations.length > 0) {\r\n      this.emitter.emit(Emitter.events.SCROLL_BEFORE_UPDATE, source, mutations);\r\n    }\r\n    super.update(mutations.concat([])); // pass copy\r\n    if (mutations.length > 0) {\r\n      this.emitter.emit(Emitter.events.SCROLL_UPDATE, source, mutations);\r\n    }\r\n  }\r\n}\r\nScroll.blotName = 'scroll';\r\nScroll.className = 'ql-editor';\r\nScroll.tagName = 'DIV';\r\nScroll.defaultChild = Block;\r\nScroll.allowedChildren = [Block, BlockEmbed, Container];\r\n\r\nexport default Scroll;\r\n","import { Scope } from 'parchment';\r\nimport Delta from 'quill-delta';\r\nimport DeltaOp from 'quill-delta/lib/op';\r\nimport Quill from '../core/quill';\r\nimport Module from '../core/module';\r\n\r\nclass History extends Module {\r\n  constructor(quill, options) {\r\n    super(quill, options);\r\n    this.lastRecorded = 0;\r\n    this.ignoreChange = false;\r\n    this.clear();\r\n    this.quill.on(\r\n      Quill.events.EDITOR_CHANGE,\r\n      (eventName, delta, oldDelta, source) => {\r\n        if (eventName !== Quill.events.TEXT_CHANGE || this.ignoreChange) return;\r\n        if (!this.options.userOnly || source === Quill.sources.USER) {\r\n          this.record(delta, oldDelta);\r\n        } else {\r\n          this.transform(delta);\r\n        }\r\n      },\r\n    );\r\n    this.quill.keyboard.addBinding(\r\n      { key: 'z', shortKey: true },\r\n      this.undo.bind(this),\r\n    );\r\n    this.quill.keyboard.addBinding(\r\n      { key: 'z', shortKey: true, shiftKey: true },\r\n      this.redo.bind(this),\r\n    );\r\n    if (/Win/i.test(navigator.platform)) {\r\n      this.quill.keyboard.addBinding(\r\n        { key: 'y', shortKey: true },\r\n        this.redo.bind(this),\r\n      );\r\n    }\r\n  }\r\n\r\n  change(source, dest) {\r\n    if (this.stack[source].length === 0) return;\r\n    const delta = this.stack[source].pop();\r\n    this.stack[dest].push(delta);\r\n    this.lastRecorded = 0;\r\n    this.ignoreChange = true;\r\n    this.quill.updateContents(delta[source], Quill.sources.USER);\r\n    this.ignoreChange = false;\r\n    const index = getLastChangeIndex(this.quill.scroll, delta[source]);\r\n    this.quill.setSelection(index);\r\n  }\r\n\r\n  clear() {\r\n    this.stack = { undo: [], redo: [] };\r\n  }\r\n\r\n  cutoff() {\r\n    this.lastRecorded = 0;\r\n  }\r\n\r\n  record(changeDelta, oldDelta) {\r\n    if (changeDelta.ops.length === 0) return;\r\n    this.stack.redo = [];\r\n    let undoDelta = guessUndoDelta(changeDelta);\r\n    if (undoDelta == null) {\r\n      undoDelta = this.quill.getContents().diff(oldDelta);\r\n    }\r\n    const timestamp = Date.now();\r\n    if (\r\n      this.lastRecorded + this.options.delay > timestamp &&\r\n      this.stack.undo.length > 0\r\n    ) {\r\n      const delta = this.stack.undo.pop();\r\n      undoDelta = undoDelta.compose(delta.undo);\r\n      changeDelta = delta.redo.compose(changeDelta);\r\n    } else {\r\n      this.lastRecorded = timestamp;\r\n    }\r\n    this.stack.undo.push({\r\n      redo: changeDelta,\r\n      undo: undoDelta,\r\n    });\r\n    if (this.stack.undo.length > this.options.maxStack) {\r\n      this.stack.undo.shift();\r\n    }\r\n  }\r\n\r\n  redo() {\r\n    this.change('redo', 'undo');\r\n  }\r\n\r\n  transform(delta) {\r\n    this.stack.undo.forEach(change => {\r\n      change.undo = delta.transform(change.undo, true);\r\n      change.redo = delta.transform(change.redo, true);\r\n    });\r\n    this.stack.redo.forEach(change => {\r\n      change.undo = delta.transform(change.undo, true);\r\n      change.redo = delta.transform(change.redo, true);\r\n    });\r\n  }\r\n\r\n  undo() {\r\n    this.change('undo', 'redo');\r\n  }\r\n}\r\nHistory.DEFAULTS = {\r\n  delay: 1000,\r\n  maxStack: 100,\r\n  userOnly: false,\r\n};\r\n\r\nfunction endsWithNewlineChange(scroll, delta) {\r\n  const lastOp = delta.ops[delta.ops.length - 1];\r\n  if (lastOp == null) return false;\r\n  if (lastOp.insert != null) {\r\n    return typeof lastOp.insert === 'string' && lastOp.insert.endsWith('\\n');\r\n  }\r\n  if (lastOp.attributes != null) {\r\n    return Object.keys(lastOp.attributes).some(attr => {\r\n      return scroll.query(attr, Scope.BLOCK) != null;\r\n    });\r\n  }\r\n  return false;\r\n}\r\n\r\nfunction getLastChangeIndex(scroll, delta) {\r\n  const deleteLength = delta.reduce((length, op) => {\r\n    return length + (op.delete || 0);\r\n  }, 0);\r\n  let changeIndex = delta.length() - deleteLength;\r\n  if (endsWithNewlineChange(scroll, delta)) {\r\n    changeIndex -= 1;\r\n  }\r\n  return changeIndex;\r\n}\r\n\r\nfunction guessUndoDelta(delta) {\r\n  const undoDelta = new Delta();\r\n  let failed = false;\r\n  delta.forEach(op => {\r\n    if (op.insert) {\r\n      undoDelta.delete(DeltaOp.length(op));\r\n    } else if (op.retain && op.attributes == null) {\r\n      undoDelta.retain(op.retain);\r\n    } else {\r\n      failed = true;\r\n      return false;\r\n    }\r\n    return true;\r\n  });\r\n  return failed ? null : undoDelta;\r\n}\r\n\r\nexport { History as default, getLastChangeIndex };\r\n","import clone from 'clone';\r\nimport equal from 'deep-equal';\r\nimport extend from 'extend';\r\nimport Delta from 'quill-delta';\r\nimport DeltaOp from 'quill-delta/lib/op';\r\nimport { EmbedBlot, Scope, TextBlot } from 'parchment';\r\nimport Quill from '../core/quill';\r\nimport logger from '../core/logger';\r\nimport Module from '../core/module';\r\n\r\nconst debug = logger('quill:keyboard');\r\n\r\nconst SHORTKEY = /Mac/i.test(navigator.platform) ? 'metaKey' : 'ctrlKey';\r\n\r\nclass Keyboard extends Module {\r\n  static match(evt, binding) {\r\n    if (\r\n      ['altKey', 'ctrlKey', 'metaKey', 'shiftKey'].some(key => {\r\n        return !!binding[key] !== evt[key] && binding[key] !== null;\r\n      })\r\n    ) {\r\n      return false;\r\n    }\r\n    return binding.key === evt.key || binding.key === evt.which;\r\n  }\r\n\r\n  constructor(quill, options) {\r\n    super(quill, options);\r\n    this.bindings = {};\r\n    Object.keys(this.options.bindings).forEach(name => {\r\n      if (this.options.bindings[name]) {\r\n        this.addBinding(this.options.bindings[name]);\r\n      }\r\n    });\r\n    this.addBinding({ key: 'Enter', shiftKey: null }, handleEnter);\r\n    this.addBinding(\r\n      { key: 'Enter', metaKey: null, ctrlKey: null, altKey: null },\r\n      () => {},\r\n    );\r\n    if (/Firefox/i.test(navigator.userAgent)) {\r\n      // Need to handle delete and backspace for Firefox in the general case #1171\r\n      this.addBinding(\r\n        { key: 'Backspace' },\r\n        { collapsed: true },\r\n        handleBackspace,\r\n      );\r\n      this.addBinding({ key: 'Delete' }, { collapsed: true }, handleDelete);\r\n    } else {\r\n      this.addBinding(\r\n        { key: 'Backspace' },\r\n        { collapsed: true, prefix: /^.?$/ },\r\n        handleBackspace,\r\n      );\r\n      this.addBinding(\r\n        { key: 'Delete' },\r\n        { collapsed: true, suffix: /^.?$/ },\r\n        handleDelete,\r\n      );\r\n    }\r\n    this.addBinding(\r\n      { key: 'Backspace' },\r\n      { collapsed: false },\r\n      handleDeleteRange,\r\n    );\r\n    this.addBinding({ key: 'Delete' }, { collapsed: false }, handleDeleteRange);\r\n    this.addBinding(\r\n      {\r\n        key: 'Backspace',\r\n        altKey: null,\r\n        ctrlKey: null,\r\n        metaKey: null,\r\n        shiftKey: null,\r\n      },\r\n      { collapsed: true, offset: 0 },\r\n      handleBackspace,\r\n    );\r\n    this.listen();\r\n  }\r\n\r\n  addBinding(keyBinding, context = {}, handler = {}) {\r\n    const binding = normalize(keyBinding);\r\n    if (binding == null) {\r\n      debug.warn('Attempted to add invalid keyboard binding', binding);\r\n      return;\r\n    }\r\n    if (typeof context === 'function') {\r\n      context = { handler: context };\r\n    }\r\n    if (typeof handler === 'function') {\r\n      handler = { handler };\r\n    }\r\n    const keys = Array.isArray(binding.key) ? binding.key : [binding.key];\r\n    keys.forEach(key => {\r\n      const singleBinding = extend({}, binding, { key }, context, handler);\r\n      this.bindings[singleBinding.key] = this.bindings[singleBinding.key] || [];\r\n      this.bindings[singleBinding.key].push(singleBinding);\r\n    });\r\n  }\r\n\r\n  listen() {\r\n    this.quill.root.addEventListener('keydown', evt => {\r\n      if (evt.defaultPrevented) return;\r\n      const bindings = (this.bindings[evt.key] || []).concat(\r\n        this.bindings[evt.which] || [],\r\n      );\r\n      const matches = bindings.filter(binding => Keyboard.match(evt, binding));\r\n      if (matches.length === 0) return;\r\n      const range = this.quill.getSelection();\r\n      if (range == null || !this.quill.hasFocus()) return;\r\n      const [line, offset] = this.quill.getLine(range.index);\r\n      const [leafStart, offsetStart] = this.quill.getLeaf(range.index);\r\n      const [leafEnd, offsetEnd] =\r\n        range.length === 0\r\n          ? [leafStart, offsetStart]\r\n          : this.quill.getLeaf(range.index + range.length);\r\n      const prefixText =\r\n        leafStart instanceof TextBlot\r\n          ? leafStart.value().slice(0, offsetStart)\r\n          : '';\r\n      const suffixText =\r\n        leafEnd instanceof TextBlot ? leafEnd.value().slice(offsetEnd) : '';\r\n      const curContext = {\r\n        collapsed: range.length === 0,\r\n        empty: range.length === 0 && line.length() <= 1,\r\n        format: this.quill.getFormat(range),\r\n        line,\r\n        offset,\r\n        prefix: prefixText,\r\n        suffix: suffixText,\r\n        event: evt,\r\n      };\r\n      const prevented = matches.some(binding => {\r\n        if (\r\n          binding.collapsed != null &&\r\n          binding.collapsed !== curContext.collapsed\r\n        ) {\r\n          return false;\r\n        }\r\n        if (binding.empty != null && binding.empty !== curContext.empty) {\r\n          return false;\r\n        }\r\n        if (binding.offset != null && binding.offset !== curContext.offset) {\r\n          return false;\r\n        }\r\n        if (Array.isArray(binding.format)) {\r\n          // any format is present\r\n          if (binding.format.every(name => curContext.format[name] == null)) {\r\n            return false;\r\n          }\r\n        } else if (typeof binding.format === 'object') {\r\n          // all formats must match\r\n          if (\r\n            !Object.keys(binding.format).every(name => {\r\n              if (binding.format[name] === true)\r\n                return curContext.format[name] != null;\r\n              if (binding.format[name] === false)\r\n                return curContext.format[name] == null;\r\n              return equal(binding.format[name], curContext.format[name]);\r\n            })\r\n          ) {\r\n            return false;\r\n          }\r\n        }\r\n        if (binding.prefix != null && !binding.prefix.test(curContext.prefix)) {\r\n          return false;\r\n        }\r\n        if (binding.suffix != null && !binding.suffix.test(curContext.suffix)) {\r\n          return false;\r\n        }\r\n        return binding.handler.call(this, range, curContext, binding) !== true;\r\n      });\r\n      if (prevented) {\r\n        evt.preventDefault();\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nKeyboard.DEFAULTS = {\r\n  bindings: {\r\n    bold: makeFormatHandler('bold'),\r\n    italic: makeFormatHandler('italic'),\r\n    underline: makeFormatHandler('underline'),\r\n    indent: {\r\n      // highlight tab or tab at beginning of list, indent or blockquote\r\n      key: 'Tab',\r\n      format: ['blockquote', 'indent', 'list'],\r\n      handler(range, context) {\r\n        if (context.collapsed && context.offset !== 0) return true;\r\n        this.quill.format('indent', '+1', Quill.sources.USER);\r\n        return false;\r\n      },\r\n    },\r\n    outdent: {\r\n      key: 'Tab',\r\n      shiftKey: true,\r\n      format: ['blockquote', 'indent', 'list'],\r\n      // highlight tab or tab at beginning of list, indent or blockquote\r\n      handler(range, context) {\r\n        if (context.collapsed && context.offset !== 0) return true;\r\n        this.quill.format('indent', '-1', Quill.sources.USER);\r\n        return false;\r\n      },\r\n    },\r\n    'outdent backspace': {\r\n      key: 'Backspace',\r\n      collapsed: true,\r\n      shiftKey: null,\r\n      metaKey: null,\r\n      ctrlKey: null,\r\n      altKey: null,\r\n      format: ['indent', 'list'],\r\n      offset: 0,\r\n      handler(range, context) {\r\n        if (context.format.indent != null) {\r\n          this.quill.format('indent', '-1', Quill.sources.USER);\r\n        } else if (context.format.list != null) {\r\n          this.quill.format('list', false, Quill.sources.USER);\r\n        }\r\n      },\r\n    },\r\n    'indent code-block': makeCodeBlockHandler(true),\r\n    'outdent code-block': makeCodeBlockHandler(false),\r\n    'remove tab': {\r\n      key: 'Tab',\r\n      shiftKey: true,\r\n      collapsed: true,\r\n      prefix: /\\t$/,\r\n      handler(range) {\r\n        this.quill.deleteText(range.index - 1, 1, Quill.sources.USER);\r\n      },\r\n    },\r\n    tab: {\r\n      key: 'Tab',\r\n      handler(range, context) {\r\n        if (context.format.table) return true;\r\n        this.quill.history.cutoff();\r\n        const delta = new Delta()\r\n          .retain(range.index)\r\n          .delete(range.length)\r\n          .insert('\\t');\r\n        this.quill.updateContents(delta, Quill.sources.USER);\r\n        this.quill.history.cutoff();\r\n        this.quill.setSelection(range.index + 1, Quill.sources.SILENT);\r\n        return false;\r\n      },\r\n    },\r\n    'blockquote empty enter': {\r\n      key: 'Enter',\r\n      collapsed: true,\r\n      format: ['blockquote'],\r\n      empty: true,\r\n      handler() {\r\n        this.quill.format('blockquote', false, Quill.sources.USER);\r\n      },\r\n    },\r\n    'list empty enter': {\r\n      key: 'Enter',\r\n      collapsed: true,\r\n      format: ['list'],\r\n      empty: true,\r\n      handler(range, context) {\r\n        const formats = { list: false };\r\n        if (context.format.indent) {\r\n          formats.indent = false;\r\n        }\r\n        this.quill.formatLine(\r\n          range.index,\r\n          range.length,\r\n          formats,\r\n          Quill.sources.USER,\r\n        );\r\n      },\r\n    },\r\n    'checklist enter': {\r\n      key: 'Enter',\r\n      collapsed: true,\r\n      format: { list: 'checked' },\r\n      handler(range) {\r\n        const [line, offset] = this.quill.getLine(range.index);\r\n        const formats = extend({}, line.formats(), { list: 'checked' });\r\n        const delta = new Delta()\r\n          .retain(range.index)\r\n          .insert('\\n', formats)\r\n          .retain(line.length() - offset - 1)\r\n          .retain(1, { list: 'unchecked' });\r\n        this.quill.updateContents(delta, Quill.sources.USER);\r\n        this.quill.setSelection(range.index + 1, Quill.sources.SILENT);\r\n        this.quill.scrollIntoView();\r\n      },\r\n    },\r\n    'header enter': {\r\n      key: 'Enter',\r\n      collapsed: true,\r\n      format: ['header'],\r\n      suffix: /^$/,\r\n      handler(range, context) {\r\n        const [line, offset] = this.quill.getLine(range.index);\r\n        const delta = new Delta()\r\n          .retain(range.index)\r\n          .insert('\\n', context.format)\r\n          .retain(line.length() - offset - 1)\r\n          .retain(1, { header: null });\r\n        this.quill.updateContents(delta, Quill.sources.USER);\r\n        this.quill.setSelection(range.index + 1, Quill.sources.SILENT);\r\n        this.quill.scrollIntoView();\r\n      },\r\n    },\r\n    'table backspace': {\r\n      key: 'Backspace',\r\n      format: ['table'],\r\n      collapsed: true,\r\n      offset: 0,\r\n      handler() {},\r\n    },\r\n    'table delete': {\r\n      key: 'Delete',\r\n      format: ['table'],\r\n      collapsed: true,\r\n      suffix: /^$/,\r\n      handler() {},\r\n    },\r\n    'table enter': {\r\n      key: 'Enter',\r\n      shiftKey: null,\r\n      format: ['table'],\r\n      handler(range) {\r\n        const module = this.quill.getModule('table');\r\n        if (module) {\r\n          const [table, row, cell, offset] = module.getTable(range);\r\n          const shift = tableSide(table, row, cell, offset);\r\n          if (shift == null) return;\r\n          let index = table.offset();\r\n          if (shift < 0) {\r\n            const delta = new Delta().retain(index).insert('\\n');\r\n            this.quill.updateContents(delta, Quill.sources.USER);\r\n            this.quill.setSelection(\r\n              range.index + 1,\r\n              range.length,\r\n              Quill.sources.SILENT,\r\n            );\r\n          } else if (shift > 0) {\r\n            index += table.length();\r\n            const delta = new Delta().retain(index).insert('\\n');\r\n            this.quill.updateContents(delta, Quill.sources.USER);\r\n            this.quill.setSelection(index, Quill.sources.USER);\r\n          }\r\n        }\r\n      },\r\n    },\r\n    'table tab': {\r\n      key: 'Tab',\r\n      shiftKey: null,\r\n      format: ['table'],\r\n      handler(range, context) {\r\n        const { event, line: cell } = context;\r\n        const offset = cell.offset(this.quill.scroll);\r\n        if (event.shiftKey) {\r\n          this.quill.setSelection(offset - 1, Quill.sources.USER);\r\n        } else {\r\n          this.quill.setSelection(offset + cell.length(), Quill.sources.USER);\r\n        }\r\n      },\r\n    },\r\n    'list autofill': {\r\n      key: ' ',\r\n      collapsed: true,\r\n      format: {\r\n        list: false,\r\n        'code-block': false,\r\n        blockquote: false,\r\n        header: false,\r\n        table: false,\r\n      },\r\n      prefix: /^\\s*?(\\d+\\.|-|\\*|\\[ ?\\]|\\[x\\])$/,\r\n      handler(range, context) {\r\n        if (this.quill.scroll.query('list') == null) return true;\r\n        const { length } = context.prefix;\r\n        const [line, offset] = this.quill.getLine(range.index);\r\n        if (offset > length) return true;\r\n        let value;\r\n        switch (context.prefix.trim()) {\r\n          case '[]':\r\n          case '[ ]':\r\n            value = 'unchecked';\r\n            break;\r\n          case '[x]':\r\n            value = 'checked';\r\n            break;\r\n          case '-':\r\n          case '*':\r\n            value = 'bullet';\r\n            break;\r\n          default:\r\n            value = 'ordered';\r\n        }\r\n        this.quill.insertText(range.index, ' ', Quill.sources.USER);\r\n        this.quill.history.cutoff();\r\n        const delta = new Delta()\r\n          .retain(range.index - offset)\r\n          .delete(length + 1)\r\n          .retain(line.length() - 2 - offset)\r\n          .retain(1, { list: value });\r\n        this.quill.updateContents(delta, Quill.sources.USER);\r\n        this.quill.history.cutoff();\r\n        this.quill.setSelection(range.index - length, Quill.sources.SILENT);\r\n        return false;\r\n      },\r\n    },\r\n    'code exit': {\r\n      key: 'Enter',\r\n      collapsed: true,\r\n      format: ['code-block'],\r\n      prefix: /^$/,\r\n      suffix: /^\\s*$/,\r\n      handler(range) {\r\n        const [line, offset] = this.quill.getLine(range.index);\r\n        let numLines = 2;\r\n        let cur = line;\r\n        while (\r\n          cur != null &&\r\n          cur.length() <= 1 &&\r\n          cur.formats()['code-block']\r\n        ) {\r\n          cur = cur.prev;\r\n          numLines -= 1;\r\n          // Requisite prev lines are empty\r\n          if (numLines <= 0) {\r\n            const delta = new Delta()\r\n              .retain(range.index + line.length() - offset - 2)\r\n              .retain(1, { 'code-block': null })\r\n              .delete(1);\r\n            this.quill.updateContents(delta, Quill.sources.USER);\r\n            this.quill.setSelection(range.index - 1, Quill.sources.SILENT);\r\n            return false;\r\n          }\r\n        }\r\n        return true;\r\n      },\r\n    },\r\n    'embed left': makeEmbedArrowHandler('ArrowLeft', false),\r\n    'embed left shift': makeEmbedArrowHandler('ArrowLeft', true),\r\n    'embed right': makeEmbedArrowHandler('ArrowRight', false),\r\n    'embed right shift': makeEmbedArrowHandler('ArrowRight', true),\r\n    'table down': makeTableArrowHandler(false),\r\n    'table up': makeTableArrowHandler(true),\r\n  },\r\n};\r\n\r\nfunction handleBackspace(range, context) {\r\n  if (range.index === 0 || this.quill.getLength() <= 1) return;\r\n  const [line] = this.quill.getLine(range.index);\r\n  let formats = {};\r\n  if (context.offset === 0) {\r\n    const [prev] = this.quill.getLine(range.index - 1);\r\n    if (prev != null) {\r\n      if (prev.length() > 1 || prev.statics.blotName === 'table') {\r\n        const curFormats = line.formats();\r\n        const prevFormats = this.quill.getFormat(range.index - 1, 1);\r\n        formats = DeltaOp.attributes.diff(curFormats, prevFormats) || {};\r\n      }\r\n    }\r\n  }\r\n  // Check for astral symbols\r\n  const length = /[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]$/.test(context.prefix) ? 2 : 1;\r\n  this.quill.deleteText(range.index - length, length, Quill.sources.USER);\r\n  if (Object.keys(formats).length > 0) {\r\n    this.quill.formatLine(\r\n      range.index - length,\r\n      length,\r\n      formats,\r\n      Quill.sources.USER,\r\n    );\r\n  }\r\n  this.quill.focus();\r\n}\r\n\r\nfunction handleDelete(range, context) {\r\n  // Check for astral symbols\r\n  const length = /^[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]/.test(context.suffix) ? 2 : 1;\r\n  if (range.index >= this.quill.getLength() - length) return;\r\n  let formats = {};\r\n  let nextLength = 0;\r\n  const [line] = this.quill.getLine(range.index);\r\n  if (context.offset >= line.length() - 1) {\r\n    const [next] = this.quill.getLine(range.index + 1);\r\n    if (next) {\r\n      const curFormats = line.formats();\r\n      const nextFormats = this.quill.getFormat(range.index, 1);\r\n      formats = DeltaOp.attributes.diff(curFormats, nextFormats) || {};\r\n      nextLength = next.length();\r\n    }\r\n  }\r\n  this.quill.deleteText(range.index, length, Quill.sources.USER);\r\n  if (Object.keys(formats).length > 0) {\r\n    this.quill.formatLine(\r\n      range.index + nextLength - 1,\r\n      length,\r\n      formats,\r\n      Quill.sources.USER,\r\n    );\r\n  }\r\n}\r\n\r\nfunction handleDeleteRange(range) {\r\n  const lines = this.quill.getLines(range);\r\n  let formats = {};\r\n  if (lines.length > 1) {\r\n    const firstFormats = lines[0].formats();\r\n    const lastFormats = lines[lines.length - 1].formats();\r\n    formats = DeltaOp.attributes.diff(lastFormats, firstFormats) || {};\r\n  }\r\n  this.quill.deleteText(range, Quill.sources.USER);\r\n  if (Object.keys(formats).length > 0) {\r\n    this.quill.formatLine(range.index, 1, formats, Quill.sources.USER);\r\n  }\r\n  this.quill.setSelection(range.index, Quill.sources.SILENT);\r\n  this.quill.focus();\r\n}\r\n\r\n// TODO use just updateContents()\r\nfunction handleEnter(range, context) {\r\n  if (range.length > 0) {\r\n    this.quill.scroll.deleteAt(range.index, range.length); // So we do not trigger text-change\r\n  }\r\n  const lineFormats = Object.keys(context.format).reduce((formats, format) => {\r\n    if (\r\n      this.quill.scroll.query(format, Scope.BLOCK) &&\r\n      !Array.isArray(context.format[format])\r\n    ) {\r\n      formats[format] = context.format[format];\r\n    }\r\n    return formats;\r\n  }, {});\r\n  this.quill.insertText(range.index, '\\n', lineFormats, Quill.sources.USER);\r\n  // Earlier scroll.deleteAt might have messed up our selection,\r\n  // so insertText's built in selection preservation is not reliable\r\n  this.quill.setSelection(range.index + 1, Quill.sources.SILENT);\r\n  this.quill.focus();\r\n  Object.keys(context.format).forEach(name => {\r\n    if (lineFormats[name] != null) return;\r\n    if (Array.isArray(context.format[name])) return;\r\n    if (name === 'link') return;\r\n    this.quill.format(name, context.format[name], Quill.sources.USER);\r\n  });\r\n}\r\n\r\nfunction makeCodeBlockHandler(indent) {\r\n  return {\r\n    key: 'Tab',\r\n    shiftKey: !indent,\r\n    format: { 'code-block': true },\r\n    handler(range) {\r\n      const CodeBlock = this.quill.scroll.query('code-block');\r\n      const lines =\r\n        range.length === 0\r\n          ? this.quill.getLines(range.index, 1)\r\n          : this.quill.getLines(range);\r\n      let { index, length } = range;\r\n      lines.forEach((line, i) => {\r\n        if (indent) {\r\n          line.insertAt(0, CodeBlock.TAB);\r\n          if (i === 0) {\r\n            index += CodeBlock.TAB.length;\r\n          } else {\r\n            length += CodeBlock.TAB.length;\r\n          }\r\n        } else if (line.domNode.textContent.startsWith(CodeBlock.TAB)) {\r\n          line.deleteAt(0, CodeBlock.TAB.length);\r\n          if (i === 0) {\r\n            index -= CodeBlock.TAB.length;\r\n          } else {\r\n            length -= CodeBlock.TAB.length;\r\n          }\r\n        }\r\n      });\r\n      this.quill.update(Quill.sources.USER);\r\n      this.quill.setSelection(index, length, Quill.sources.SILENT);\r\n    },\r\n  };\r\n}\r\n\r\nfunction makeEmbedArrowHandler(key, shiftKey) {\r\n  const where = key === 'ArrowLeft' ? 'prefix' : 'suffix';\r\n  return {\r\n    key,\r\n    shiftKey,\r\n    altKey: null,\r\n    [where]: /^$/,\r\n    handler(range) {\r\n      let { index } = range;\r\n      if (key === 'ArrowRight') {\r\n        index += range.length + 1;\r\n      }\r\n      const [leaf] = this.quill.getLeaf(index);\r\n      if (!(leaf instanceof EmbedBlot)) return true;\r\n      if (key === 'ArrowLeft') {\r\n        if (shiftKey) {\r\n          this.quill.setSelection(\r\n            range.index - 1,\r\n            range.length + 1,\r\n            Quill.sources.USER,\r\n          );\r\n        } else {\r\n          this.quill.setSelection(range.index - 1, Quill.sources.USER);\r\n        }\r\n      } else if (shiftKey) {\r\n        this.quill.setSelection(\r\n          range.index,\r\n          range.length + 1,\r\n          Quill.sources.USER,\r\n        );\r\n      } else {\r\n        this.quill.setSelection(\r\n          range.index + range.length + 1,\r\n          Quill.sources.USER,\r\n        );\r\n      }\r\n      return false;\r\n    },\r\n  };\r\n}\r\n\r\nfunction makeFormatHandler(format) {\r\n  return {\r\n    key: format[0],\r\n    shortKey: true,\r\n    handler(range, context) {\r\n      this.quill.format(format, !context.format[format], Quill.sources.USER);\r\n    },\r\n  };\r\n}\r\n\r\nfunction makeTableArrowHandler(up) {\r\n  return {\r\n    key: up ? 'ArrowUp' : 'ArrowDown',\r\n    collapsed: true,\r\n    format: ['table'],\r\n    handler(range, context) {\r\n      // TODO move to table module\r\n      const key = up ? 'prev' : 'next';\r\n      const cell = context.line;\r\n      const targetRow = cell.parent[key];\r\n      if (targetRow != null) {\r\n        if (targetRow.statics.blotName === 'table-row') {\r\n          let targetCell = targetRow.children.head;\r\n          let cur = cell;\r\n          while (cur.prev != null) {\r\n            cur = cur.prev;\r\n            targetCell = targetCell.next;\r\n          }\r\n          const index =\r\n            targetCell.offset(this.quill.scroll) +\r\n            Math.min(context.offset, targetCell.length() - 1);\r\n          this.quill.setSelection(index, 0, Quill.sources.USER);\r\n        }\r\n      } else {\r\n        const targetLine = cell.table()[key];\r\n        if (targetLine != null) {\r\n          if (up) {\r\n            this.quill.setSelection(\r\n              targetLine.offset(this.quill.scroll) + targetLine.length() - 1,\r\n              0,\r\n              Quill.sources.USER,\r\n            );\r\n          } else {\r\n            this.quill.setSelection(\r\n              targetLine.offset(this.quill.scroll),\r\n              0,\r\n              Quill.sources.USER,\r\n            );\r\n          }\r\n        }\r\n      }\r\n      return false;\r\n    },\r\n  };\r\n}\r\n\r\nfunction normalize(binding) {\r\n  if (typeof binding === 'string' || typeof binding === 'number') {\r\n    binding = { key: binding };\r\n  } else if (typeof binding === 'object') {\r\n    binding = clone(binding, false);\r\n  } else {\r\n    return null;\r\n  }\r\n  if (binding.shortKey) {\r\n    binding[SHORTKEY] = binding.shortKey;\r\n    delete binding.shortKey;\r\n  }\r\n  return binding;\r\n}\r\n\r\nfunction tableSide(table, row, cell, offset) {\r\n  if (row.prev == null && row.next == null) {\r\n    if (cell.prev == null && cell.next == null) {\r\n      return offset === 0 ? -1 : 1;\r\n    }\r\n    return cell.prev == null ? -1 : 1;\r\n  }\r\n  if (row.prev == null) {\r\n    return -1;\r\n  }\r\n  if (row.next == null) {\r\n    return 1;\r\n  }\r\n  return null;\r\n}\r\n\r\nexport { Keyboard as default, SHORTKEY, normalize };\r\n","import Delta from 'quill-delta';\r\nimport Emitter from '../core/emitter';\r\nimport Module from '../core/module';\r\n\r\nclass Uploader extends Module {\r\n  constructor(quill, options) {\r\n    super(quill, options);\r\n    quill.root.addEventListener('drop', e => {\r\n      e.preventDefault();\r\n      let native;\r\n      if (document.caretRangeFromPoint) {\r\n        native = document.caretRangeFromPoint(e.clientX, e.clientY);\r\n      } else if (document.caretPositionFromPoint) {\r\n        const position = document.caretPositionFromPoint(e.clientX, e.clientY);\r\n        native = document.createRange();\r\n        native.setStart(position.offsetNode, position.offset);\r\n        native.setEnd(position.offsetNode, position.offset);\r\n      } else {\r\n        return;\r\n      }\r\n      const normalized = quill.selection.normalizeNative(native);\r\n      const range = quill.selection.normalizedToRange(normalized);\r\n      this.upload(range, e.dataTransfer.files);\r\n    });\r\n  }\r\n\r\n  upload(range, files) {\r\n    const uploads = [];\r\n    Array.from(files).forEach(file => {\r\n      if (file && this.options.mimetypes.includes(file.type)) {\r\n        uploads.push(file);\r\n      }\r\n    });\r\n    if (uploads.length > 0) {\r\n      this.options.handler.call(this, range, uploads);\r\n    }\r\n  }\r\n}\r\n\r\nUploader.DEFAULTS = {\r\n  mimetypes: ['image/png', 'image/jpeg'],\r\n  handler(range, files) {\r\n    const promises = files.map(file => {\r\n      return new Promise(resolve => {\r\n        const reader = new FileReader();\r\n        reader.onload = e => {\r\n          resolve(e.target.result);\r\n        };\r\n        reader.readAsDataURL(file);\r\n      });\r\n    });\r\n    Promise.all(promises).then(images => {\r\n      const update = images.reduce((delta, image) => {\r\n        return delta.insert({ image });\r\n      }, new Delta().retain(range.index).delete(range.length));\r\n      this.quill.updateContents(update, Emitter.sources.USER);\r\n      this.quill.setSelection(\r\n        range.index + images.length,\r\n        Emitter.sources.SILENT,\r\n      );\r\n    });\r\n  },\r\n};\r\n\r\nexport default Uploader;\r\n","import { ClassAttributor, Scope } from 'parchment';\r\n\r\nclass IndentAttributor extends ClassAttributor {\r\n  add(node, value) {\r\n    if (value === '+1' || value === '-1') {\r\n      const indent = this.value(node) || 0;\r\n      value = value === '+1' ? indent + 1 : indent - 1;\r\n    }\r\n    if (value === 0) {\r\n      this.remove(node);\r\n      return true;\r\n    }\r\n    return super.add(node, value);\r\n  }\r\n\r\n  canAdd(node, value) {\r\n    return super.canAdd(node, value) || super.canAdd(node, parseInt(value, 10));\r\n  }\r\n\r\n  value(node) {\r\n    return parseInt(super.value(node), 10) || undefined; // Don't return NaN\r\n  }\r\n}\r\n\r\nconst IndentClass = new IndentAttributor('indent', 'ql-indent', {\r\n  scope: Scope.BLOCK,\r\n  whitelist: [1, 2, 3, 4, 5, 6, 7, 8],\r\n});\r\n\r\nexport default IndentClass;\r\n","import Block from '../blots/block';\r\n\r\nclass Blockquote extends Block {}\r\nBlockquote.blotName = 'blockquote';\r\nBlockquote.tagName = 'blockquote';\r\n\r\nexport default Blockquote;\r\n","import Block from '../blots/block';\r\n\r\nclass Header extends Block {\r\n  static formats(domNode) {\r\n    return this.tagName.indexOf(domNode.tagName) + 1;\r\n  }\r\n}\r\nHeader.blotName = 'header';\r\nHeader.tagName = ['H1', 'H2', 'H3', 'H4', 'H5', 'H6'];\r\n\r\nexport default Header;\r\n","import Block from '../blots/block';\r\nimport Container from '../blots/container';\r\nimport Quill from '../core/quill';\r\n\r\nclass ListContainer extends Container {}\r\nListContainer.blotName = 'list-container';\r\nListContainer.tagName = 'OL';\r\n\r\nclass ListItem extends Block {\r\n  static create(value) {\r\n    const node = super.create();\r\n    node.setAttribute('data-list', value);\r\n    return node;\r\n  }\r\n\r\n  static formats(domNode) {\r\n    return domNode.getAttribute('data-list') || undefined;\r\n  }\r\n\r\n  static register() {\r\n    Quill.register(ListContainer);\r\n  }\r\n\r\n  constructor(scroll, domNode) {\r\n    super(scroll, domNode);\r\n    const ui = domNode.ownerDocument.createElement('span');\r\n    const listEventHandler = e => {\r\n      if (!scroll.isEnabled()) return;\r\n      const format = this.statics.formats(domNode, scroll);\r\n      if (format === 'checked') {\r\n        this.format('list', 'unchecked');\r\n        e.preventDefault();\r\n      } else if (format === 'unchecked') {\r\n        this.format('list', 'checked');\r\n        e.preventDefault();\r\n      }\r\n    };\r\n    ui.addEventListener('mousedown', listEventHandler);\r\n    ui.addEventListener('touchstart', listEventHandler);\r\n    this.attachUI(ui);\r\n  }\r\n\r\n  format(name, value) {\r\n    if (name === this.statics.blotName && value) {\r\n      this.domNode.setAttribute('data-list', value);\r\n    } else {\r\n      super.format(name, value);\r\n    }\r\n  }\r\n}\r\nListItem.blotName = 'list';\r\nListItem.tagName = 'LI';\r\n\r\nListContainer.allowedChildren = [ListItem];\r\nListItem.requiredContainer = ListContainer;\r\n\r\nexport { ListContainer, ListItem as default };\r\n","import Bold from './bold';\r\n\r\nclass Italic extends Bold {}\r\nItalic.blotName = 'italic';\r\nItalic.tagName = ['EM', 'I'];\r\n\r\nexport default Italic;\r\n","import Inline from '../blots/inline';\r\n\r\nclass Script extends Inline {\r\n  static create(value) {\r\n    if (value === 'super') {\r\n      return document.createElement('sup');\r\n    }\r\n    if (value === 'sub') {\r\n      return document.createElement('sub');\r\n    }\r\n    return super.create(value);\r\n  }\r\n\r\n  static formats(domNode) {\r\n    if (domNode.tagName === 'SUB') return 'sub';\r\n    if (domNode.tagName === 'SUP') return 'super';\r\n    return undefined;\r\n  }\r\n}\r\nScript.blotName = 'script';\r\nScript.tagName = ['SUB', 'SUP'];\r\n\r\nexport default Script;\r\n","import Inline from '../blots/inline';\r\n\r\nclass Strike extends Inline {}\r\nStrike.blotName = 'strike';\r\nStrike.tagName = 'S';\r\n\r\nexport default Strike;\r\n","import Inline from '../blots/inline';\r\n\r\nclass Underline extends Inline {}\r\nUnderline.blotName = 'underline';\r\nUnderline.tagName = 'U';\r\n\r\nexport default Underline;\r\n","import Embed from '../blots/embed';\r\n\r\nclass Formula extends Embed {\r\n  static create(value) {\r\n    if (window.katex == null) {\r\n      throw new Error('Formula module requires KaTeX.');\r\n    }\r\n    const node = super.create(value);\r\n    if (typeof value === 'string') {\r\n      window.katex.render(value, node, {\r\n        throwOnError: false,\r\n        errorColor: '#f00',\r\n      });\r\n      node.setAttribute('data-value', value);\r\n    }\r\n    return node;\r\n  }\r\n\r\n  static value(domNode) {\r\n    return domNode.getAttribute('data-value');\r\n  }\r\n\r\n  html() {\r\n    const { formula } = this.value();\r\n    return `<span>${formula}</span>`;\r\n  }\r\n}\r\nFormula.blotName = 'formula';\r\nFormula.className = 'ql-formula';\r\nFormula.tagName = 'SPAN';\r\n\r\nexport default Formula;\r\n","import { EmbedBlot } from 'parchment';\r\nimport { sanitize } from './link';\r\n\r\nconst ATTRIBUTES = ['alt', 'height', 'width'];\r\n\r\nclass Image extends EmbedBlot {\r\n  static create(value) {\r\n    const node = super.create(value);\r\n    if (typeof value === 'string') {\r\n      node.setAttribute('src', this.sanitize(value));\r\n    }\r\n    return node;\r\n  }\r\n\r\n  static formats(domNode) {\r\n    return ATTRIBUTES.reduce((formats, attribute) => {\r\n      if (domNode.hasAttribute(attribute)) {\r\n        formats[attribute] = domNode.getAttribute(attribute);\r\n      }\r\n      return formats;\r\n    }, {});\r\n  }\r\n\r\n  static match(url) {\r\n    return /\\.(jpe?g|gif|png)$/.test(url) || /^data:image\\/.+;base64/.test(url);\r\n  }\r\n\r\n  static register() {\r\n    if (/Firefox/i.test(navigator.userAgent)) {\r\n      setTimeout(() => {\r\n        // Disable image resizing in Firefox\r\n        document.execCommand('enableObjectResizing', false, false);\r\n      }, 1);\r\n    }\r\n  }\r\n\r\n  static sanitize(url) {\r\n    return sanitize(url, ['http', 'https', 'data']) ? url : '//:0';\r\n  }\r\n\r\n  static value(domNode) {\r\n    return domNode.getAttribute('src');\r\n  }\r\n\r\n  format(name, value) {\r\n    if (ATTRIBUTES.indexOf(name) > -1) {\r\n      if (value) {\r\n        this.domNode.setAttribute(name, value);\r\n      } else {\r\n        this.domNode.removeAttribute(name);\r\n      }\r\n    } else {\r\n      super.format(name, value);\r\n    }\r\n  }\r\n}\r\nImage.blotName = 'image';\r\nImage.tagName = 'IMG';\r\n\r\nexport default Image;\r\n","import { BlockEmbed } from '../blots/block';\r\nimport Link from './link';\r\n\r\nconst ATTRIBUTES = ['height', 'width'];\r\n\r\nclass Video extends BlockEmbed {\r\n  static create(value) {\r\n    const node = super.create(value);\r\n    node.setAttribute('frameborder', '0');\r\n    node.setAttribute('allowfullscreen', true);\r\n    node.setAttribute('src', this.sanitize(value));\r\n    return node;\r\n  }\r\n\r\n  static formats(domNode) {\r\n    return ATTRIBUTES.reduce((formats, attribute) => {\r\n      if (domNode.hasAttribute(attribute)) {\r\n        formats[attribute] = domNode.getAttribute(attribute);\r\n      }\r\n      return formats;\r\n    }, {});\r\n  }\r\n\r\n  static sanitize(url) {\r\n    return Link.sanitize(url); // eslint-disable-line import/no-named-as-default-member\r\n  }\r\n\r\n  static value(domNode) {\r\n    return domNode.getAttribute('src');\r\n  }\r\n\r\n  format(name, value) {\r\n    if (ATTRIBUTES.indexOf(name) > -1) {\r\n      if (value) {\r\n        this.domNode.setAttribute(name, value);\r\n      } else {\r\n        this.domNode.removeAttribute(name);\r\n      }\r\n    } else {\r\n      super.format(name, value);\r\n    }\r\n  }\r\n\r\n  html() {\r\n    const { video } = this.value();\r\n    return `<a href=\"${video}\">${video}</a>`;\r\n  }\r\n}\r\nVideo.blotName = 'video';\r\nVideo.className = 'ql-video';\r\nVideo.tagName = 'IFRAME';\r\n\r\nexport default Video;\r\n","import Delta from 'quill-delta';\r\nimport { ClassAttributor, Scope } from 'parchment';\r\nimport Inline from '../blots/inline';\r\nimport Quill from '../core/quill';\r\nimport Module from '../core/module';\r\nimport { blockDelta } from '../blots/block';\r\nimport BreakBlot from '../blots/break';\r\nimport CursorBlot from '../blots/cursor';\r\nimport TextBlot, { escapeText } from '../blots/text';\r\nimport CodeBlock, { CodeBlockContainer } from '../formats/code';\r\nimport { traverse } from './clipboard';\r\n\r\nconst TokenAttributor = new ClassAttributor('code-token', 'hljs', {\r\n  scope: Scope.INLINE,\r\n});\r\nclass CodeToken extends Inline {\r\n  static formats(node, scroll) {\r\n    while (node != null && node !== scroll.domNode) {\r\n      if (node.classList.contains(CodeBlock.className)) {\r\n        return super.formats(node, scroll);\r\n      }\r\n      node = node.parentNode;\r\n    }\r\n    return undefined;\r\n  }\r\n\r\n  constructor(scroll, domNode, value) {\r\n    super(scroll, domNode, value);\r\n    TokenAttributor.add(this.domNode, value);\r\n  }\r\n\r\n  format(format, value) {\r\n    if (format !== CodeToken.blotName) {\r\n      super.format(format, value);\r\n    } else if (value) {\r\n      TokenAttributor.add(this.domNode, value);\r\n    } else {\r\n      TokenAttributor.remove(this.domNode);\r\n      this.domNode.classList.remove(this.statics.className);\r\n    }\r\n  }\r\n\r\n  optimize(...args) {\r\n    super.optimize(...args);\r\n    if (!TokenAttributor.value(this.domNode)) {\r\n      this.unwrap();\r\n    }\r\n  }\r\n}\r\nCodeToken.blotName = 'code-token';\r\nCodeToken.className = 'ql-token';\r\n\r\nclass SyntaxCodeBlock extends CodeBlock {\r\n  static create(value) {\r\n    const domNode = super.create(value);\r\n    if (typeof value === 'string') {\r\n      domNode.setAttribute('data-language', value);\r\n    }\r\n    return domNode;\r\n  }\r\n\r\n  static formats(domNode) {\r\n    return domNode.getAttribute('data-language') || 'plain';\r\n  }\r\n\r\n  static register() {} // Syntax module will register\r\n\r\n  format(name, value) {\r\n    if (name === this.statics.blotName && value) {\r\n      this.domNode.setAttribute('data-language', value);\r\n    } else {\r\n      super.format(name, value);\r\n    }\r\n  }\r\n\r\n  replaceWith(name, value) {\r\n    this.formatAt(0, this.length(), CodeToken.blotName, false);\r\n    return super.replaceWith(name, value);\r\n  }\r\n}\r\n\r\nclass SyntaxCodeBlockContainer extends CodeBlockContainer {\r\n  attach() {\r\n    super.attach();\r\n    this.forceNext = false;\r\n    this.scroll.emitMount(this);\r\n  }\r\n\r\n  format(name, value) {\r\n    if (name === SyntaxCodeBlock.blotName) {\r\n      this.forceNext = true;\r\n      this.children.forEach(child => {\r\n        child.format(name, value);\r\n      });\r\n    }\r\n  }\r\n\r\n  formatAt(index, length, name, value) {\r\n    if (name === SyntaxCodeBlock.blotName) {\r\n      this.forceNext = true;\r\n    }\r\n    super.formatAt(index, length, name, value);\r\n  }\r\n\r\n  highlight(highlight, forced = false) {\r\n    if (this.children.head == null) return;\r\n    const nodes = Array.from(this.domNode.childNodes).filter(\r\n      node => node !== this.uiNode,\r\n    );\r\n    const text = `${nodes.map(node => node.textContent).join('\\n')}\\n`;\r\n    const language = SyntaxCodeBlock.formats(this.children.head.domNode);\r\n    if (forced || this.forceNext || this.cachedText !== text) {\r\n      if (text.trim().length > 0 || this.cachedText == null) {\r\n        const oldDelta = this.children.reduce((delta, child) => {\r\n          return delta.concat(blockDelta(child));\r\n        }, new Delta());\r\n        const delta = highlight(text, language);\r\n        oldDelta.diff(delta).reduce((index, { retain, attributes }) => {\r\n          // Should be all retains\r\n          if (!retain) return index;\r\n          if (attributes) {\r\n            Object.keys(attributes).forEach(format => {\r\n              if (\r\n                [SyntaxCodeBlock.blotName, CodeToken.blotName].includes(format)\r\n              ) {\r\n                this.formatAt(index, retain, format, attributes[format]);\r\n              }\r\n            });\r\n          }\r\n          return index + retain;\r\n        }, 0);\r\n      }\r\n      this.cachedText = text;\r\n      this.forceNext = false;\r\n    }\r\n  }\r\n\r\n  optimize(context) {\r\n    super.optimize(context);\r\n    if (\r\n      this.parent != null &&\r\n      this.children.head != null &&\r\n      this.uiNode != null\r\n    ) {\r\n      const language = SyntaxCodeBlock.formats(this.children.head.domNode);\r\n      if (language !== this.uiNode.value) {\r\n        this.uiNode.value = language;\r\n      }\r\n    }\r\n  }\r\n}\r\nSyntaxCodeBlockContainer.allowedChildren = [SyntaxCodeBlock];\r\nSyntaxCodeBlock.requiredContainer = SyntaxCodeBlockContainer;\r\nSyntaxCodeBlock.allowedChildren = [CodeToken, CursorBlot, TextBlot, BreakBlot];\r\n\r\nclass Syntax extends Module {\r\n  static register() {\r\n    Quill.register(CodeToken, true);\r\n    Quill.register(SyntaxCodeBlock, true);\r\n    Quill.register(SyntaxCodeBlockContainer, true);\r\n  }\r\n\r\n  constructor(quill, options) {\r\n    super(quill, options);\r\n    if (this.options.hljs == null) {\r\n      throw new Error(\r\n        'Syntax module requires highlight.js. Please include the library on the page before Quill.',\r\n      );\r\n    }\r\n    this.highlightBlot = this.highlightBlot.bind(this);\r\n    this.initListener();\r\n    this.initTimer();\r\n  }\r\n\r\n  initListener() {\r\n    this.quill.on(Quill.events.SCROLL_BLOT_MOUNT, blot => {\r\n      if (!(blot instanceof SyntaxCodeBlockContainer)) return;\r\n      const select = this.quill.root.ownerDocument.createElement('select');\r\n      this.options.languages.forEach(({ key, label }) => {\r\n        const option = select.ownerDocument.createElement('option');\r\n        option.textContent = label;\r\n        option.setAttribute('value', key);\r\n        select.appendChild(option);\r\n      });\r\n      select.addEventListener('change', () => {\r\n        blot.format(SyntaxCodeBlock.blotName, select.value);\r\n        this.quill.root.focus(); // Prevent scrolling\r\n        this.highlight(blot, true);\r\n      });\r\n      if (blot.uiNode == null) {\r\n        blot.attachUI(select);\r\n        if (blot.children.head) {\r\n          select.value = SyntaxCodeBlock.formats(blot.children.head.domNode);\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  initTimer() {\r\n    let timer = null;\r\n    this.quill.on(Quill.events.SCROLL_OPTIMIZE, () => {\r\n      clearTimeout(timer);\r\n      timer = setTimeout(() => {\r\n        this.highlight();\r\n        timer = null;\r\n      }, this.options.interval);\r\n    });\r\n  }\r\n\r\n  highlight(blot = null, force = false) {\r\n    if (this.quill.selection.composing) return;\r\n    this.quill.update(Quill.sources.USER);\r\n    const range = this.quill.getSelection();\r\n    const blots =\r\n      blot == null\r\n        ? this.quill.scroll.descendants(SyntaxCodeBlockContainer)\r\n        : [blot];\r\n    blots.forEach(container => {\r\n      container.highlight(this.highlightBlot, force);\r\n    });\r\n    this.quill.update(Quill.sources.SILENT);\r\n    if (range != null) {\r\n      this.quill.setSelection(range, Quill.sources.SILENT);\r\n    }\r\n  }\r\n\r\n  highlightBlot(text, language = 'plain') {\r\n    if (language === 'plain') {\r\n      return escapeText(text)\r\n        .split('\\n')\r\n        .reduce((delta, line, i) => {\r\n          if (i !== 0) {\r\n            delta.insert('\\n', { [CodeBlock.blotName]: language });\r\n          }\r\n          return delta.insert(line);\r\n        }, new Delta());\r\n    }\r\n    const container = this.quill.root.ownerDocument.createElement('div');\r\n    container.classList.add(CodeBlock.className);\r\n    container.innerHTML = this.options.hljs.highlight(language, text).value;\r\n    return traverse(\r\n      this.quill.scroll,\r\n      container,\r\n      [\r\n        (node, delta) => {\r\n          const value = TokenAttributor.value(node);\r\n          if (value) {\r\n            return delta.compose(\r\n              new Delta().retain(delta.length(), {\r\n                [CodeToken.blotName]: value,\r\n              }),\r\n            );\r\n          }\r\n          return delta;\r\n        },\r\n      ],\r\n      [\r\n        (node, delta) => {\r\n          return node.data.split('\\n').reduce((memo, nodeText, i) => {\r\n            if (i !== 0) memo.insert('\\n', { [CodeBlock.blotName]: language });\r\n            return memo.insert(nodeText);\r\n          }, delta);\r\n        },\r\n      ],\r\n      new WeakMap(),\r\n    );\r\n  }\r\n}\r\nSyntax.DEFAULTS = {\r\n  hljs: (() => {\r\n    return window.hljs;\r\n  })(),\r\n  interval: 1000,\r\n  languages: [\r\n    { key: 'plain', label: 'Plain' },\r\n    { key: 'bash', label: 'Bash' },\r\n    { key: 'cpp', label: 'C++' },\r\n    { key: 'cs', label: 'C#' },\r\n    { key: 'css', label: 'CSS' },\r\n    { key: 'diff', label: 'Diff' },\r\n    { key: 'xml', label: 'HTML/XML' },\r\n    { key: 'java', label: 'Java' },\r\n    { key: 'javascript', label: 'Javascript' },\r\n    { key: 'markdown', label: 'Markdown' },\r\n    { key: 'php', label: 'PHP' },\r\n    { key: 'python', label: 'Python' },\r\n    { key: 'ruby', label: 'Ruby' },\r\n    { key: 'sql', label: 'SQL' },\r\n  ],\r\n};\r\n\r\nexport { SyntaxCodeBlock as CodeBlock, CodeToken, Syntax as default };\r\n","import Delta from 'quill-delta';\r\nimport Quill from '../core/quill';\r\nimport Module from '../core/module';\r\nimport {\r\n  TableCell,\r\n  TableRow,\r\n  TableBody,\r\n  TableContainer,\r\n  tableId,\r\n} from '../formats/table';\r\n\r\nclass Table extends Module {\r\n  static register() {\r\n    Quill.register(TableCell);\r\n    Quill.register(TableRow);\r\n    Quill.register(TableBody);\r\n    Quill.register(TableContainer);\r\n  }\r\n\r\n  constructor(...args) {\r\n    super(...args);\r\n    this.listenBalanceCells();\r\n  }\r\n\r\n  balanceTables() {\r\n    this.quill.scroll.descendants(TableContainer).forEach(table => {\r\n      table.balanceCells();\r\n    });\r\n  }\r\n\r\n  deleteColumn() {\r\n    const [table, , cell] = this.getTable();\r\n    if (cell == null) return;\r\n    table.deleteColumn(cell.cellOffset());\r\n    this.quill.update(Quill.sources.USER);\r\n  }\r\n\r\n  deleteRow() {\r\n    const [, row] = this.getTable();\r\n    if (row == null) return;\r\n    row.remove();\r\n    this.quill.update(Quill.sources.USER);\r\n  }\r\n\r\n  deleteTable() {\r\n    const [table] = this.getTable();\r\n    if (table == null) return;\r\n    const offset = table.offset();\r\n    table.remove();\r\n    this.quill.update(Quill.sources.USER);\r\n    this.quill.setSelection(offset, Quill.sources.SILENT);\r\n  }\r\n\r\n  getTable(range = this.quill.getSelection()) {\r\n    if (range == null) return [null, null, null, -1];\r\n    const [cell, offset] = this.quill.getLine(range.index);\r\n    if (cell == null || cell.statics.blotName !== TableCell.blotName) {\r\n      return [null, null, null, -1];\r\n    }\r\n    const row = cell.parent;\r\n    const table = row.parent.parent;\r\n    return [table, row, cell, offset];\r\n  }\r\n\r\n  insertColumn(offset) {\r\n    const range = this.quill.getSelection();\r\n    const [table, row, cell] = this.getTable(range);\r\n    if (cell == null) return;\r\n    const column = cell.cellOffset();\r\n    table.insertColumn(column + offset);\r\n    this.quill.update(Quill.sources.USER);\r\n    let shift = row.rowOffset();\r\n    if (offset === 0) {\r\n      shift += 1;\r\n    }\r\n    this.quill.setSelection(\r\n      range.index + shift,\r\n      range.length,\r\n      Quill.sources.SILENT,\r\n    );\r\n  }\r\n\r\n  insertColumnLeft() {\r\n    this.insertColumn(0);\r\n  }\r\n\r\n  insertColumnRight() {\r\n    this.insertColumn(1);\r\n  }\r\n\r\n  insertRow(offset) {\r\n    const range = this.quill.getSelection();\r\n    const [table, row, cell] = this.getTable(range);\r\n    if (cell == null) return;\r\n    const index = row.rowOffset();\r\n    table.insertRow(index + offset);\r\n    this.quill.update(Quill.sources.USER);\r\n    if (offset > 0) {\r\n      this.quill.setSelection(range, Quill.sources.SILENT);\r\n    } else {\r\n      this.quill.setSelection(\r\n        range.index + row.children.length,\r\n        range.length,\r\n        Quill.sources.SILENT,\r\n      );\r\n    }\r\n  }\r\n\r\n  insertRowAbove() {\r\n    this.insertRow(0);\r\n  }\r\n\r\n  insertRowBelow() {\r\n    this.insertRow(1);\r\n  }\r\n\r\n  insertTable(rows, columns) {\r\n    const range = this.quill.getSelection();\r\n    if (range == null) return;\r\n    const delta = new Array(rows).fill(0).reduce(memo => {\r\n      const text = new Array(columns).fill('\\n').join('');\r\n      return memo.insert(text, { table: tableId() });\r\n    }, new Delta().retain(range.index));\r\n    this.quill.updateContents(delta, Quill.sources.USER);\r\n    this.quill.setSelection(range.index, Quill.sources.SILENT);\r\n    this.balanceTables();\r\n  }\r\n\r\n  listenBalanceCells() {\r\n    this.quill.on(Quill.events.SCROLL_OPTIMIZE, mutations => {\r\n      mutations.some(mutation => {\r\n        if (['TD', 'TR', 'TBODY', 'TABLE'].includes(mutation.target.tagName)) {\r\n          this.quill.once(Quill.events.TEXT_CHANGE, (delta, old, source) => {\r\n            if (source !== Quill.sources.USER) return;\r\n            this.balanceTables();\r\n          });\r\n          return true;\r\n        }\r\n        return false;\r\n      });\r\n    });\r\n  }\r\n}\r\n\r\nexport default Table;\r\n","import Block from '../blots/block';\r\nimport Container from '../blots/container';\r\n\r\nclass TableCell extends Block {\r\n  static create(value) {\r\n    const node = super.create();\r\n    if (value) {\r\n      node.setAttribute('data-row', value);\r\n    } else {\r\n      node.setAttribute('data-row', tableId());\r\n    }\r\n    return node;\r\n  }\r\n\r\n  static formats(domNode) {\r\n    if (domNode.hasAttribute('data-row')) {\r\n      return domNode.getAttribute('data-row');\r\n    }\r\n    return undefined;\r\n  }\r\n\r\n  cellOffset() {\r\n    if (this.parent) {\r\n      return this.parent.children.indexOf(this);\r\n    }\r\n    return -1;\r\n  }\r\n\r\n  format(name, value) {\r\n    if (name === TableCell.blotName && value) {\r\n      this.domNode.setAttribute('data-row', value);\r\n    } else {\r\n      super.format(name, value);\r\n    }\r\n  }\r\n\r\n  row() {\r\n    return this.parent;\r\n  }\r\n\r\n  rowOffset() {\r\n    if (this.row()) {\r\n      return this.row().rowOffset();\r\n    }\r\n    return -1;\r\n  }\r\n\r\n  table() {\r\n    return this.row() && this.row().table();\r\n  }\r\n}\r\nTableCell.blotName = 'table';\r\nTableCell.tagName = 'TD';\r\n\r\nclass TableRow extends Container {\r\n  checkMerge() {\r\n    if (super.checkMerge() && this.next.children.head != null) {\r\n      const thisHead = this.children.head.formats();\r\n      const thisTail = this.children.tail.formats();\r\n      const nextHead = this.next.children.head.formats();\r\n      const nextTail = this.next.children.tail.formats();\r\n      return (\r\n        thisHead.table === thisTail.table &&\r\n        thisHead.table === nextHead.table &&\r\n        thisHead.table === nextTail.table\r\n      );\r\n    }\r\n    return false;\r\n  }\r\n\r\n  optimize(...args) {\r\n    super.optimize(...args);\r\n    this.children.forEach(child => {\r\n      if (child.next == null) return;\r\n      const childFormats = child.formats();\r\n      const nextFormats = child.next.formats();\r\n      if (childFormats.table !== nextFormats.table) {\r\n        const next = this.splitAfter(child);\r\n        if (next) {\r\n          next.optimize();\r\n        }\r\n        // We might be able to merge with prev now\r\n        if (this.prev) {\r\n          this.prev.optimize();\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  rowOffset() {\r\n    if (this.parent) {\r\n      return this.parent.children.indexOf(this);\r\n    }\r\n    return -1;\r\n  }\r\n\r\n  table() {\r\n    return this.parent && this.parent.parent;\r\n  }\r\n}\r\nTableRow.blotName = 'table-row';\r\nTableRow.tagName = 'TR';\r\n\r\nclass TableBody extends Container {}\r\nTableBody.blotName = 'table-body';\r\nTableBody.tagName = 'TBODY';\r\n\r\nclass TableContainer extends Container {\r\n  balanceCells() {\r\n    const rows = this.descendants(TableRow);\r\n    const maxColumns = rows.reduce((max, row) => {\r\n      return Math.max(row.children.length, max);\r\n    }, 0);\r\n    rows.forEach(row => {\r\n      new Array(maxColumns - row.children.length).fill(0).forEach(() => {\r\n        let value;\r\n        if (row.children.head != null) {\r\n          value = TableCell.formats(row.children.head.domNode);\r\n        }\r\n        const blot = this.scroll.create(TableCell.blotName, value);\r\n        row.appendChild(blot);\r\n        blot.optimize(); // Add break blot\r\n      });\r\n    });\r\n  }\r\n\r\n  cells(column) {\r\n    return this.rows().map(row => row.children.at(column));\r\n  }\r\n\r\n  deleteColumn(index) {\r\n    const [body] = this.descendant(TableBody);\r\n    if (body == null || body.children.head == null) return;\r\n    body.children.forEach(row => {\r\n      const cell = row.children.at(index);\r\n      if (cell != null) {\r\n        cell.remove();\r\n      }\r\n    });\r\n  }\r\n\r\n  insertColumn(index) {\r\n    const [body] = this.descendant(TableBody);\r\n    if (body == null || body.children.head == null) return;\r\n    body.children.forEach(row => {\r\n      const ref = row.children.at(index);\r\n      const value = TableCell.formats(row.children.head.domNode);\r\n      const cell = this.scroll.create(TableCell.blotName, value);\r\n      row.insertBefore(cell, ref);\r\n    });\r\n  }\r\n\r\n  insertRow(index) {\r\n    const [body] = this.descendant(TableBody);\r\n    if (body == null || body.children.head == null) return;\r\n    const id = tableId();\r\n    const row = this.scroll.create(TableRow.blotName);\r\n    body.children.head.children.forEach(() => {\r\n      const cell = this.scroll.create(TableCell.blotName, id);\r\n      row.appendChild(cell);\r\n    });\r\n    const ref = body.children.at(index);\r\n    body.insertBefore(row, ref);\r\n  }\r\n\r\n  rows() {\r\n    const body = this.children.head;\r\n    if (body == null) return [];\r\n    return body.children.map(row => row);\r\n  }\r\n}\r\nTableContainer.blotName = 'table-container';\r\nTableContainer.tagName = 'TABLE';\r\n\r\nTableContainer.allowedChildren = [TableBody];\r\nTableBody.requiredContainer = TableContainer;\r\n\r\nTableBody.allowedChildren = [TableRow];\r\nTableRow.requiredContainer = TableBody;\r\n\r\nTableRow.allowedChildren = [TableCell];\r\nTableCell.requiredContainer = TableRow;\r\n\r\nfunction tableId() {\r\n  const id = Math.random()\r\n    .toString(36)\r\n    .slice(2, 6);\r\n  return `row-${id}`;\r\n}\r\n\r\nexport { TableCell, TableRow, TableBody, TableContainer, tableId };\r\n","import Delta from 'quill-delta';\r\nimport { EmbedBlot, Scope } from 'parchment';\r\nimport Quill from '../core/quill';\r\nimport logger from '../core/logger';\r\nimport Module from '../core/module';\r\n\r\nconst debug = logger('quill:toolbar');\r\n\r\nclass Toolbar extends Module {\r\n  constructor(quill, options) {\r\n    super(quill, options);\r\n    if (Array.isArray(this.options.container)) {\r\n      const container = document.createElement('div');\r\n      addControls(container, this.options.container);\r\n      quill.container.parentNode.insertBefore(container, quill.container);\r\n      this.container = container;\r\n    } else if (typeof this.options.container === 'string') {\r\n      this.container = document.querySelector(this.options.container);\r\n    } else {\r\n      this.container = this.options.container;\r\n    }\r\n    if (!(this.container instanceof HTMLElement)) {\r\n      return debug.error('Container required for toolbar', this.options);\r\n    }\r\n    this.container.classList.add('ql-toolbar');\r\n    this.controls = [];\r\n    this.handlers = {};\r\n    Object.keys(this.options.handlers).forEach(format => {\r\n      this.addHandler(format, this.options.handlers[format]);\r\n    });\r\n    Array.from(this.container.querySelectorAll('button, select')).forEach(\r\n      input => {\r\n        this.attach(input);\r\n      },\r\n    );\r\n    this.quill.on(Quill.events.EDITOR_CHANGE, (type, range) => {\r\n      if (type === Quill.events.SELECTION_CHANGE) {\r\n        this.update(range);\r\n      }\r\n    });\r\n    this.quill.on(Quill.events.SCROLL_OPTIMIZE, () => {\r\n      const [range] = this.quill.selection.getRange(); // quill.getSelection triggers update\r\n      this.update(range);\r\n    });\r\n  }\r\n\r\n  addHandler(format, handler) {\r\n    this.handlers[format] = handler;\r\n  }\r\n\r\n  attach(input) {\r\n    let format = Array.from(input.classList).find(className => {\r\n      return className.indexOf('ql-') === 0;\r\n    });\r\n    if (!format) return;\r\n    format = format.slice('ql-'.length);\r\n    if (input.tagName === 'BUTTON') {\r\n      input.setAttribute('type', 'button');\r\n    }\r\n    if (\r\n      this.handlers[format] == null &&\r\n      this.quill.scroll.query(format) == null\r\n    ) {\r\n      debug.warn('ignoring attaching to nonexistent format', format, input);\r\n      return;\r\n    }\r\n    const eventName = input.tagName === 'SELECT' ? 'change' : 'click';\r\n    input.addEventListener(eventName, e => {\r\n      let value;\r\n      if (input.tagName === 'SELECT') {\r\n        if (input.selectedIndex < 0) return;\r\n        const selected = input.options[input.selectedIndex];\r\n        if (selected.hasAttribute('selected')) {\r\n          value = false;\r\n        } else {\r\n          value = selected.value || false;\r\n        }\r\n      } else {\r\n        if (input.classList.contains('ql-active')) {\r\n          value = false;\r\n        } else {\r\n          value = input.value || !input.hasAttribute('value');\r\n        }\r\n        e.preventDefault();\r\n      }\r\n      this.quill.focus();\r\n      const [range] = this.quill.selection.getRange();\r\n      if (this.handlers[format] != null) {\r\n        this.handlers[format].call(this, value);\r\n      } else if (\r\n        this.quill.scroll.query(format).prototype instanceof EmbedBlot\r\n      ) {\r\n        value = prompt(`Enter ${format}`); // eslint-disable-line no-alert\r\n        if (!value) return;\r\n        this.quill.updateContents(\r\n          new Delta()\r\n            .retain(range.index)\r\n            .delete(range.length)\r\n            .insert({ [format]: value }),\r\n          Quill.sources.USER,\r\n        );\r\n      } else {\r\n        this.quill.format(format, value, Quill.sources.USER);\r\n      }\r\n      this.update(range);\r\n    });\r\n    this.controls.push([format, input]);\r\n  }\r\n\r\n  update(range) {\r\n    const formats = range == null ? {} : this.quill.getFormat(range);\r\n    this.controls.forEach(pair => {\r\n      const [format, input] = pair;\r\n      if (input.tagName === 'SELECT') {\r\n        let option;\r\n        if (range == null) {\r\n          option = null;\r\n        } else if (formats[format] == null) {\r\n          option = input.querySelector('option[selected]');\r\n        } else if (!Array.isArray(formats[format])) {\r\n          let value = formats[format];\r\n          if (typeof value === 'string') {\r\n            value = value.replace(/\"/g, '\\\\\"');\r\n          }\r\n          option = input.querySelector(`option[value=\"${value}\"]`);\r\n        }\r\n        if (option == null) {\r\n          input.value = ''; // TODO make configurable?\r\n          input.selectedIndex = -1;\r\n        } else {\r\n          option.selected = true;\r\n        }\r\n      } else if (range == null) {\r\n        input.classList.remove('ql-active');\r\n      } else if (input.hasAttribute('value')) {\r\n        // both being null should match (default values)\r\n        // '1' should match with 1 (headers)\r\n        const isActive =\r\n          formats[format] === input.getAttribute('value') ||\r\n          (formats[format] != null &&\r\n            formats[format].toString() === input.getAttribute('value')) ||\r\n          (formats[format] == null && !input.getAttribute('value'));\r\n        input.classList.toggle('ql-active', isActive);\r\n      } else {\r\n        input.classList.toggle('ql-active', formats[format] != null);\r\n      }\r\n    });\r\n  }\r\n}\r\nToolbar.DEFAULTS = {};\r\n\r\nfunction addButton(container, format, value) {\r\n  const input = document.createElement('button');\r\n  input.setAttribute('type', 'button');\r\n  input.classList.add(`ql-${format}`);\r\n  if (value != null) {\r\n    input.value = value;\r\n  }\r\n  container.appendChild(input);\r\n}\r\n\r\nfunction addControls(container, groups) {\r\n  if (!Array.isArray(groups[0])) {\r\n    groups = [groups];\r\n  }\r\n  groups.forEach(controls => {\r\n    const group = document.createElement('span');\r\n    group.classList.add('ql-formats');\r\n    controls.forEach(control => {\r\n      if (typeof control === 'string') {\r\n        addButton(group, control);\r\n      } else {\r\n        const format = Object.keys(control)[0];\r\n        const value = control[format];\r\n        if (Array.isArray(value)) {\r\n          addSelect(group, format, value);\r\n        } else {\r\n          addButton(group, format, value);\r\n        }\r\n      }\r\n    });\r\n    container.appendChild(group);\r\n  });\r\n}\r\n\r\nfunction addSelect(container, format, values) {\r\n  const input = document.createElement('select');\r\n  input.classList.add(`ql-${format}`);\r\n  values.forEach(value => {\r\n    const option = document.createElement('option');\r\n    if (value !== false) {\r\n      option.setAttribute('value', value);\r\n    } else {\r\n      option.setAttribute('selected', 'selected');\r\n    }\r\n    input.appendChild(option);\r\n  });\r\n  container.appendChild(input);\r\n}\r\n\r\nToolbar.DEFAULTS = {\r\n  container: null,\r\n  handlers: {\r\n    clean() {\r\n      const range = this.quill.getSelection();\r\n      if (range == null) return;\r\n      if (range.length === 0) {\r\n        const formats = this.quill.getFormat();\r\n        Object.keys(formats).forEach(name => {\r\n          // Clean functionality in existing apps only clean inline formats\r\n          if (this.quill.scroll.query(name, Scope.INLINE) != null) {\r\n            this.quill.format(name, false, Quill.sources.USER);\r\n          }\r\n        });\r\n      } else {\r\n        this.quill.removeFormat(range, Quill.sources.USER);\r\n      }\r\n    },\r\n    direction(value) {\r\n      const { align } = this.quill.getFormat();\r\n      if (value === 'rtl' && align == null) {\r\n        this.quill.format('align', 'right', Quill.sources.USER);\r\n      } else if (!value && align === 'right') {\r\n        this.quill.format('align', false, Quill.sources.USER);\r\n      }\r\n      this.quill.format('direction', value, Quill.sources.USER);\r\n    },\r\n    indent(value) {\r\n      const range = this.quill.getSelection();\r\n      const formats = this.quill.getFormat(range);\r\n      const indent = parseInt(formats.indent || 0, 10);\r\n      if (value === '+1' || value === '-1') {\r\n        let modifier = value === '+1' ? 1 : -1;\r\n        if (formats.direction === 'rtl') modifier *= -1;\r\n        this.quill.format('indent', indent + modifier, Quill.sources.USER);\r\n      }\r\n    },\r\n    link(value) {\r\n      if (value === true) {\r\n        value = prompt('Enter link URL:'); // eslint-disable-line no-alert\r\n      }\r\n      this.quill.format('link', value, Quill.sources.USER);\r\n    },\r\n    list(value) {\r\n      const range = this.quill.getSelection();\r\n      const formats = this.quill.getFormat(range);\r\n      if (value === 'check') {\r\n        if (formats.list === 'checked' || formats.list === 'unchecked') {\r\n          this.quill.format('list', false, Quill.sources.USER);\r\n        } else {\r\n          this.quill.format('list', 'unchecked', Quill.sources.USER);\r\n        }\r\n      } else {\r\n        this.quill.format('list', value, Quill.sources.USER);\r\n      }\r\n    },\r\n  },\r\n};\r\n\r\nexport { Toolbar as default, addControls };\r\n","module.exports = \"<svg viewbox=\\\"0 0 18 18\\\"> <line class=ql-stroke x1=3 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=13 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=9 y1=4 y2=4></line> </svg>\";","module.exports = \"<svg viewbox=\\\"0 0 18 18\\\"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=14 x2=4 y1=14 y2=14></line> <line class=ql-stroke x1=12 x2=6 y1=4 y2=4></line> </svg>\";","module.exports = \"<svg viewbox=\\\"0 0 18 18\\\"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=5 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=9 y1=4 y2=4></line> </svg>\";","module.exports = \"<svg viewbox=\\\"0 0 18 18\\\"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=3 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=3 y1=4 y2=4></line> </svg>\";","module.exports = \"<svg viewbox=\\\"0 0 18 18\\\"> <g class=\\\"ql-fill ql-color-label\\\"> <polygon points=\\\"6 6.868 6 6 5 6 5 7 5.942 7 6 6.868\\\"></polygon> <rect height=1 width=1 x=4 y=4></rect> <polygon points=\\\"6.817 5 6 5 6 6 6.38 6 6.817 5\\\"></polygon> <rect height=1 width=1 x=2 y=6></rect> <rect height=1 width=1 x=3 y=5></rect> <rect height=1 width=1 x=4 y=7></rect> <polygon points=\\\"4 11.439 4 11 3 11 3 12 3.755 12 4 11.439\\\"></polygon> <rect height=1 width=1 x=2 y=12></rect> <rect height=1 width=1 x=2 y=9></rect> <rect height=1 width=1 x=2 y=15></rect> <polygon points=\\\"4.63 10 4 10 4 11 4.192 11 4.63 10\\\"></polygon> <rect height=1 width=1 x=3 y=8></rect> <path d=M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z></path> <path d=M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z></path> <path d=M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z></path> <rect height=1 width=1 x=12 y=2></rect> <rect height=1 width=1 x=11 y=3></rect> <path d=M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z></path> <rect height=1 width=1 x=2 y=3></rect> <rect height=1 width=1 x=6 y=2></rect> <rect height=1 width=1 x=3 y=2></rect> <rect height=1 width=1 x=5 y=3></rect> <rect height=1 width=1 x=9 y=2></rect> <rect height=1 width=1 x=15 y=14></rect> <polygon points=\\\"13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174\\\"></polygon> <rect height=1 width=1 x=13 y=7></rect> <rect height=1 width=1 x=15 y=5></rect> <rect height=1 width=1 x=14 y=6></rect> <rect height=1 width=1 x=15 y=8></rect> <rect height=1 width=1 x=14 y=9></rect> <path d=M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z></path> <rect height=1 width=1 x=14 y=3></rect> <polygon points=\\\"12 6.868 12 6 11.62 6 12 6.868\\\"></polygon> <rect height=1 width=1 x=15 y=2></rect> <rect height=1 width=1 x=12 y=5></rect> <rect height=1 width=1 x=13 y=4></rect> <polygon points=\\\"12.933 9 13 9 13 8 12.495 8 12.933 9\\\"></polygon> <rect height=1 width=1 x=9 y=14></rect> <rect height=1 width=1 x=8 y=15></rect> <path d=M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z></path> <rect height=1 width=1 x=5 y=15></rect> <path d=M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z></path> <rect height=1 width=1 x=11 y=15></rect> <path d=M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z></path> <rect height=1 width=1 x=14 y=15></rect> <rect height=1 width=1 x=15 y=11></rect> </g> <polyline class=ql-stroke points=\\\"5.5 13 9 5 12.5 13\\\"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=11 y2=11></line> </svg>\";","module.exports = \"<svg viewbox=\\\"0 0 18 18\\\"> <rect class=\\\"ql-fill ql-stroke\\\" height=3 width=3 x=4 y=5></rect> <rect class=\\\"ql-fill ql-stroke\\\" height=3 width=3 x=11 y=5></rect> <path class=\\\"ql-even ql-fill ql-stroke\\\" d=M7,8c0,4.031-3,5-3,5></path> <path class=\\\"ql-even ql-fill ql-stroke\\\" d=M14,8c0,4.031-3,5-3,5></path> </svg>\";","module.exports = \"<svg viewbox=\\\"0 0 18 18\\\"> <path class=ql-stroke d=M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z></path> <path class=ql-stroke d=M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z></path> </svg>\";","module.exports = \"<svg class=\\\"\\\" viewbox=\\\"0 0 18 18\\\"> <line class=ql-stroke x1=5 x2=13 y1=3 y2=3></line> <line class=ql-stroke x1=6 x2=9.35 y1=12 y2=3></line> <line class=ql-stroke x1=11 x2=15 y1=11 y2=15></line> <line class=ql-stroke x1=15 x2=11 y1=11 y2=15></line> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=7 x=2 y=14></rect> </svg>\";","module.exports = \"<svg viewbox=\\\"0 0 18 18\\\"> <polyline class=\\\"ql-even ql-stroke\\\" points=\\\"5 7 3 9 5 11\\\"></polyline> <polyline class=\\\"ql-even ql-stroke\\\" points=\\\"13 7 15 9 13 11\\\"></polyline> <line class=ql-stroke x1=10 x2=8 y1=5 y2=13></line> </svg>\";","module.exports = \"<svg viewbox=\\\"0 0 18 18\\\"> <line class=\\\"ql-color-label ql-stroke ql-transparent\\\" x1=3 x2=15 y1=15 y2=15></line> <polyline class=ql-stroke points=\\\"5.5 11 9 3 12.5 11\\\"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=9 y2=9></line> </svg>\";","module.exports = \"<svg viewbox=\\\"0 0 18 18\\\"> <polygon class=\\\"ql-stroke ql-fill\\\" points=\\\"3 11 5 9 3 7 3 11\\\"></polygon> <line class=\\\"ql-stroke ql-fill\\\" x1=15 x2=11 y1=4 y2=4></line> <path class=ql-fill d=M11,3a3,3,0,0,0,0,6h1V3H11Z></path> <rect class=ql-fill height=11 width=1 x=11 y=4></rect> <rect class=ql-fill height=11 width=1 x=13 y=4></rect> </svg>\";","module.exports = \"<svg viewbox=\\\"0 0 18 18\\\"> <polygon class=\\\"ql-stroke ql-fill\\\" points=\\\"15 12 13 10 15 8 15 12\\\"></polygon> <line class=\\\"ql-stroke ql-fill\\\" x1=9 x2=5 y1=4 y2=4></line> <path class=ql-fill d=M5,3A3,3,0,0,0,5,9H6V3H5Z></path> <rect class=ql-fill height=11 width=1 x=5 y=4></rect> <rect class=ql-fill height=11 width=1 x=7 y=4></rect> </svg>\";","module.exports = \"<svg viewbox=\\\"0 0 18 18\\\"> <path class=ql-fill d=M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z></path> <rect class=ql-fill height=1.6 rx=0.8 ry=0.8 width=5 x=5.15 y=6.2></rect> <path class=ql-fill d=M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z></path> </svg>\";","module.exports = \"<svg viewBox=\\\"0 0 18 18\\\"> <path class=ql-fill d=M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z /> </svg>\";","module.exports = \"<svg viewBox=\\\"0 0 18 18\\\"> <path class=ql-fill d=M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z /> </svg>\";","module.exports = \"<svg viewbox=\\\"0 0 18 18\\\"> <line class=ql-stroke x1=7 x2=13 y1=4 y2=4></line> <line class=ql-stroke x1=5 x2=11 y1=14 y2=14></line> <line class=ql-stroke x1=8 x2=10 y1=14 y2=4></line> </svg>\";","module.exports = \"<svg viewbox=\\\"0 0 18 18\\\"> <rect class=ql-stroke height=10 width=12 x=3 y=4></rect> <circle class=ql-fill cx=6 cy=7 r=1></circle> <polyline class=\\\"ql-even ql-fill\\\" points=\\\"5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12\\\"></polyline> </svg>\";","module.exports = \"<svg viewbox=\\\"0 0 18 18\\\"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=\\\"ql-fill ql-stroke\\\" points=\\\"3 7 3 11 5 9 3 7\\\"></polyline> </svg>\";","module.exports = \"<svg viewbox=\\\"0 0 18 18\\\"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points=\\\"5 7 5 11 3 9 5 7\\\"></polyline> </svg>\";","module.exports = \"<svg viewbox=\\\"0 0 18 18\\\"> <line class=ql-stroke x1=7 x2=11 y1=7 y2=11></line> <path class=\\\"ql-even ql-stroke\\\" d=M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z></path> <path class=\\\"ql-even ql-stroke\\\" d=M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z></path> </svg>\";","module.exports = \"<svg viewbox=\\\"0 0 18 18\\\"> <line class=ql-stroke x1=6 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=6 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=6 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=3 y1=4 y2=4></line> <line class=ql-stroke x1=3 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=3 y1=14 y2=14></line> </svg>\";","module.exports = \"<svg class=\\\"\\\" viewbox=\\\"0 0 18 18\\\"> <line class=ql-stroke x1=9 x2=15 y1=4 y2=4></line> <polyline class=ql-stroke points=\\\"3 4 4 5 6 3\\\"></polyline> <line class=ql-stroke x1=9 x2=15 y1=14 y2=14></line> <polyline class=ql-stroke points=\\\"3 14 4 15 6 13\\\"></polyline> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points=\\\"3 9 4 10 6 8\\\"></polyline> </svg>\";","module.exports = \"<svg viewbox=\\\"0 0 18 18\\\"> <line class=ql-stroke x1=7 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=7 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=7 x2=15 y1=14 y2=14></line> <line class=\\\"ql-stroke ql-thin\\\" x1=2.5 x2=4.5 y1=5.5 y2=5.5></line> <path class=ql-fill d=M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z></path> <path class=\\\"ql-stroke ql-thin\\\" d=M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156></path> <path class=\\\"ql-stroke ql-thin\\\" d=M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109></path> </svg>\";","module.exports = \"<svg viewbox=\\\"0 0 18 18\\\"> <path class=ql-fill d=M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z /> <path class=ql-fill d=M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z /> </svg>\";","module.exports = \"<svg viewbox=\\\"0 0 18 18\\\"> <path class=ql-fill d=M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z /> <path class=ql-fill d=M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z /> </svg>\";","module.exports = \"<svg viewbox=\\\"0 0 18 18\\\"> <line class=\\\"ql-stroke ql-thin\\\" x1=15.5 x2=2.5 y1=8.5 y2=9.5></line> <path class=ql-fill d=M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z></path> <path class=ql-fill d=M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z></path> </svg>\";","module.exports = \"<svg viewbox=\\\"0 0 18 18\\\"> <rect class=ql-stroke height=12 width=12 x=3 y=3></rect> <rect class=ql-fill height=2 width=3 x=5 y=5></rect> <rect class=ql-fill height=2 width=4 x=9 y=5></rect> <g class=\\\"ql-fill ql-transparent\\\"> <rect height=2 width=3 x=5 y=8></rect> <rect height=2 width=4 x=9 y=8></rect> <rect height=2 width=3 x=5 y=11></rect> <rect height=2 width=4 x=9 y=11></rect> </g> </svg>\";","module.exports = \"<svg viewbox=\\\"0 0 18 18\\\"> <path class=ql-stroke d=M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3></path> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=12 x=3 y=15></rect> </svg>\";","module.exports = \"<svg viewbox=\\\"0 0 18 18\\\"> <rect class=ql-stroke height=12 width=12 x=3 y=3></rect> <rect class=ql-fill height=12 width=1 x=5 y=3></rect> <rect class=ql-fill height=12 width=1 x=12 y=3></rect> <rect class=ql-fill height=2 width=8 x=5 y=8></rect> <rect class=ql-fill height=1 width=3 x=3 y=5></rect> <rect class=ql-fill height=1 width=3 x=3 y=7></rect> <rect class=ql-fill height=1 width=3 x=3 y=10></rect> <rect class=ql-fill height=1 width=3 x=3 y=12></rect> <rect class=ql-fill height=1 width=3 x=12 y=5></rect> <rect class=ql-fill height=1 width=3 x=12 y=7></rect> <rect class=ql-fill height=1 width=3 x=12 y=10></rect> <rect class=ql-fill height=1 width=3 x=12 y=12></rect> </svg>\";","module.exports = \"<svg viewbox=\\\"0 0 18 18\\\"> <polygon class=ql-stroke points=\\\"7 11 9 13 11 11 7 11\\\"></polygon> <polygon class=ql-stroke points=\\\"7 7 9 5 11 7 7 7\\\"></polygon> </svg>\";","import extend from 'extend';\r\nimport Emitter from '../core/emitter';\r\nimport BaseTheme, { BaseTooltip } from './base';\r\nimport { Range } from '../core/selection';\r\nimport icons from '../ui/icons';\r\n\r\nconst TOOLBAR_CONFIG = [\r\n  ['bold', 'italic', 'link'],\r\n  [{ header: 1 }, { header: 2 }, 'blockquote'],\r\n];\r\n\r\nclass BubbleTooltip extends BaseTooltip {\r\n  constructor(quill, bounds) {\r\n    super(quill, bounds);\r\n    this.quill.on(\r\n      Emitter.events.EDITOR_CHANGE,\r\n      (type, range, oldRange, source) => {\r\n        if (type !== Emitter.events.SELECTION_CHANGE) return;\r\n        if (\r\n          range != null &&\r\n          range.length > 0 &&\r\n          source === Emitter.sources.USER\r\n        ) {\r\n          this.show();\r\n          // Lock our width so we will expand beyond our offsetParent boundaries\r\n          this.root.style.left = '0px';\r\n          this.root.style.width = '';\r\n          this.root.style.width = `${this.root.offsetWidth}px`;\r\n          const lines = this.quill.getLines(range.index, range.length);\r\n          if (lines.length === 1) {\r\n            this.position(this.quill.getBounds(range));\r\n          } else {\r\n            const lastLine = lines[lines.length - 1];\r\n            const index = this.quill.getIndex(lastLine);\r\n            const length = Math.min(\r\n              lastLine.length() - 1,\r\n              range.index + range.length - index,\r\n            );\r\n            const indexBounds = this.quill.getBounds(new Range(index, length));\r\n            this.position(indexBounds);\r\n          }\r\n        } else if (\r\n          document.activeElement !== this.textbox &&\r\n          this.quill.hasFocus()\r\n        ) {\r\n          this.hide();\r\n        }\r\n      },\r\n    );\r\n  }\r\n\r\n  listen() {\r\n    super.listen();\r\n    this.root.querySelector('.ql-close').addEventListener('click', () => {\r\n      this.root.classList.remove('ql-editing');\r\n    });\r\n    this.quill.on(Emitter.events.SCROLL_OPTIMIZE, () => {\r\n      // Let selection be restored by toolbar handlers before repositioning\r\n      setTimeout(() => {\r\n        if (this.root.classList.contains('ql-hidden')) return;\r\n        const range = this.quill.getSelection();\r\n        if (range != null) {\r\n          this.position(this.quill.getBounds(range));\r\n        }\r\n      }, 1);\r\n    });\r\n  }\r\n\r\n  cancel() {\r\n    this.show();\r\n  }\r\n\r\n  position(reference) {\r\n    const shift = super.position(reference);\r\n    const arrow = this.root.querySelector('.ql-tooltip-arrow');\r\n    arrow.style.marginLeft = '';\r\n    if (shift !== 0) {\r\n      arrow.style.marginLeft = `${-1 * shift - arrow.offsetWidth / 2}px`;\r\n    }\r\n    return shift;\r\n  }\r\n}\r\nBubbleTooltip.TEMPLATE = [\r\n  '<span class=\"ql-tooltip-arrow\"></span>',\r\n  '<div class=\"ql-tooltip-editor\">',\r\n  '<input type=\"text\" data-formula=\"e=mc^2\" data-link=\"https://quilljs.com\" data-video=\"Embed URL\">',\r\n  '<a class=\"ql-close\"></a>',\r\n  '</div>',\r\n].join('');\r\n\r\nclass BubbleTheme extends BaseTheme {\r\n  constructor(quill, options) {\r\n    if (\r\n      options.modules.toolbar != null &&\r\n      options.modules.toolbar.container == null\r\n    ) {\r\n      options.modules.toolbar.container = TOOLBAR_CONFIG;\r\n    }\r\n    super(quill, options);\r\n    this.quill.container.classList.add('ql-bubble');\r\n  }\r\n\r\n  extendToolbar(toolbar) {\r\n    this.tooltip = new BubbleTooltip(this.quill, this.options.bounds);\r\n    this.tooltip.root.appendChild(toolbar.container);\r\n    this.buildButtons(toolbar.container.querySelectorAll('button'), icons);\r\n    this.buildPickers(toolbar.container.querySelectorAll('select'), icons);\r\n  }\r\n}\r\nBubbleTheme.DEFAULTS = extend(true, {}, BaseTheme.DEFAULTS, {\r\n  modules: {\r\n    toolbar: {\r\n      handlers: {\r\n        link(value) {\r\n          if (!value) {\r\n            this.quill.format('link', false);\r\n          } else {\r\n            this.quill.theme.tooltip.edit();\r\n          }\r\n        },\r\n      },\r\n    },\r\n  },\r\n});\r\n\r\nexport { BubbleTooltip, BubbleTheme as default };\r\n","import extend from 'extend';\r\nimport Emitter from '../core/emitter';\r\nimport BaseTheme, { BaseTooltip } from './base';\r\nimport LinkBlot from '../formats/link';\r\nimport { Range } from '../core/selection';\r\nimport icons from '../ui/icons';\r\n\r\nconst TOOLBAR_CONFIG = [\r\n  [{ header: ['1', '2', '3', false] }],\r\n  ['bold', 'italic', 'underline', 'link'],\r\n  [{ list: 'ordered' }, { list: 'bullet' }],\r\n  ['clean'],\r\n];\r\n\r\nclass SnowTooltip extends BaseTooltip {\r\n  constructor(quill, bounds) {\r\n    super(quill, bounds);\r\n    this.preview = this.root.querySelector('a.ql-preview');\r\n  }\r\n\r\n  listen() {\r\n    super.listen();\r\n    this.root.querySelector('a.ql-action').addEventListener('click', event => {\r\n      if (this.root.classList.contains('ql-editing')) {\r\n        this.save();\r\n      } else {\r\n        this.edit('link', this.preview.textContent);\r\n      }\r\n      event.preventDefault();\r\n    });\r\n    this.root.querySelector('a.ql-remove').addEventListener('click', event => {\r\n      if (this.linkRange != null) {\r\n        const range = this.linkRange;\r\n        this.restoreFocus();\r\n        this.quill.formatText(range, 'link', false, Emitter.sources.USER);\r\n        delete this.linkRange;\r\n      }\r\n      event.preventDefault();\r\n      this.hide();\r\n    });\r\n    this.quill.on(\r\n      Emitter.events.SELECTION_CHANGE,\r\n      (range, oldRange, source) => {\r\n        if (range == null) return;\r\n        if (range.length === 0 && source === Emitter.sources.USER) {\r\n          const [link, offset] = this.quill.scroll.descendant(\r\n            LinkBlot,\r\n            range.index,\r\n          );\r\n          if (link != null) {\r\n            this.linkRange = new Range(range.index - offset, link.length());\r\n            const preview = LinkBlot.formats(link.domNode);\r\n            this.preview.textContent = preview;\r\n            this.preview.setAttribute('href', preview);\r\n            this.show();\r\n            this.position(this.quill.getBounds(this.linkRange));\r\n            return;\r\n          }\r\n        } else {\r\n          delete this.linkRange;\r\n        }\r\n        this.hide();\r\n      },\r\n    );\r\n  }\r\n\r\n  show() {\r\n    super.show();\r\n    this.root.removeAttribute('data-mode');\r\n  }\r\n}\r\nSnowTooltip.TEMPLATE = [\r\n  '<a class=\"ql-preview\" target=\"_blank\" href=\"about:blank\"></a>',\r\n  '<input type=\"text\" data-formula=\"e=mc^2\" data-link=\"https://quilljs.com\" data-video=\"Embed URL\">',\r\n  '<a class=\"ql-action\"></a>',\r\n  '<a class=\"ql-remove\"></a>',\r\n].join('');\r\n\r\nclass SnowTheme extends BaseTheme {\r\n  constructor(quill, options) {\r\n    if (\r\n      options.modules.toolbar != null &&\r\n      options.modules.toolbar.container == null\r\n    ) {\r\n      options.modules.toolbar.container = TOOLBAR_CONFIG;\r\n    }\r\n    super(quill, options);\r\n    this.quill.container.classList.add('ql-snow');\r\n  }\r\n\r\n  extendToolbar(toolbar) {\r\n    toolbar.container.classList.add('ql-snow');\r\n    this.buildButtons(toolbar.container.querySelectorAll('button'), icons);\r\n    this.buildPickers(toolbar.container.querySelectorAll('select'), icons);\r\n    this.tooltip = new SnowTooltip(this.quill, this.options.bounds);\r\n    if (toolbar.container.querySelector('.ql-link')) {\r\n      this.quill.keyboard.addBinding(\r\n        { key: 'k', shortKey: true },\r\n        (range, context) => {\r\n          toolbar.handlers.link.call(toolbar, !context.format.link);\r\n        },\r\n      );\r\n    }\r\n  }\r\n}\r\nSnowTheme.DEFAULTS = extend(true, {}, BaseTheme.DEFAULTS, {\r\n  modules: {\r\n    toolbar: {\r\n      handlers: {\r\n        link(value) {\r\n          if (value) {\r\n            const range = this.quill.getSelection();\r\n            if (range == null || range.length === 0) return;\r\n            let preview = this.quill.getText(range);\r\n            if (\r\n              /^\\S+@\\S+\\.\\S+$/.test(preview) &&\r\n              preview.indexOf('mailto:') !== 0\r\n            ) {\r\n              preview = `mailto:${preview}`;\r\n            }\r\n            const { tooltip } = this.quill.theme;\r\n            tooltip.edit('link', preview);\r\n          } else {\r\n            this.quill.format('link', false);\r\n          }\r\n        },\r\n      },\r\n    },\r\n  },\r\n});\r\n\r\nexport default SnowTheme;\r\n"],"sourceRoot":""}